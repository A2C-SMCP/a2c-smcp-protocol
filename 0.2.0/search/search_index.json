{"config":{"lang":["zh"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"A2C-SMCP Protocol","text":"<ul> <li> <p> \u534f\u8bae\u89c4\u8303</p> <p>\u8be6\u7ec6\u7684\u534f\u8bae\u89c4\u8303\u6587\u6863\uff0c\u5305\u62ec\u67b6\u6784\u8bbe\u8ba1\u3001\u4e8b\u4ef6\u5b9a\u4e49\u3001\u6570\u636e\u7ed3\u6784\u7b49</p> <p> \u5f00\u59cb\u9605\u8bfb</p> </li> <li> <p> SDK \u5b9e\u73b0</p> <p>\u5b98\u65b9 SDK \u5b9e\u73b0\u5e93</p> <ul> <li>Python SDK - Release Candidate</li> <li>Rust SDK - \u5f00\u53d1\u4e2d</li> </ul> </li> <li> <p> \u5e38\u89c1\u95ee\u9898</p> <p>\u5173\u4e8e\u534f\u8bae\u8bbe\u8ba1\u51b3\u7b56\u7684\u5e38\u89c1\u95ee\u9898\u89e3\u7b54</p> <p> \u67e5\u770b FAQ</p> </li> </ul>"},{"location":"#\u4ec0\u4e48\u662f-a2c-smcp","title":"\u4ec0\u4e48\u662f A2C-SMCP","text":"<p>A2C-SMCP\uff08Agent To Computer SMCP\uff09\u662f\u4e00\u79cd\u8fdc\u7a0b\u5de5\u5177\u8c03\u7528\u534f\u8bae\uff0c\u5b9a\u4e49\u4e86 Agent \u4e0e\u627f\u8f7d\u591a\u8def MCP Server \u7684 Computer \u4e4b\u95f4\u7684\u901a\u4fe1\u673a\u5236\u3002\u8be5\u534f\u8bae\u8fd0\u884c\u5728 Socket.IO \u4e4b\u4e0a\uff0c\u901a\u8fc7\u4e8b\u4ef6\u9a71\u52a8\u7684\u65b9\u5f0f\u7ec4\u7ec7\u6d88\u606f\uff0c\u5e76\u901a\u8fc7\u623f\u95f4\uff08Room/Office\uff09\u673a\u5236\u5b9e\u73b0\u5b89\u5168\u9694\u79bb\u3002</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Agent  \u2502 \u2190\u2500\u2500\u2500\u2500\u2500\u2192 \u2502  Server \u2502 \u2190\u2500\u2500\u2500\u2500\u2500\u2192 \u2502Computer \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n   \u2502                     \u2502                   \u2502\n   \u2502  \u5de5\u5177\u8c03\u7528\u53d1\u8d77\u65b9     \u2502  \u4fe1\u4ee4\u670d\u52a1\u5668        \u2502  MCP \u670d\u52a1\u7ba1\u7406\u8005\n   \u2502                     \u2502  \u8fde\u63a5\u7ba1\u7406          \u2502  \u5de5\u5177\u6267\u884c\u8005\n   \u2502                     \u2502  \u6d88\u606f\u8def\u7531          \u2502\n   \u2502                     \u2502  \u901a\u77e5\u5e7f\u64ad          \u2502\n</code></pre>"},{"location":"#\u6838\u5fc3\u4f18\u52bf","title":"\u6838\u5fc3\u4f18\u52bf","text":"\u7279\u6027 \u8bf4\u660e \u5de5\u5177\u70ed\u7ba1\u7406 \u52a8\u6001\u53d1\u73b0/\u6ce8\u518c\u5de5\u5177\uff0c\u914d\u7f6e\u70ed\u66f4\u65b0 \u5b89\u5168\u9694\u79bb \u57fa\u4e8e\u623f\u95f4\u7684\u6743\u9650\u8fb9\u754c\uff0cAgent-Computer \u7ed1\u5b9a \u7f51\u7edc\u7a7f\u900f Socket.IO \u957f\u8fde\u63a5\uff0c\u514d\u9664\u516c\u7f51 IP \u4f9d\u8d56 \u5f39\u6027\u67b6\u6784 \u591a Computer \u652f\u6301\uff0c\u5206\u5e03\u5f0f\u5de5\u5177\u90e8\u7f72 \u6807\u51c6\u5316\u63a5\u53e3 \u5f3a\u7c7b\u578b\u6570\u636e\u7ed3\u6784\uff0c\u660e\u786e\u7684\u4e8b\u4ef6\u8fb9\u754c"},{"location":"#\u5feb\u901f\u5bfc\u822a","title":"\u5feb\u901f\u5bfc\u822a","text":"<ul> <li>\u534f\u8bae\u6982\u8ff0 - \u4e86\u89e3\u8bbe\u8ba1\u76ee\u6807\u4e0e\u6838\u5fc3\u6982\u5ff5</li> <li>\u67b6\u6784\u8bbe\u8ba1 - \u6df1\u5165\u7406\u89e3\u4e09\u89d2\u8272\u6a21\u578b</li> <li>\u4e8b\u4ef6\u5b9a\u4e49 - \u5b8c\u6574\u7684\u4e8b\u4ef6\u5217\u8868\u4e0e\u89c4\u8303</li> <li>\u6570\u636e\u7ed3\u6784 - \u8bf7\u6c42/\u54cd\u5e94\u6570\u636e\u7ed3\u6784\u5b9a\u4e49</li> </ul>"},{"location":"#\u7248\u672c\u4fe1\u606f","title":"\u7248\u672c\u4fe1\u606f","text":"<p>\u5f53\u524d\u534f\u8bae\u7248\u672c\uff1a0.2.0</p>"},{"location":"#license","title":"License","text":"<p>MIT License</p>"},{"location":"appendix/faq/","title":"\u5e38\u89c1\u95ee\u9898 (FAQ)","text":""},{"location":"appendix/faq/#\u5de5\u5177\u8c03\u7528\u76f8\u5173","title":"\u5de5\u5177\u8c03\u7528\u76f8\u5173","text":""},{"location":"appendix/faq/#q-\u5de5\u5177\u8c03\u7528\u8fd4\u56de-\u5f53\u524d\u5de5\u5177\u9700\u8981\u8c03\u7528\u524d\u8fdb\u884c\u4e8c\u6b21\u786e\u8ba4-\u9519\u8bef","title":"Q: \u5de5\u5177\u8c03\u7528\u8fd4\u56de \"\u5f53\u524d\u5de5\u5177\u9700\u8981\u8c03\u7528\u524d\u8fdb\u884c\u4e8c\u6b21\u786e\u8ba4\" \u9519\u8bef","text":"<p>\u95ee\u9898\u63cf\u8ff0:</p> <pre><code>{\n  \"content\": [\n    {\n      \"type\": \"text\",\n      \"text\": \"\u5f53\u524d\u5de5\u5177\u9700\u8981\u8c03\u7528\u524d\u8fdb\u884c\u4e8c\u6b21\u786e\u8ba4\uff0c\u4f46\u5ba2\u6237\u7aef\u76ee\u524d\u6ca1\u6709\u5b9e\u73b0\u4e8c\u6b21\u786e\u8ba4\u56de\u8c03\u65b9\u6cd5\"\n    }\n  ],\n  \"isError\": true\n}\n</code></pre> <p>\u539f\u56e0: \u88ab\u8c03\u7528\u7684\u5de5\u5177\u5728\u914d\u7f6e\u4e2d\u542f\u7528\u4e86\u4e8c\u6b21\u786e\u8ba4\uff0c\u4f46\u5ba2\u6237\u7aef\u672a\u5b9e\u73b0\u786e\u8ba4\u56de\u8c03\u3002</p> <p>\u89e3\u51b3\u65b9\u6848:</p> <p>\u65b9\u6848 A: \u4e3a\u7279\u5b9a\u5de5\u5177\u5173\u95ed\u4e8c\u6b21\u786e\u8ba4 <pre><code>{\n  \"tool_meta\": {\n    \"\u5de5\u5177\u540d\": {\n      \"auto_apply\": true\n    }\n  }\n}\n</code></pre></p> <p>\u65b9\u6848 B: \u4e3a\u6240\u6709\u5de5\u5177\u5173\u95ed\u4e8c\u6b21\u786e\u8ba4\uff08\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\uff09 <pre><code>{\n  \"default_tool_meta\": {\n    \"auto_apply\": true\n  }\n}\n</code></pre></p>"},{"location":"appendix/faq/#q-\u5de5\u5177\u8c03\u7528\u8d85\u65f6","title":"Q: \u5de5\u5177\u8c03\u7528\u8d85\u65f6","text":"<p>\u53ef\u80fd\u539f\u56e0: - \u5de5\u5177\u6267\u884c\u65f6\u95f4\u8fc7\u957f - Computer \u4e0d\u5728\u7ebf - \u7f51\u7edc\u8fde\u63a5\u95ee\u9898</p> <p>\u89e3\u51b3\u65b9\u6848: 1. \u589e\u52a0 <code>timeout</code> \u53c2\u6570\u503c 2. \u68c0\u67e5 Computer \u662f\u5426\u6b63\u5e38\u8fd0\u884c 3. \u68c0\u67e5\u7f51\u7edc\u8fde\u63a5</p>"},{"location":"appendix/faq/#q-\u627e\u4e0d\u5230\u5de5\u5177","title":"Q: \u627e\u4e0d\u5230\u5de5\u5177","text":"<p>\u53ef\u80fd\u539f\u56e0: - MCP Server \u672a\u542f\u52a8 - \u5de5\u5177\u540d\u79f0\u9519\u8bef - \u5de5\u5177\u5728 <code>forbidden_tools</code> \u4e2d</p> <p>\u89e3\u51b3\u65b9\u6848: 1. \u4f7f\u7528 <code>tools</code> \u547d\u4ee4\u67e5\u770b\u53ef\u7528\u5de5\u5177\u5217\u8868 2. \u68c0\u67e5 MCP Server \u72b6\u6001\uff1a<code>status</code> 3. \u68c0\u67e5\u914d\u7f6e\u4e2d\u7684 <code>forbidden_tools</code></p>"},{"location":"appendix/faq/#desktop-\u76f8\u5173","title":"Desktop \u76f8\u5173","text":""},{"location":"appendix/faq/#q-\u4e00\u4e2a-mcp-server-\u80fd\u66b4\u9732\u591a\u5c11\u4e2a-window-\u8d44\u6e90","title":"Q: \u4e00\u4e2a MCP Server \u80fd\u66b4\u9732\u591a\u5c11\u4e2a window:// \u8d44\u6e90\uff1f","text":"<p>\u7b54: \u6ca1\u6709\u9650\u5236\u3002\u4e00\u4e2a MCP Server \u53ef\u4ee5\u66b4\u9732\u591a\u4e2a <code>window://</code> \u8d44\u6e90\uff0c\u901a\u8fc7 <code>window://{host}/{path}</code> \u533a\u5206\u4e0d\u540c\u7a97\u53e3\u3002Computer \u4f1a\u4ece <code>resources/list</code> \u8fd4\u56de\u4e2d\u7b5b\u9009\u6240\u6709 <code>window://</code> \u8d44\u6e90\u3002</p>"},{"location":"appendix/faq/#q-desktop-\u662f\u5982\u4f55\u7ec4\u88c5\u7684","title":"Q: Desktop \u662f\u5982\u4f55\u7ec4\u88c5\u7684\uff1f","text":"<p>\u7ec4\u88c5\u6d41\u7a0b: 1. \u8de8 MCP Server \u6c47\u603b\u6240\u6709 <code>window://</code> \u8d44\u6e90 2. \u8bfb\u53d6\u6bcf\u4e2a window \u7684\u5185\u5bb9 3. \u6309\u7b56\u7565\u6392\u5e8f/\u88c1\u526a 4. \u6e32\u67d3\u4e3a\u5b57\u7b26\u4e32\u5217\u8868</p> <p>\u6392\u5e8f\u89c4\u5219: - size \u622a\u65ad: <code>desktop_size</code> \u53c2\u6570\u63a7\u5236\u6570\u91cf\u4e0a\u9650 - server \u4f18\u5148\u7ea7: \u6700\u8fd1\u8c03\u7528\u8fc7\u5de5\u5177\u7684 Server \u4f18\u5148 - \u7a97\u53e3\u6392\u5e8f: \u540c\u4e00 server \u5185\u6309 <code>priority</code> \u964d\u5e8f - fullscreen \u89c4\u5219: fullscreen \u7a97\u53e3\u72ec\u5360\u8be5 Server \u7684\u663e\u793a</p>"},{"location":"appendix/faq/#q-\u4e3a\u4ec0\u4e48-desktop-\u8fd4\u56de\u4e3a\u7a7a","title":"Q: \u4e3a\u4ec0\u4e48 Desktop \u8fd4\u56de\u4e3a\u7a7a\uff1f","text":"<p>\u53ef\u80fd\u539f\u56e0: - \u6ca1\u6709 MCP Server \u66b4\u9732 <code>window://</code> \u8d44\u6e90 - <code>desktop_size</code> \u8bbe\u7f6e\u4e3a 0 \u6216\u8d1f\u6570 - MCP Server \u672a\u542f\u52a8 - MCP Server \u672a\u58f0\u660e <code>resources.subscribe</code> \u80fd\u529b</p>"},{"location":"appendix/faq/#q-window-uri-\u7684\u683c\u5f0f\u662f\u4ec0\u4e48","title":"Q: Window URI \u7684\u683c\u5f0f\u662f\u4ec0\u4e48\uff1f","text":"<p>\u683c\u5f0f: <code>window://host/path1/path2?priority=P&amp;fullscreen=F</code></p> <ul> <li><code>host</code>\uff08\u5fc5\u9700\uff09: MCP \u552f\u4e00\u6807\u8bc6\uff0c\u63a8\u8350\u53cd\u5411\u57df\u540d\u98ce\u683c\u5982 <code>com.example.mcp</code></li> <li><code>path</code>\uff08\u53ef\u9009\uff09: 0..N \u4e2a\u8def\u5f84\u6bb5\uff0cURL \u7f16\u7801</li> <li><code>priority</code>\uff08\u53ef\u9009\uff09: \u6574\u6570 <code>[0, 100]</code>\uff0c\u540c\u4e00 MCP \u5185\u6bd4\u8f83\uff0c\u8d8a\u5927\u8d8a\u9760\u524d</li> <li><code>fullscreen</code>\uff08\u53ef\u9009\uff09: \u5e03\u5c14\u503c\uff0c\u5168\u5c4f\u6e32\u67d3\u6807\u8bb0</li> </ul> <p>\u8be6\u89c1 Desktop \u684c\u9762\u7cfb\u7edf - Window URI \u89c4\u8303\u3002</p>"},{"location":"appendix/faq/#q-\u5982\u4f55\u8ba9-mcp-server-\u7684\u5185\u5bb9\u51fa\u73b0\u5728-desktop-\u4e0a","title":"Q: \u5982\u4f55\u8ba9 MCP Server \u7684\u5185\u5bb9\u51fa\u73b0\u5728 Desktop \u4e0a\uff1f","text":"<p>MCP Server \u53c2\u4e0e Desktop \u9700\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a</p> <ol> <li>\u58f0\u660e <code>resources.subscribe</code> \u80fd\u529b</li> <li>\u5728 <code>resources/list</code> \u4e2d\u8fd4\u56de\u6709\u6548\u7684 <code>window://</code> URI \u7684 Resource</li> <li>\u5b9e\u73b0 <code>resources/read</code>\uff0c\u8fd4\u56de <code>TextResourceContents</code></li> <li>\u5728\u7a97\u53e3\u589e\u5220/\u5185\u5bb9\u53d8\u5316\u65f6\u53d1\u51fa\u5bf9\u5e94\u7684 MCP \u901a\u77e5</li> </ol> <p>\u8be6\u89c1 Desktop \u684c\u9762\u7cfb\u7edf - MCP Server \u5b9e\u73b0\u6307\u5357\u3002</p> <p>\u8be6\u89c1 Desktop \u684c\u9762\u7cfb\u7edf \u5b8c\u6574\u89c4\u8303\u3002</p>"},{"location":"appendix/faq/#finder-\u76f8\u5173","title":"Finder \u76f8\u5173","text":""},{"location":"appendix/faq/#q-finder-\u548c-desktop-\u6709\u4ec0\u4e48\u533a\u522b","title":"Q: Finder \u548c Desktop \u6709\u4ec0\u4e48\u533a\u522b\uff1f","text":"<p>Desktop \u7ba1\u7406\u77ac\u6001\u4e0a\u4e0b\u6587\uff08<code>window://</code>\uff09\uff0c\u9002\u5408\u5c0f\u578b\u3001\u9891\u7e41\u53d8\u5316\u7684\u6570\u636e\uff08\u5982\u5f53\u524d\u6d4f\u89c8\u5668\u9875\u9762\u3001\u7f16\u8f91\u5668\u72b6\u6001\uff09\u3002Finder \u7ba1\u7406\u6301\u4e45\u6587\u6863\uff08<code>dpe://</code>\uff09\uff0c\u9002\u5408\u5927\u578b\u3001\u7ed3\u6784\u5316\u7684\u5185\u5bb9\uff08\u5982 Excel \u8868\u683c\u3001PDF \u6587\u6863\u3001PPT \u6f14\u793a\u6587\u7a3f\uff09\uff0c\u652f\u6301\u6e10\u8fdb\u5f0f\u5bfc\u822a\uff08\u9010\u5c42\u94bb\u5165\uff09\u3002</p>"},{"location":"appendix/faq/#q-\u4ec0\u4e48\u662f-dpe-\u4e09\u5c42\u6a21\u578b","title":"Q: \u4ec0\u4e48\u662f DPE \u4e09\u5c42\u6a21\u578b\uff1f","text":"<p>DPE \u4ee3\u8868 Document-Page-Element \u4e09\u5c42\u7ed3\u6784\uff1a</p> <ul> <li>Document: \u4e00\u4e2a\u5b8c\u6574\u6587\u6863\u5b9e\u4f8b\uff08\u5982\u4e00\u4e2a Excel \u5de5\u4f5c\u7c3f\uff09</li> <li>Page: \u6587\u6863\u5185\u7684\u4e00\u4e2a\u903b\u8f91\u9875\u9762\uff08\u5982\u4e00\u4e2a\u5de5\u4f5c\u8868\uff09</li> <li>Element: \u9875\u9762\u5185\u7684\u4e00\u4e2a\u5185\u5bb9\u5355\u5143\uff08\u5982\u4e00\u4e2a\u8868\u683c\u3001\u4e00\u6bb5\u6587\u672c\uff09</li> </ul> <p>\u8fd9\u79cd\u6a21\u578b\u901a\u8fc7 <code>dpe://</code> URI \u56db\u7ea7\u5bfb\u5740\u652f\u6301\u4ece\u76ee\u5f55\u5230\u5143\u7d20\u7684\u6e10\u8fdb\u5f0f\u5bfc\u822a\u3002</p>"},{"location":"appendix/faq/#q-dpe-uri-\u7684\u683c\u5f0f\u662f\u4ec0\u4e48","title":"Q: dpe:// URI \u7684\u683c\u5f0f\u662f\u4ec0\u4e48\uff1f","text":"<p>\u683c\u5f0f: <code>dpe://{host}/{doc-ref}[/sub-path][?query-params]</code></p> <p>\u56db\u7ea7\u5bfb\u5740\uff1a</p> <ul> <li>Level 0: <code>dpe://host</code> \u2192 \u6587\u6863\u76ee\u5f55</li> <li>Level 1: <code>dpe://host/doc-ref</code> \u2192 \u6587\u6863\u5143\u6570\u636e + \u9875\u9762\u7d22\u5f15</li> <li>Level 2: <code>dpe://host/doc-ref/pages/{N}</code> \u2192 \u9875\u9762\u5185\u5bb9</li> <li>Level 3: <code>dpe://host/doc-ref/elements/{ID}</code> \u2192 \u5143\u7d20\u8be6\u60c5</li> </ul> <p>\u8be6\u89c1 Finder \u6587\u6863\u7cfb\u7edf - dpe:// URI \u534f\u8bae\u3002</p>"},{"location":"appendix/faq/#q-\u5982\u4f55\u8ba9-mcp-server-\u7684\u6587\u6863\u51fa\u73b0\u5728-finder-\u4e2d","title":"Q: \u5982\u4f55\u8ba9 MCP Server \u7684\u6587\u6863\u51fa\u73b0\u5728 Finder \u4e2d\uff1f","text":"<p>MCP Server \u53c2\u4e0e Finder \u9700\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a</p> <ol> <li>\u58f0\u660e <code>resources.subscribe</code> \u80fd\u529b</li> <li>\u5728 <code>resources/list</code> \u4e2d\u8fd4\u56de\u6709\u6548\u7684 <code>dpe://</code> URI \u7684 Resource</li> <li>\u5b9e\u73b0 <code>resources/read</code>\uff0c\u6309 URI \u7ea7\u522b\u8fd4\u56de\u5bf9\u5e94 JSON \u5185\u5bb9</li> <li>\u53ef\u9009\uff1a\u58f0\u660e <code>resources/templates</code> \u63d0\u4f9b\u5b50\u8def\u5f84\u6a21\u677f</li> <li>\u5728\u6587\u6863\u589e\u5220/\u5185\u5bb9\u53d8\u5316\u65f6\u53d1\u51fa\u5bf9\u5e94\u7684 MCP \u901a\u77e5</li> </ol> <p>\u8be6\u89c1 Finder \u6587\u6863\u7cfb\u7edf - MCP Server \u5b9e\u73b0\u6307\u5357\u3002</p>"},{"location":"appendix/faq/#q-agent-\u5982\u4f55\u5bfc\u822a-dpe-\u6587\u6863\u5185\u5bb9","title":"Q: Agent \u5982\u4f55\u5bfc\u822a DPE \u6587\u6863\u5185\u5bb9\uff1f","text":"<p>Agent \u901a\u8fc7\u4e24\u79cd\u673a\u5236\u5bfc\u822a\u6587\u6863\uff1a</p> <ol> <li><code>client:get_finder</code> \u4e8b\u4ef6: \u83b7\u53d6\u7ecf Organizer \u8fc7\u6ee4\u3001\u6392\u5e8f\u3001\u5206\u9875\u540e\u7684\u6587\u6863\u76ee\u5f55</li> <li>MCP <code>resources/read</code>: \u6309 <code>dpe://</code> URI \u56db\u7ea7\u5bfb\u5740\u9010\u5c42\u8bfb\u53d6\u5185\u5bb9\uff08\u76ee\u5f55 \u2192 \u6587\u6863 \u2192 \u9875\u9762 \u2192 \u5143\u7d20\uff09</li> </ol> <p>\u5177\u4f53\u7684\u5bfc\u822a\u903b\u8f91\uff08\u5206\u9875\u904d\u5386\u3001\u5173\u952e\u8bcd\u641c\u7d22\u3001\u683c\u5f0f\u8f6c\u6362\u3001\u7f13\u5b58\u7b49\uff09\u7531 Agent \u5185\u90e8\u5b9e\u73b0\uff0c\u4e0d\u5728\u534f\u8bae\u8303\u56f4\u5185\u3002\u8be6\u89c1 Finder \u6587\u6863\u7cfb\u7edf - Agent \u7aef\u5bfc\u822a\u3002</p>"},{"location":"appendix/faq/#q-mcp-server-\u652f\u6301-dpe-uri-\u81ea\u52a8\u8865\u5168\u5417","title":"Q: MCP Server \u652f\u6301 dpe:// URI \u81ea\u52a8\u8865\u5168\u5417\uff1f","text":"<p>MCP \u89c4\u8303\u5b9a\u4e49\u4e86 <code>completion/complete</code> \u65b9\u6cd5\uff0cMCP Server \u53ef\u9009\u62e9\u4e3a <code>dpe://</code> \u8d44\u6e90\u6a21\u677f\u53c2\u6570\u5b9e\u73b0\u81ea\u52a8\u8865\u5168\u3002\u8865\u5168\u94fe\u4e3a <code>doc_ref \u2192 page_index \u2192 element_id</code>\uff0c\u6bcf\u4e00\u7ea7\u4f9d\u8d56\u524d\u4e00\u7ea7\u5df2\u9009\u5b9a\u7684\u503c\u3002</p> <p>\u8fd9\u662f\u53ef\u9009\u80fd\u529b\uff08SHOULD\uff09\uff0c\u672a\u5b9e\u73b0\u7684 Server \u4ecd\u53ef\u6b63\u5e38\u53c2\u4e0e Finder\u3002\u8be6\u89c1 Finder \u6587\u6863\u7cfb\u7edf - \u81ea\u52a8\u8865\u5168\u3002</p>"},{"location":"appendix/faq/#q-\u4e3a\u4ec0\u4e48-finder-\u8fd4\u56de\u4e3a\u7a7a","title":"Q: \u4e3a\u4ec0\u4e48 Finder \u8fd4\u56de\u4e3a\u7a7a\uff1f","text":"<p>\u53ef\u80fd\u539f\u56e0:</p> <ul> <li>\u6ca1\u6709 MCP Server \u66b4\u9732 <code>dpe://</code> \u8d44\u6e90</li> <li>MCP Server \u672a\u58f0\u660e <code>resources.subscribe</code> \u80fd\u529b</li> <li>MCP Server \u672a\u542f\u52a8</li> <li>\u5173\u952e\u8bcd\u6216\u6587\u4ef6\u7c7b\u578b\u8fc7\u6ee4\u6761\u4ef6\u65e0\u5339\u914d</li> <li><code>offset</code> \u8d85\u51fa\u603b\u6570\u8303\u56f4</li> </ul> <p>\u8be6\u89c1 Finder \u6587\u6863\u7cfb\u7edf \u5b8c\u6574\u89c4\u8303\u3002</p>"},{"location":"appendix/faq/#\u8fde\u63a5\u76f8\u5173","title":"\u8fde\u63a5\u76f8\u5173","text":""},{"location":"appendix/faq/#q-socketio-\u8fde\u63a5\u5931\u8d25","title":"Q: Socket.IO \u8fde\u63a5\u5931\u8d25","text":"<p>\u53ef\u80fd\u539f\u56e0: - Server URL \u9519\u8bef - \u8ba4\u8bc1\u5931\u8d25 - \u7f51\u7edc\u95ee\u9898</p> <p>\u89e3\u51b3\u65b9\u6848: 1. \u68c0\u67e5 Server URL \u662f\u5426\u6b63\u786e 2. \u9a8c\u8bc1 API Key \u7b49\u8ba4\u8bc1\u4fe1\u606f 3. \u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\u548c\u9632\u706b\u5899</p>"},{"location":"appendix/faq/#q-\u52a0\u5165\u623f\u95f4\u5931\u8d25","title":"Q: \u52a0\u5165\u623f\u95f4\u5931\u8d25","text":"<p>\u53ef\u80fd\u539f\u56e0: - \u623f\u95f4\u5df2\u6709 Agent\uff08Agent \u72ec\u5360\u89c4\u5219\uff09 - office_id \u683c\u5f0f\u9519\u8bef - \u672a\u8fde\u63a5\u5230 Server</p> <p>\u89e3\u51b3\u65b9\u6848: 1. \u786e\u8ba4\u623f\u95f4\u5185\u6ca1\u6709\u5176\u4ed6 Agent 2. \u68c0\u67e5 office_id \u683c\u5f0f 3. \u5148\u6267\u884c <code>socket connect</code></p>"},{"location":"appendix/faq/#\u914d\u7f6e\u76f8\u5173","title":"\u914d\u7f6e\u76f8\u5173","text":""},{"location":"appendix/faq/#q-\u5360\u4f4d\u7b26-inputxxx-\u672a\u88ab\u66ff\u6362","title":"Q: \u5360\u4f4d\u7b26 ${input:xxx} \u672a\u88ab\u66ff\u6362","text":"<p>\u53ef\u80fd\u539f\u56e0: - \u672a\u52a0\u8f7d inputs \u5b9a\u4e49 - input id \u62fc\u5199\u9519\u8bef</p> <p>\u89e3\u51b3\u65b9\u6848: 1. \u4f7f\u7528 <code>inputs load @file.json</code> \u52a0\u8f7d\u5b9a\u4e49 2. \u4f7f\u7528 <code>inputs list</code> \u68c0\u67e5\u5df2\u6709\u5b9a\u4e49 3. \u786e\u8ba4 id \u62fc\u5199\u6b63\u786e</p>"},{"location":"appendix/faq/#q-\u5de5\u5177\u540d\u79f0\u51b2\u7a81","title":"Q: \u5de5\u5177\u540d\u79f0\u51b2\u7a81","text":"<p>\u8bf4\u660e: \u5f53\u591a\u4e2a MCP Server \u6709\u540c\u540d\u5de5\u5177\u65f6\u4f1a\u4ea7\u751f\u51b2\u7a81\u3002</p> <p>\u89e3\u51b3\u65b9\u6848: \u4f7f\u7528\u522b\u540d\u533a\u5206 <pre><code>{\n  \"tool_meta\": {\n    \"read_file\": {\n      \"alias\": \"local_read_file\"\n    }\n  }\n}\n</code></pre></p>"},{"location":"appendix/faq/#\u6027\u80fd\u76f8\u5173","title":"\u6027\u80fd\u76f8\u5173","text":""},{"location":"appendix/faq/#q-\u5927\u91cf\u8fde\u63a5\u65f6\u6027\u80fd\u95ee\u9898","title":"Q: \u5927\u91cf\u8fde\u63a5\u65f6\u6027\u80fd\u95ee\u9898","text":"<p>\u5efa\u8bae: 1. \u4f7f\u7528 Redis \u4f5c\u4e3a Socket.IO \u4f1a\u8bdd\u5b58\u50a8 2. \u914d\u7f6e\u5408\u7406\u7684\u8fde\u63a5\u6570\u9650\u5236 3. \u4f7f\u7528\u8d1f\u8f7d\u5747\u8861</p>"},{"location":"appendix/faq/#q-\u5de5\u5177\u6267\u884c\u6162","title":"Q: \u5de5\u5177\u6267\u884c\u6162","text":"<p>\u5efa\u8bae: 1. \u68c0\u67e5 MCP Server \u672c\u8eab\u7684\u6027\u80fd 2. \u8003\u8651\u4f7f\u7528\u5f02\u6b65\u5ba2\u6237\u7aef 3. \u5408\u7406\u8bbe\u7f6e\u8d85\u65f6\u65f6\u95f4</p>"},{"location":"appendix/faq/#\u5f00\u53d1\u76f8\u5173","title":"\u5f00\u53d1\u76f8\u5173","text":""},{"location":"appendix/faq/#q-\u5982\u4f55\u8c03\u8bd5\u5de5\u5177\u8c03\u7528","title":"Q: \u5982\u4f55\u8c03\u8bd5\u5de5\u5177\u8c03\u7528\uff1f","text":"<p>\u4f7f\u7528 CLI \u7684 <code>tc</code> \u547d\u4ee4\uff1a <pre><code>a2c&gt; tc {\"computer\":\"local\",\"agent\":\"debug\",\"req_id\":\"1\",\"tool_name\":\"echo\",\"params\":{\"text\":\"hello\"},\"timeout\":30}\n</code></pre></p>"},{"location":"appendix/faq/#q-\u5982\u4f55\u67e5\u770b\u4e8b\u4ef6\u6d41","title":"Q: \u5982\u4f55\u67e5\u770b\u4e8b\u4ef6\u6d41\uff1f","text":"<p>\u542f\u7528\u8be6\u7ec6\u65e5\u5fd7\uff1a <pre><code>import logging\nlogging.basicConfig(level=logging.DEBUG)\n</code></pre></p>"},{"location":"appendix/faq/#q-\u540c\u6b65\u5ba2\u6237\u7aef\u8fd8\u662f\u5f02\u6b65\u5ba2\u6237\u7aef","title":"Q: \u540c\u6b65\u5ba2\u6237\u7aef\u8fd8\u662f\u5f02\u6b65\u5ba2\u6237\u7aef\uff1f","text":"<ul> <li>\u5f02\u6b65\u5ba2\u6237\u7aef: FastAPI\u3001Sanic \u7b49\u5f02\u6b65\u6846\u67b6</li> <li>\u540c\u6b65\u5ba2\u6237\u7aef: Flask\u3001Django \u7b49\u540c\u6b65\u6846\u67b6</li> </ul>"},{"location":"appendix/faq/#\u5176\u4ed6","title":"\u5176\u4ed6","text":"<p>\u5982\u6709\u5176\u4ed6\u95ee\u9898\uff0c\u8bf7\u901a\u8fc7 Issue \u53cd\u9988\uff0c\u5efa\u8bae\u9644\u5e26\uff1a - \u4f7f\u7528\u573a\u666f\u63cf\u8ff0 - \u6700\u5c0f\u590d\u73b0\u914d\u7f6e - \u65e5\u5fd7\u7247\u6bb5 - \u76f8\u5173\u6d4b\u8bd5\u7528\u4f8b</p>"},{"location":"appendix/faq/#\u53c2\u8003","title":"\u53c2\u8003","text":"<ul> <li>\u4e8b\u4ef6\u5b9a\u4e49</li> <li>\u6570\u636e\u7ed3\u6784</li> <li>\u9519\u8bef\u5904\u7406</li> </ul>"},{"location":"guides/finder-sdk-guide/","title":"Finder SDK \u5b9e\u73b0\u6307\u5357","text":"<p>\u9002\u7528 SDK: python-sdk / rust-sdk</p> <p>\u534f\u8bae\u7248\u672c: 0.2.0</p> <p>\u524d\u7f6e\u9605\u8bfb</p> <p>\u672c\u6587\u6863\u662f\u9762\u5411 SDK \u5f00\u53d1\u8005\u7684\u5b9e\u73b0\u6307\u5bfc\uff0c\u89c4\u8303\u6027\u5b9a\u4e49\u4ee5 <code>specification/</code> \u76ee\u5f55\u4e3a\u51c6\u3002\u9605\u8bfb\u672c\u6587\u524d\uff0c\u8bf7\u5148\u719f\u6089\u4ee5\u4e0b\u89c4\u8303\u6587\u6863\uff1a</p> <ul> <li>Finder \u6587\u6863\u7cfb\u7edf \u2014 DPE \u6570\u636e\u6a21\u578b\u3001URI \u534f\u8bae\u3001Organizer \u7b56\u7565\u3001\u66f4\u65b0\u673a\u5236</li> <li>\u4e8b\u4ef6\u5b9a\u4e49 \u2014 \u4e8b\u4ef6\u5e38\u91cf\u4e0e\u8def\u7531\u89c4\u5219</li> <li>\u6570\u636e\u7ed3\u6784 \u2014 TypedDict \u5b9a\u4e49\uff08\u534f\u8bae\u6570\u636e\u7ed3\u6784\u7684\u552f\u4e00\u6765\u6e90\uff09</li> <li>\u9519\u8bef\u5904\u7406 \u2014 Finder \u9519\u8bef\u7801 4201-4204</li> </ul>"},{"location":"guides/finder-sdk-guide/#\u6982\u8ff0","title":"\u6982\u8ff0","text":"<p>Finder \u662f A2C-SMCP \u534f\u8bae\u4e2d\u7ba1\u7406\u7ed3\u6784\u5316\u6301\u4e45\u6587\u6863\u7684\u5b50\u7cfb\u7edf\uff0c\u5b83\u5c06\u591a\u4e2a MCP Server \u66b4\u9732\u7684 <code>dpe://</code> \u8d44\u6e90\u805a\u5408\u4e3a\u7edf\u4e00\u7684\u6587\u6863\u76ee\u5f55\u89c6\u56fe\uff0c\u652f\u6301 Agent \u901a\u8fc7\u6e10\u8fdb\u5f0f\u5bfc\u822a\u9010\u5c42\u94bb\u5165\uff1a\u76ee\u5f55 \u2192 \u6587\u6863 \u2192 \u9875\u9762 \u2192 \u5143\u7d20\u3002</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Computer                        \u2502\n\u2502                                                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u2502\n\u2502  \u2502MCP Srv A \u2502  \u2502MCP Srv B \u2502  \u2502MCP Srv C \u2502        \u2502\n\u2502  \u2502dpe://a   \u2502  \u2502dpe://b   \u2502  \u2502(\u65e0\u6587\u6863)   \u2502        \u2502\n\u2502  \u2502  /report \u2502  \u2502  /slides \u2502  \u2502          \u2502        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502\n\u2502       \u2502             \u2502                              \u2502\n\u2502       \u25bc             \u25bc                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                       \u2502\n\u2502  \u2502   Finder Organizer     \u2502 \u2190 \u8fc7\u6ee4\u3001\u6392\u5e8f\u3001\u5206\u9875    \u2502\n\u2502  \u2502   (organize_finder)    \u2502                       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                       \u2502\n\u2502              \u2502                                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502\n               \u25bc\n          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u2502  Agent   \u2502 \u2190 client:get_finder + MCP resources/read\n          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"guides/finder-sdk-guide/#\u4e09\u89d2\u8272\u5b9e\u73b0\u6743\u91cd","title":"\u4e09\u89d2\u8272\u5b9e\u73b0\u6743\u91cd","text":"\u89d2\u8272 \u804c\u8d23 \u5de5\u4f5c\u91cf Server \u7eaf\u8def\u7531 \u2014 \u8f6c\u53d1 <code>client:get_finder</code>\u3001\u5e7f\u64ad <code>notify:update_finder</code> \u6700\u5c0f Computer \u4e3b\u8981\u5b9e\u73b0\u65b9 \u2014 Organizer \u7b97\u6cd5\u3001MCP \u8d44\u6e90\u805a\u5408\u3001\u53d8\u66f4\u68c0\u6d4b\u3001DPE URI \u89e3\u6790 \u6700\u5927 Agent \u5ba2\u6237\u7aef \u2014 \u4e8b\u4ef6\u53d1\u5c04\u3001\u901a\u77e5\u5904\u7406\u3001\u6e10\u8fdb\u5f0f\u5bfc\u822a\u8f85\u52a9\u65b9\u6cd5 \u4e2d\u7b49"},{"location":"guides/finder-sdk-guide/#\u4e0e-desktop-\u5b9e\u73b0\u7684\u5173\u7cfb","title":"\u4e0e Desktop \u5b9e\u73b0\u7684\u5173\u7cfb","text":"<p>\u6838\u5fc3\u89c2\u70b9</p> <p>Finder \u4e0e Desktop \u662f\u5e73\u884c\u7cfb\u7edf\uff0c\u5171\u4eab\u76f8\u540c\u7684\u4e09\u4e8b\u4ef6\u6a21\u5f0f\uff08<code>client:get_*</code> \u2192 <code>server:update_*</code> \u2192 <code>notify:update_*</code>\uff09\u3002\u5df2\u6709 Desktop \u5b9e\u73b0\u53ef\u76f4\u63a5\u4f5c\u4e3a\u6a21\u677f\uff0c\"\u590d\u5236 + \u6539\u4e8b\u4ef6\u540d + \u8c03\u6574\u4e1a\u52a1\u903b\u8f91\" \u5373\u53ef\u5b8c\u6210\u5927\u90e8\u5206\u5de5\u4f5c\u3002</p>"},{"location":"guides/finder-sdk-guide/#\u6a21\u5757\u5bf9\u7167\u8868","title":"\u6a21\u5757\u5bf9\u7167\u8868","text":"Desktop Finder \u5907\u6ce8 <code>window://</code> URI \u89e3\u6790 (<code>utils/window_uri</code>) <code>dpe://</code> URI \u89e3\u6790 (<code>utils/dpe_uri</code>) \u4e0d\u540c URI \u7ed3\u6784\uff0c\u76f8\u540c\u6a21\u5757\u6a21\u5f0f <code>desktop/organize.py</code> <code>finder/organize.py</code> \u4e0d\u540c\u8fc7\u6ee4/\u6392\u5e8f\u903b\u8f91\uff0c\u76f8\u540c\u63a5\u53e3\u6a21\u5f0f <code>GET_DESKTOP_EVENT</code> <code>GET_FINDER_EVENT</code> \u76f8\u540c\u8def\u7531\u673a\u5236 <code>UPDATE_DESKTOP_EVENT</code> / Notification <code>UPDATE_FINDER_EVENT</code> / Notification \u76f8\u540c\u6570\u636e\u7ed3\u6784 <code>UpdateComputerConfigReq</code> <code>ResourceListChangedNotification</code> (window://) \u540c (dpe://) \u76f8\u540c\u68c0\u6d4b\u7b97\u6cd5\uff0c\u4e0d\u540c URI scheme \u8fc7\u6ee4 <code>GetDeskTopReq/Ret</code> <code>GetFinderReq/Ret</code> Finder \u591a\u4e86 <code>keywords</code>\u3001<code>file_type</code>\u3001\u5206\u9875"},{"location":"guides/finder-sdk-guide/#\u5173\u952e\u5dee\u5f02","title":"\u5173\u952e\u5dee\u5f02","text":"\u7ef4\u5ea6 Desktop Finder \u6392\u5e8f\u4f9d\u636e <code>priority</code> \u53c2\u6570\uff08\u7a97\u53e3\u4f18\u5148\u7ea7\uff09 <code>last_modified</code> \u964d\u5e8f \u8fc7\u6ee4 \u65e0 \u5173\u952e\u8bcd\u8fc7\u6ee4 + \u6587\u4ef6\u7c7b\u578b\u8fc7\u6ee4 \u5206\u9875 \u65e0\uff08<code>desktop_size</code> \u9650\u5236\u6570\u91cf\uff09 <code>offset</code> / <code>limit</code> \u6807\u51c6\u5206\u9875 \u8fd4\u56de\u503c <code>list[str]</code>\uff08\u6e32\u67d3\u540e\u7684\u5b57\u7b26\u4e32\uff09 <code>list[DPEDocumentSummary]</code>\uff08\u7ed3\u6784\u5316\u6587\u6863\u6458\u8981\uff09"},{"location":"guides/finder-sdk-guide/#\u4e8b\u4ef6\u4e0e\u6570\u636e\u7ed3\u6784\u901f\u67e5","title":"\u4e8b\u4ef6\u4e0e\u6570\u636e\u7ed3\u6784\u901f\u67e5","text":"<p>\u672c\u8282\u4ee5\u901f\u67e5\u8868\u5f62\u5f0f\u5217\u51fa SDK \u5f00\u53d1\u8005\u9700\u8981\u5b9e\u73b0\u7684\u5168\u90e8\u7c7b\u578b\u548c\u4e8b\u4ef6\u3002\u5b8c\u6574\u5b9a\u4e49\u8bf7\u53c2\u9605 \u6570\u636e\u7ed3\u6784 \u548c \u4e8b\u4ef6\u5b9a\u4e49\u3002</p>"},{"location":"guides/finder-sdk-guide/#\u4e8b\u4ef6\u5e38\u91cf","title":"\u4e8b\u4ef6\u5e38\u91cf","text":"PythonRust <pre><code>GET_FINDER_EVENT = \"client:get_finder\"\nUPDATE_FINDER_EVENT = \"server:update_finder\"\nUPDATE_FINDER_NOTIFICATION = \"notify:update_finder\"\n</code></pre> <pre><code>pub const GET_FINDER_EVENT: &amp;str = \"client:get_finder\";\npub const UPDATE_FINDER_EVENT: &amp;str = \"server:update_finder\";\npub const UPDATE_FINDER_NOTIFICATION: &amp;str = \"notify:update_finder\";\n</code></pre>"},{"location":"guides/finder-sdk-guide/#\u6570\u636e\u7ed3\u6784","title":"\u6570\u636e\u7ed3\u6784","text":"PythonRust <pre><code>class GetFinderReq(AgentCallData, total=True):\n    agent: str                          # Agent \u540d\u79f0\n    req_id: str                         # \u8bf7\u6c42 ID\n    computer: str                       # \u76ee\u6807 Computer \u540d\u79f0\n    keywords: NotRequired[list[str]]    # \u53ef\u9009\uff1a\u5173\u952e\u8bcd\u8fc7\u6ee4\n    file_type: NotRequired[str]         # \u53ef\u9009\uff1a\u6587\u4ef6\u7c7b\u578b\u8fc7\u6ee4\n    offset: NotRequired[int]            # \u53ef\u9009\uff1a\u5206\u9875\u504f\u79fb\uff08\u9ed8\u8ba4 0\uff09\n    limit: NotRequired[int]             # \u53ef\u9009\uff1a\u5206\u9875\u9650\u5236\uff08\u9ed8\u8ba4 20\uff09\n\nclass GetFinderRet(TypedDict, total=False):\n    documents: list[DPEDocumentSummary]  # \u6587\u6863\u6458\u8981\u5217\u8868\n    total_count: int                     # \u603b\u6587\u6863\u6570\uff08\u7528\u4e8e\u5206\u9875\uff09\n    req_id: str                          # \u8bf7\u6c42 ID\n\nclass DPEDocumentSummary(TypedDict):\n    doc_ref: str                        # \u6587\u6863\u5f15\u7528\u952e\n    uri: str                            # \u5b8c\u6574 dpe:// URI\n    file_uri: str                       # \u539f\u59cb\u6587\u4ef6 URI\n    file_type: str                      # \u6587\u4ef6\u7c7b\u578b\uff08xlsx, pdf, pptx \u7b49\uff09\n    title: str                          # \u6587\u6863\u6807\u9898\n    page_count: int                     # \u603b\u9875\u6570\n    keywords: NotRequired[list[str]]    # \u5173\u952e\u8bcd\u5217\u8868\n    summary: NotRequired[str]           # \u6587\u6863\u6458\u8981\n    server: str                         # \u6765\u6e90 MCP Server \u540d\u79f0\n    last_modified: NotRequired[str]     # \u6700\u540e\u4fee\u6539\u65f6\u95f4\uff08ISO 8601\uff09\n\nclass DPEPageSummary(TypedDict):\n    page_index: int                     # \u9875\u7801\uff08\u4ece 0 \u5f00\u59cb\uff09\n    title: str                          # \u9875\u9762\u6807\u9898\n    element_count: int                  # \u5143\u7d20\u6570\u91cf\n    uri: str                            # \u9875\u9762\u7684 dpe:// URI\n    doc_ref: NotRequired[str]           # \u6240\u5c5e\u6587\u6863\u5f15\u7528\u952e\n\nclass DPEElementDetail(TypedDict):\n    element_id: str                     # \u5143\u7d20\u552f\u4e00\u6807\u8bc6\n    category: str                       # \u5143\u7d20\u7c7b\u578b\n    summary: NotRequired[str]           # \u5143\u7d20\u6458\u8981\n    content: dict                       # \u5143\u7d20\u5185\u5bb9\n    doc_ref: NotRequired[str]           # \u6240\u5c5e\u6587\u6863\u5f15\u7528\u952e\n    page_index: NotRequired[int]        # \u6240\u5c5e\u9875\u7801\n    uri: NotRequired[str]              # \u5143\u7d20\u7684 dpe:// URI\n    metadata: NotRequired[dict]         # \u9644\u52a0\u5143\u6570\u636e\n\nclass UpdateComputerConfigReq(TypedDict):\n    computer: str                       # Computer \u540d\u79f0\uff08\u590d\u7528 Desktop \u5df2\u6709\u7ed3\u6784\uff09\n</code></pre> <pre><code>#[derive(Debug, Serialize, Deserialize)]\npub struct GetFinderReq {\n    pub agent: String,\n    pub req_id: String,\n    pub computer: String,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    pub keywords: Option&lt;Vec&lt;String&gt;&gt;,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    pub file_type: Option&lt;String&gt;,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    pub offset: Option&lt;i64&gt;,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    pub limit: Option&lt;i64&gt;,\n}\n\n#[derive(Debug, Serialize, Deserialize)]\npub struct GetFinderRet {\n    pub documents: Vec&lt;DPEDocumentSummary&gt;,\n    pub total_count: i64,\n    pub req_id: String,\n}\n\n#[derive(Debug, Serialize, Deserialize)]\npub struct DPEDocumentSummary {\n    pub doc_ref: String,\n    pub uri: String,\n    pub file_uri: String,\n    pub file_type: String,\n    pub title: String,\n    pub page_count: i64,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    pub keywords: Option&lt;Vec&lt;String&gt;&gt;,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    pub summary: Option&lt;String&gt;,\n    pub server: String,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    pub last_modified: Option&lt;String&gt;,\n}\n\n#[derive(Debug, Serialize, Deserialize)]\npub struct DPEPageSummary {\n    pub page_index: i64,\n    pub title: String,\n    pub element_count: i64,\n    pub uri: String,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    pub doc_ref: Option&lt;String&gt;,\n}\n\n#[derive(Debug, Serialize, Deserialize)]\npub struct DPEElementDetail {\n    pub element_id: String,\n    pub category: String,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    pub summary: Option&lt;String&gt;,\n    pub content: serde_json::Value,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    pub doc_ref: Option&lt;String&gt;,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    pub page_index: Option&lt;i64&gt;,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    pub uri: Option&lt;String&gt;,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    pub metadata: Option&lt;serde_json::Value&gt;,\n}\n\n// \u590d\u7528 Desktop \u5df2\u6709\u7ed3\u6784\n#[derive(Debug, Serialize, Deserialize)]\npub struct UpdateComputerConfigReq {\n    pub computer: String,\n}\n</code></pre>"},{"location":"guides/finder-sdk-guide/#\u9519\u8bef\u7801","title":"\u9519\u8bef\u7801","text":"\u4ee3\u7801 \u540d\u79f0 \u542b\u4e49 4201 Document Not Found \u6587\u6863\u5f15\u7528\uff08<code>doc_ref</code>\uff09\u4e0d\u5b58\u5728 4202 Page Out of Range \u9875\u7801\u8d85\u51fa\u6587\u6863\u7684 <code>page_count</code> \u8303\u56f4 4203 Element Not Found \u5143\u7d20 ID \u4e0d\u5b58\u5728 4204 Invalid DPE URI <code>dpe://</code> URI \u683c\u5f0f\u9519\u8bef\u6216\u6821\u9a8c\u5931\u8d25"},{"location":"guides/finder-sdk-guide/#server-\u5b9e\u73b0\u6700\u5c0f\u5de5\u4f5c\u91cf","title":"Server \u5b9e\u73b0\uff08\u6700\u5c0f\u5de5\u4f5c\u91cf\uff09","text":"<p>Server \u5bf9 Finder \u7684\u5904\u7406\u4e0e Desktop \u5b8c\u5168\u5bf9\u79f0\uff0c\u4ec5\u4e8b\u4ef6\u540d\u4e0d\u540c\u3002\u5982\u679c Desktop \u7684\u5bf9\u5e94\u5904\u7406\u5668\u5df2\u5de5\u4f5c\uff0cFinder \u53ea\u9700\u590d\u5236\u5e76\u6539\u4e8b\u4ef6\u540d\u3002</p>"},{"location":"guides/finder-sdk-guide/#\u9700\u4fee\u6539\u6587\u4ef6","title":"\u9700\u4fee\u6539\u6587\u4ef6","text":"SDK \u6587\u4ef6 Python <code>server/namespace.py</code> + <code>server/sync_namespace.py</code> Rust <code>src/server/handlers.rs</code>"},{"location":"guides/finder-sdk-guide/#\u4e8b\u4ef6\u5904\u7406\u5668-1clientget_finder-\u8def\u7531","title":"\u4e8b\u4ef6\u5904\u7406\u5668 1\uff1a<code>client:get_finder</code> \u8def\u7531","text":"<p>\u4e0e <code>client:get_desktop</code> \u76f8\u540c\u6a21\u5f0f \u2014 \u4ece\u8bf7\u6c42\u4e2d\u63d0\u53d6 <code>computer</code>\uff0c\u67e5 <code>name_to_sid</code>\uff0c\u8f6c\u53d1\u5230\u76ee\u6807 Computer\uff0c\u8fd4\u56de\u7ed3\u679c\u3002</p> PythonRust <pre><code># server/namespace.py \u2014 \u5bf9\u7167 client:get_desktop \u5904\u7406\u5668\n\n@self.on(GET_FINDER_EVENT)\nasync def handle_get_finder(sid, data: GetFinderReq):\n    computer_name = data[\"computer\"]\n    computer_sid = self.name_to_sid.get(computer_name)\n    if not computer_sid:\n        return {\"error\": {\"code\": 404, \"message\": f\"Computer '{computer_name}' not found\"}}\n\n    result = await self.emit(\n        GET_FINDER_EVENT,\n        data,\n        to=computer_sid,\n    )\n    return result\n</code></pre> <pre><code>// src/server/handlers.rs \u2014 \u5bf9\u7167 client:get_desktop \u5904\u7406\u5668\n\nasync fn handle_get_finder(\n    &amp;self,\n    sid: Sid,\n    data: GetFinderReq,\n) -&gt; Result&lt;GetFinderRet, SmcpError&gt; {\n    let computer_sid = self.name_to_sid\n        .get(&amp;data.computer)\n        .ok_or_else(|| SmcpError::not_found(\n            format!(\"Computer '{}' not found\", data.computer)\n        ))?;\n\n    self.emit(GET_FINDER_EVENT, &amp;data, *computer_sid).await\n}\n</code></pre>"},{"location":"guides/finder-sdk-guide/#\u4e8b\u4ef6\u5904\u7406\u5668-2serverupdate_finder-\u5e7f\u64ad","title":"\u4e8b\u4ef6\u5904\u7406\u5668 2\uff1a<code>server:update_finder</code> \u5e7f\u64ad","text":"<p>\u6536\u5230 <code>UpdateComputerConfigReq</code>\uff0c\u5e7f\u64ad <code>notify:update_finder</code> \u5230\u623f\u95f4\u3002</p> PythonRust <pre><code># server/namespace.py \u2014 \u5bf9\u7167 server:update_desktop \u5904\u7406\u5668\n\n@self.on(UPDATE_FINDER_EVENT)\nasync def handle_update_finder(sid, data: UpdateComputerConfigReq):\n    room = self.sid_to_room.get(sid)\n    if room:\n        await self.emit(\n            UPDATE_FINDER_NOTIFICATION,\n            data,\n            room=room,\n            skip_sid=sid,\n        )\n</code></pre> <pre><code>// src/server/handlers.rs \u2014 \u5bf9\u7167 server:update_desktop \u5904\u7406\u5668\n\nasync fn handle_update_finder(\n    &amp;self,\n    sid: Sid,\n    data: UpdateComputerConfigReq,\n) -&gt; Result&lt;(), SmcpError&gt; {\n    if let Some(room) = self.sid_to_room.get(&amp;sid) {\n        self.broadcast(\n            UPDATE_FINDER_NOTIFICATION,\n            &amp;data,\n            room,\n            Some(sid), // skip_sid\n        ).await?;\n    }\n    Ok(())\n}\n</code></pre>"},{"location":"guides/finder-sdk-guide/#computer-\u5b9e\u73b0\u4e3b\u8981\u5de5\u4f5c","title":"Computer \u5b9e\u73b0\uff08\u4e3b\u8981\u5de5\u4f5c\uff09","text":"<p>Computer \u662f Finder \u529f\u80fd\u7684\u6838\u5fc3\u5b9e\u73b0\u65b9\uff0c\u8d1f\u8d23 DPE URI \u89e3\u6790\u3001MCP \u8d44\u6e90\u805a\u5408\u3001Organizer \u6392\u5e8f\u548c\u53d8\u66f4\u68c0\u6d4b\u3002</p>"},{"location":"guides/finder-sdk-guide/#\u63a8\u8350\u6a21\u5757\u7ed3\u6784","title":"\u63a8\u8350\u6a21\u5757\u7ed3\u6784","text":"<pre><code>computer/\n\u251c\u2500\u2500 finder/\n\u2502   \u251c\u2500\u2500 organize.py      # organize_finder() \u7b97\u6cd5\n\u2502   \u2514\u2500\u2500 aggregator.py    # MCP \u8d44\u6e90\u805a\u5408 + \u53d8\u66f4\u68c0\u6d4b\n\u251c\u2500\u2500 utils/\n\u2502   \u2514\u2500\u2500 dpe_uri.py       # DPE URI \u89e3\u6790\u5668\n</code></pre> <p>\u6b64\u7ed3\u6784\u4e0e Desktop \u7684 <code>desktop/organize.py</code> + <code>utils/window_uri.py</code> \u955c\u50cf\u3002</p>"},{"location":"guides/finder-sdk-guide/#dpe-uri-\u89e3\u6790\u5668","title":"DPE URI \u89e3\u6790\u5668","text":""},{"location":"guides/finder-sdk-guide/#\u63a5\u53e3\u5b9a\u4e49","title":"\u63a5\u53e3\u5b9a\u4e49","text":"PythonRust <pre><code># computer/utils/dpe_uri.py\n\nfrom dataclasses import dataclass\nfrom typing import Optional\n\n@dataclass\nclass ParsedDPEUri:\n    scheme: str                          # \u56fa\u5b9a \"dpe\"\n    host: str                            # MCP Server \u6807\u8bc6\n    doc_ref: Optional[str]               # \u6587\u6863\u5f15\u7528\u952e\n    sub_path: Optional[str]              # \"pages/{N}\" \u6216 \"elements/{ID}\"\n    query_params: dict[str, str]         # format, depth, offset, limit, categories\n\n    @property\n    def level(self) -&gt; int:\n        \"\"\"\u8fd4\u56de URI \u7ea7\u522b\uff1a0=\u76ee\u5f55, 1=\u6587\u6863, 2=\u9875\u9762, 3=\u5143\u7d20\"\"\"\n        if self.doc_ref is None:\n            return 0\n        if self.sub_path is None:\n            return 1\n        if self.sub_path.startswith(\"pages/\"):\n            return 2\n        if self.sub_path.startswith(\"elements/\"):\n            return 3\n        return -1  # \u65e0\u6548\n\n\ndef parse_dpe_uri(raw: str) -&gt; ParsedDPEUri:\n    \"\"\"\u89e3\u6790 dpe:// URI\uff0c\u6821\u9a8c\u5931\u8d25\u629b\u51fa ValueError\uff08\u9519\u8bef\u7801 4204\uff09\"\"\"\n    ...\n\n\ndef build_dpe_uri(\n    host: str,\n    doc_ref: Optional[str] = None,\n    sub_path: Optional[str] = None,\n    params: Optional[dict[str, str]] = None,\n) -&gt; str:\n    \"\"\"\u6784\u9020 dpe:// URI\"\"\"\n    ...\n</code></pre> <pre><code>// computer/utils/dpe_uri.rs\n\n#[derive(Debug, Clone)]\npub struct ParsedDPEUri {\n    pub scheme: String,                      // \u56fa\u5b9a \"dpe\"\n    pub host: String,                        // MCP Server \u6807\u8bc6\n    pub doc_ref: Option&lt;String&gt;,             // \u6587\u6863\u5f15\u7528\u952e\n    pub sub_path: Option&lt;String&gt;,            // \"pages/{N}\" \u6216 \"elements/{ID}\"\n    pub query_params: HashMap&lt;String, String&gt;,\n}\n\nimpl ParsedDPEUri {\n    /// \u8fd4\u56de URI \u7ea7\u522b\uff1a0=\u76ee\u5f55, 1=\u6587\u6863, 2=\u9875\u9762, 3=\u5143\u7d20\n    pub fn level(&amp;self) -&gt; i32 {\n        match (&amp;self.doc_ref, &amp;self.sub_path) {\n            (None, _) =&gt; 0,\n            (Some(_), None) =&gt; 1,\n            (Some(_), Some(sp)) if sp.starts_with(\"pages/\") =&gt; 2,\n            (Some(_), Some(sp)) if sp.starts_with(\"elements/\") =&gt; 3,\n            _ =&gt; -1,\n        }\n    }\n}\n\npub fn parse_dpe_uri(raw: &amp;str) -&gt; Result&lt;ParsedDPEUri, SmcpError&gt; { ... }\n\npub fn build_dpe_uri(\n    host: &amp;str,\n    doc_ref: Option&lt;&amp;str&gt;,\n    sub_path: Option&lt;&amp;str&gt;,\n    params: Option&lt;&amp;HashMap&lt;String, String&gt;&gt;,\n) -&gt; String { ... }\n</code></pre>"},{"location":"guides/finder-sdk-guide/#8-\u6761\u6821\u9a8c\u89c4\u5219","title":"8 \u6761\u6821\u9a8c\u89c4\u5219","text":"<p>\u89e3\u6790\u5668\u5fc5\u987b\u6309\u4ee5\u4e0b\u89c4\u5219\u6821\u9a8c\u8f93\u5165 URI\uff0c\u4efb\u4e00\u89c4\u5219\u5931\u8d25\u5e94\u8fd4\u56de\u9519\u8bef\u7801 4204\uff08Invalid DPE URI\uff09\uff1a</p> <ol> <li><code>scheme</code> \u5fc5\u987b\u4e3a <code>dpe</code></li> <li><code>host</code> \u4e0d\u80fd\u4e3a\u7a7a</li> <li><code>sub-path</code> \u82e5\u5b58\u5728\uff0c\u5fc5\u987b\u5339\u914d <code>pages/{\u975e\u8d1f\u6574\u6570}</code> \u6216 <code>elements/{\u975e\u7a7a\u5b57\u7b26\u4e32}</code></li> <li><code>format</code> \u82e5\u5b58\u5728\uff0c\u5fc5\u987b\u4e3a <code>json</code>\u3001<code>markdown</code>\u3001<code>text</code> \u4e4b\u4e00</li> <li><code>depth</code> \u82e5\u5b58\u5728\uff0c\u5fc5\u987b\u4e3a <code>metadata</code> \u6216 <code>pages</code></li> <li><code>offset</code> \u82e5\u5b58\u5728\uff0c\u5fc5\u987b\u4e3a\u975e\u8d1f\u6574\u6570</li> <li><code>limit</code> \u82e5\u5b58\u5728\uff0c\u5fc5\u987b\u4e3a <code>[1, 100]</code> \u8303\u56f4\u5185\u7684\u6574\u6570</li> <li><code>categories</code> \u82e5\u5b58\u5728\uff0c\u5fc5\u987b\u662f\u5408\u6cd5\u7684 \u5143\u7d20\u7c7b\u578b \u7684\u9017\u53f7\u5206\u9694\u5217\u8868</li> </ol>"},{"location":"guides/finder-sdk-guide/#finder-organizer-\u7b97\u6cd5","title":"Finder Organizer \u7b97\u6cd5","text":""},{"location":"guides/finder-sdk-guide/#\u5b8c\u6574\u4f2a\u4ee3\u7801","title":"\u5b8c\u6574\u4f2a\u4ee3\u7801","text":"<pre><code>def organize_finder(\n    documents: list[DPEDocumentSummary],\n    keywords: list[str] | None,\n    file_type: str | None,\n    history: list[str],           # \u5de5\u5177\u8c03\u7528\u5386\u53f2\u4e2d\u7684 MCP Server \u540d\u79f0\u5217\u8868\n    offset: int = 0,\n    limit: int = 20,\n) -&gt; tuple[list[DPEDocumentSummary], int]:\n    \"\"\"\n    \u8fd4\u56de (\u5206\u9875\u540e\u7684\u6587\u6863\u5217\u8868, \u8fc7\u6ee4\u540e\u7684\u603b\u6587\u6863\u6570 total_count)\n    \"\"\"\n\n    # Step 1: \u8fc7\u6ee4\u65e0\u6548 URI \u6587\u6863\n    docs = [d for d in documents if is_valid_dpe_uri(d[\"uri\"])]\n\n    # Step 2: \u5173\u952e\u8bcd\u8fc7\u6ee4\uff08OR \u5339\u914d title / keywords / summary\uff09\n    if keywords:\n        docs = [\n            d for d in docs\n            if any(\n                kw.lower() in d[\"title\"].lower()\n                or kw.lower() in \" \".join(d.get(\"keywords\", [])).lower()\n                or kw.lower() in d.get(\"summary\", \"\").lower()\n                for kw in keywords\n            )\n        ]\n\n    # Step 3: \u6587\u4ef6\u7c7b\u578b\u8fc7\u6ee4\uff08\u7cbe\u786e\u5339\u914d\uff09\n    if file_type:\n        docs = [d for d in docs if d[\"file_type\"] == file_type]\n\n    # Step 4: Server \u4f18\u5148\u7ea7\u6392\u5e8f\n    # \u53cd\u5411\u904d\u5386\u5de5\u5177\u8c03\u7528\u5386\u53f2\uff0c\u53bb\u91cd\uff0c\u5f97\u5230\u6700\u8fd1\u4f7f\u7528\u7684 Server \u5217\u8868\n    seen = set()\n    server_order = []\n    for server_name in reversed(history):\n        if server_name not in seen:\n            seen.add(server_name)\n            server_order.append(server_name)\n    # \u672a\u51fa\u73b0\u5728\u5386\u53f2\u4e2d\u7684 Server \u6309\u540d\u79f0\u5b57\u6bcd\u5e8f\u8ffd\u52a0\n    remaining = sorted(set(d[\"server\"] for d in docs) - seen)\n    server_order.extend(remaining)\n    server_rank = {name: i for i, name in enumerate(server_order)}\n\n    # Step 5: Server \u5185\u6309 last_modified \u964d\u5e8f\n    def sort_key(d):\n        rank = server_rank.get(d[\"server\"], len(server_order))\n        lm = d.get(\"last_modified\", \"\")\n        return (rank, \"\" if lm else \"z\", lm and (-1,) or (0,))\n        # \u7b80\u5316\uff1a\u5b9e\u9645\u5b9e\u73b0\u4e2d\u4f7f\u7528 ISO 8601 \u65f6\u95f4\u6233\u5012\u5e8f\n\n    docs.sort(key=lambda d: (\n        server_rank.get(d[\"server\"], len(server_order)),\n        d.get(\"last_modified\") is None,       # None \u6392\u672b\u5c3e\n        \"\" if d.get(\"last_modified\") is None\n           else d[\"last_modified\"],\n    ), reverse=False)\n    # \u6ce8\u610f\uff1alast_modified \u964d\u5e8f\u9700\u8981\u989d\u5916\u5904\u7406\uff08\u53cd\u8f6c\u975e None \u503c\u6392\u5e8f\uff09\n\n    # Step 6: \u5206\u9875\n    total_count = len(docs)\n    paginated = docs[offset : offset + limit]\n\n    return paginated, total_count\n</code></pre> <p>\u4e0e Desktop Organizer \u7684\u5dee\u5f02</p> \u5dee\u5f02\u70b9 Desktop Finder \u6392\u5e8f\u4f9d\u636e <code>priority</code> \u53c2\u6570\uff08\u7a97\u53e3\u4f18\u5148\u7ea7\uff09 <code>last_modified</code> \u964d\u5e8f \u5173\u952e\u8bcd\u8fc7\u6ee4 \u65e0 <code>keywords</code> \u53c2\u6570\uff0cOR \u5339\u914d title/keywords/summary \u6587\u4ef6\u7c7b\u578b\u8fc7\u6ee4 \u65e0 <code>file_type</code> \u53c2\u6570\uff0c\u7cbe\u786e\u5339\u914d \u5206\u9875 <code>desktop_size</code> \u622a\u65ad <code>offset</code>/<code>limit</code> \u6807\u51c6\u5206\u9875 + <code>total_count</code>"},{"location":"guides/finder-sdk-guide/#\u5b9e\u73b0\u793a\u4f8b","title":"\u5b9e\u73b0\u793a\u4f8b","text":"PythonRust <pre><code># computer/finder/organize.py\n\nfrom typing import Optional\n\ndef organize_finder(\n    documents: list[dict],\n    keywords: Optional[list[str]] = None,\n    file_type: Optional[str] = None,\n    history: Optional[list[str]] = None,\n    offset: int = 0,\n    limit: int = 20,\n) -&gt; tuple[list[dict], int]:\n    history = history or []\n\n    # Step 1: \u8fc7\u6ee4\u65e0\u6548\u6587\u6863\n    docs = [d for d in documents if d.get(\"uri\", \"\").startswith(\"dpe://\")]\n\n    # Step 2: \u5173\u952e\u8bcd\u8fc7\u6ee4\n    if keywords:\n        def matches_keywords(doc: dict) -&gt; bool:\n            searchable = (\n                doc.get(\"title\", \"\").lower()\n                + \" \" + \" \".join(doc.get(\"keywords\", [])).lower()\n                + \" \" + doc.get(\"summary\", \"\").lower()\n            )\n            return any(kw.lower() in searchable for kw in keywords)\n        docs = [d for d in docs if matches_keywords(d)]\n\n    # Step 3: \u6587\u4ef6\u7c7b\u578b\u8fc7\u6ee4\n    if file_type:\n        docs = [d for d in docs if d.get(\"file_type\") == file_type]\n\n    # Step 4: \u6784\u5efa Server \u4f18\u5148\u7ea7\n    seen: set[str] = set()\n    server_order: list[str] = []\n    for name in reversed(history):\n        if name not in seen:\n            seen.add(name)\n            server_order.append(name)\n    remaining = sorted(set(d[\"server\"] for d in docs) - seen)\n    server_order.extend(remaining)\n    rank = {name: i for i, name in enumerate(server_order)}\n\n    # Step 5: \u6392\u5e8f\uff08Server \u4f18\u5148\u7ea7\u5347\u5e8f\uff0clast_modified \u964d\u5e8f\uff09\n    docs.sort(key=lambda d: (\n        rank.get(d[\"server\"], len(server_order)),\n        0 if d.get(\"last_modified\") else 1,\n        \"\" if not d.get(\"last_modified\") else\n            chr(0) + str(-ord(c) for c in d[\"last_modified\"]),\n    ))\n    # \u5b9e\u9645\u5b9e\u73b0\u5efa\u8bae\uff1a\u6309 (server_rank, -timestamp) \u6392\u5e8f\n\n    # Step 6: \u5206\u9875\n    total_count = len(docs)\n    return docs[offset:offset + limit], total_count\n</code></pre> <pre><code>// computer/finder/organize.rs\n\npub fn organize_finder(\n    documents: Vec&lt;DPEDocumentSummary&gt;,\n    keywords: Option&lt;&amp;[String]&gt;,\n    file_type: Option&lt;&amp;str&gt;,\n    history: &amp;[String],\n    offset: usize,\n    limit: usize,\n) -&gt; (Vec&lt;DPEDocumentSummary&gt;, usize) {\n    // Step 1: \u8fc7\u6ee4\u65e0\u6548\u6587\u6863\n    let mut docs: Vec&lt;_&gt; = documents.into_iter()\n        .filter(|d| d.uri.starts_with(\"dpe://\"))\n        .collect();\n\n    // Step 2: \u5173\u952e\u8bcd\u8fc7\u6ee4\n    if let Some(kws) = keywords {\n        docs.retain(|d| {\n            let searchable = format!(\n                \"{} {} {}\",\n                d.title.to_lowercase(),\n                d.keywords.as_deref().unwrap_or(&amp;[]).join(\" \").to_lowercase(),\n                d.summary.as_deref().unwrap_or(\"\").to_lowercase(),\n            );\n            kws.iter().any(|kw| searchable.contains(&amp;kw.to_lowercase()))\n        });\n    }\n\n    // Step 3: \u6587\u4ef6\u7c7b\u578b\u8fc7\u6ee4\n    if let Some(ft) = file_type {\n        docs.retain(|d| d.file_type == ft);\n    }\n\n    // Step 4: \u6784\u5efa Server \u4f18\u5148\u7ea7\n    let mut seen = HashSet::new();\n    let mut server_order = Vec::new();\n    for name in history.iter().rev() {\n        if seen.insert(name.clone()) {\n            server_order.push(name.clone());\n        }\n    }\n    let mut remaining: Vec&lt;_&gt; = docs.iter()\n        .map(|d| d.server.clone())\n        .collect::&lt;HashSet&lt;_&gt;&gt;()\n        .difference(&amp;seen)\n        .cloned()\n        .collect();\n    remaining.sort();\n    server_order.extend(remaining);\n    let rank: HashMap&lt;_, _&gt; = server_order.iter()\n        .enumerate()\n        .map(|(i, n)| (n.clone(), i))\n        .collect();\n\n    // Step 5: \u6392\u5e8f\n    docs.sort_by(|a, b| {\n        let ra = rank.get(&amp;a.server).copied().unwrap_or(usize::MAX);\n        let rb = rank.get(&amp;b.server).copied().unwrap_or(usize::MAX);\n        ra.cmp(&amp;rb).then_with(|| {\n            // last_modified \u964d\u5e8f\uff08None \u6392\u672b\u5c3e\uff09\n            match (&amp;b.last_modified, &amp;a.last_modified) {\n                (Some(b_lm), Some(a_lm)) =&gt; b_lm.cmp(a_lm),\n                (Some(_), None) =&gt; std::cmp::Ordering::Less,\n                (None, Some(_)) =&gt; std::cmp::Ordering::Greater,\n                (None, None) =&gt; std::cmp::Ordering::Equal,\n            }\n        })\n    });\n\n    // Step 6: \u5206\u9875\n    let total_count = docs.len();\n    let paginated = docs.into_iter()\n        .skip(offset)\n        .take(limit)\n        .collect();\n\n    (paginated, total_count)\n}\n</code></pre>"},{"location":"guides/finder-sdk-guide/#mcp-\u8d44\u6e90\u805a\u5408","title":"MCP \u8d44\u6e90\u805a\u5408","text":"<p>Computer \u542f\u52a8\u540e\uff0c\u9700\u8981\u4ece\u6240\u6709 MCP Server \u6536\u96c6 <code>dpe://</code> \u8d44\u6e90\uff1a</p> <ol> <li>\u679a\u4e3e \u2014 \u904d\u5386\u6240\u6709\u58f0\u660e <code>resources.subscribe</code> \u80fd\u529b\u7684 MCP Server</li> <li>\u6536\u96c6 \u2014 \u8c03\u7528\u6bcf\u4e2a Server \u7684 <code>resources/list</code>\uff0c\u8fc7\u6ee4\u51fa <code>dpe://</code> URI</li> <li>\u6784\u5efa \u2014 \u8bfb\u53d6 Level 1 \u5143\u6570\u636e\uff0c\u6784\u5efa <code>DPEDocumentSummary</code> \u5217\u8868</li> <li>\u7f13\u5b58 \u2014 \u7ef4\u62a4 URI \u7f13\u5b58\u96c6\u5408\uff08\u7528\u4e8e\u540e\u7eed\u53d8\u66f4\u68c0\u6d4b\uff09</li> </ol> PythonRust <pre><code># computer/finder/aggregator.py\n\nclass FinderAggregator:\n    def __init__(self, mcp_clients: dict[str, MCPClient]):\n        self._clients = mcp_clients\n        self._uri_cache: set[str] = set()\n\n    async def collect_documents(self) -&gt; list[DPEDocumentSummary]:\n        \"\"\"\u4ece\u6240\u6709 MCP Server \u6536\u96c6 dpe:// \u6587\u6863\u6458\u8981\"\"\"\n        documents = []\n        for server_name, client in self._clients.items():\n            if not client.has_capability(\"resources.subscribe\"):\n                continue\n            resources = await client.list_resources()\n            for res in resources:\n                if not res.uri.startswith(\"dpe://\"):\n                    continue\n                # \u8bfb\u53d6 Level 1 \u5143\u6570\u636e\n                metadata = await client.read_resource(res.uri)\n                doc = self._build_summary(metadata, server_name)\n                documents.append(doc)\n        return documents\n\n    def update_uri_cache(self, current_uris: set[str]) -&gt; bool:\n        \"\"\"\u66f4\u65b0\u7f13\u5b58\uff0c\u8fd4\u56de\u662f\u5426\u6709\u53d8\u5316\"\"\"\n        changed = current_uris != self._uri_cache\n        self._uri_cache = current_uris.copy()\n        return changed\n</code></pre> <pre><code>// computer/finder/aggregator.rs\n\npub struct FinderAggregator {\n    clients: HashMap&lt;String, McpClient&gt;,\n    uri_cache: HashSet&lt;String&gt;,\n}\n\nimpl FinderAggregator {\n    pub async fn collect_documents(&amp;self) -&gt; Result&lt;Vec&lt;DPEDocumentSummary&gt;&gt; {\n        let mut documents = Vec::new();\n        for (server_name, client) in &amp;self.clients {\n            if !client.has_capability(\"resources.subscribe\") {\n                continue;\n            }\n            let resources = client.list_resources().await?;\n            for res in resources {\n                if !res.uri.starts_with(\"dpe://\") {\n                    continue;\n                }\n                let metadata = client.read_resource(&amp;res.uri).await?;\n                let doc = self.build_summary(metadata, server_name);\n                documents.push(doc);\n            }\n        }\n        Ok(documents)\n    }\n\n    pub fn update_uri_cache(&amp;mut self, current_uris: HashSet&lt;String&gt;) -&gt; bool {\n        let changed = current_uris != self.uri_cache;\n        self.uri_cache = current_uris;\n        changed\n    }\n}\n</code></pre>"},{"location":"guides/finder-sdk-guide/#\u53d8\u66f4\u68c0\u6d4b","title":"\u53d8\u66f4\u68c0\u6d4b","text":"<p>Computer \u76d1\u542c\u4e24\u79cd MCP \u901a\u77e5\u6765\u68c0\u6d4b\u6587\u6863\u53d8\u5316\uff08\u4e0e Desktop \u7684 <code>window://</code> \u68c0\u6d4b\u903b\u8f91\u5bf9\u79f0\uff09\uff1a</p>"},{"location":"guides/finder-sdk-guide/#resourcelistchangednotification","title":"ResourceListChangedNotification","text":"<pre><code>MCP Server \u53d1\u51fa ResourceListChangedNotification\n    \u2192 Computer \u6536\u96c6\u5f53\u524d\u6240\u6709 dpe:// URI\n    \u2192 \u4e0e\u7f13\u5b58\u7684 URI \u96c6\u5408\u6bd4\u8f83\n    \u2192 \u96c6\u5408\u4e0d\u540c \u2192 emit server:update_finder\n    \u2192 \u96c6\u5408\u76f8\u540c \u2192 \u8df3\u8fc7\uff08\u4ec5\u8bb0\u5f55\u65e5\u5fd7\uff09\n</code></pre> PythonRust <pre><code>async def on_resource_list_changed(self, server_name: str):\n    \"\"\"\u5904\u7406 ResourceListChangedNotification\"\"\"\n    resources = await self._clients[server_name].list_resources()\n    current_uris = {\n        r.uri for r in resources if r.uri.startswith(\"dpe://\")\n    }\n    if self._aggregator.update_uri_cache(current_uris):\n        await self._sio.emit(UPDATE_FINDER_EVENT, {\n            \"computer\": self._name\n        })\n</code></pre> <pre><code>async fn on_resource_list_changed(&amp;mut self, server_name: &amp;str) -&gt; Result&lt;()&gt; {\n    let resources = self.clients[server_name].list_resources().await?;\n    let current_uris: HashSet&lt;String&gt; = resources.iter()\n        .filter(|r| r.uri.starts_with(\"dpe://\"))\n        .map(|r| r.uri.clone())\n        .collect();\n\n    if self.aggregator.update_uri_cache(current_uris) {\n        self.sio.emit(UPDATE_FINDER_EVENT, &amp;UpdateComputerConfigReq {\n            computer: self.name.clone(),\n        }).await?;\n    }\n    Ok(())\n}\n</code></pre>"},{"location":"guides/finder-sdk-guide/#resourceupdatednotification","title":"ResourceUpdatedNotification","text":"<pre><code>MCP Server \u53d1\u51fa ResourceUpdatedNotification\uff08\u643a\u5e26\u5177\u4f53 URI\uff09\n    \u2192 Computer \u68c0\u67e5\u8be5 URI \u662f\u5426\u4e3a dpe://\n    \u2192 \u662f \u2192 \u76f4\u63a5 emit server:update_finder\uff08\u65e0\u9700\u96c6\u5408\u6bd4\u8f83\uff0c\u964d\u4f4e\u5ef6\u8fdf\uff09\n    \u2192 \u5426 \u2192 \u5ffd\u7565\n</code></pre> PythonRust <pre><code>async def on_resource_updated(self, uri: str):\n    \"\"\"\u5904\u7406 ResourceUpdatedNotification\"\"\"\n    if uri.startswith(\"dpe://\"):\n        await self._sio.emit(UPDATE_FINDER_EVENT, {\n            \"computer\": self._name\n        })\n</code></pre> <pre><code>async fn on_resource_updated(&amp;mut self, uri: &amp;str) -&gt; Result&lt;()&gt; {\n    if uri.starts_with(\"dpe://\") {\n        self.sio.emit(UPDATE_FINDER_EVENT, &amp;UpdateComputerConfigReq {\n            computer: self.name.clone(),\n        }).await?;\n    }\n    Ok(())\n}\n</code></pre>"},{"location":"guides/finder-sdk-guide/#clientget_finder-\u4e8b\u4ef6\u5904\u7406\u5668","title":"<code>client:get_finder</code> \u4e8b\u4ef6\u5904\u7406\u5668","text":"PythonRust <pre><code>@self.on(GET_FINDER_EVENT)\nasync def handle_get_finder(sid, data: GetFinderReq):\n    # 1. \u6536\u96c6\u6587\u6863\n    documents = await self._aggregator.collect_documents()\n\n    # 2. \u7ec4\u7ec7\uff08\u8fc7\u6ee4 + \u6392\u5e8f + \u5206\u9875\uff09\n    paginated, total_count = organize_finder(\n        documents=documents,\n        keywords=data.get(\"keywords\"),\n        file_type=data.get(\"file_type\"),\n        history=self._tool_call_history,\n        offset=data.get(\"offset\", 0),\n        limit=data.get(\"limit\", 20),\n    )\n\n    # 3. \u8fd4\u56de\u7ed3\u679c\n    return GetFinderRet(\n        documents=paginated,\n        total_count=total_count,\n        req_id=data[\"req_id\"],\n    )\n</code></pre> <pre><code>async fn handle_get_finder(&amp;self, data: GetFinderReq) -&gt; Result&lt;GetFinderRet&gt; {\n    // 1. \u6536\u96c6\u6587\u6863\n    let documents = self.aggregator.collect_documents().await?;\n\n    // 2. \u7ec4\u7ec7\n    let (paginated, total_count) = organize_finder(\n        documents,\n        data.keywords.as_deref(),\n        data.file_type.as_deref(),\n        &amp;self.tool_call_history,\n        data.offset.unwrap_or(0) as usize,\n        data.limit.unwrap_or(20) as usize,\n    );\n\n    // 3. \u8fd4\u56de\u7ed3\u679c\n    Ok(GetFinderRet {\n        documents: paginated,\n        total_count: total_count as i64,\n        req_id: data.req_id,\n    })\n}\n</code></pre>"},{"location":"guides/finder-sdk-guide/#resourcesread-\u6865\u63a5","title":"<code>resources/read</code> \u6865\u63a5","text":"<p>\u5f53 Agent \u901a\u8fc7\u6807\u51c6 MCP <code>resources/read</code> \u8bf7\u6c42 <code>dpe://</code> \u8d44\u6e90\u65f6\uff0cComputer \u9700\u8981\u5c06\u8bf7\u6c42\u6865\u63a5\u5230\u6b63\u786e\u7684 MCP Server\uff1a</p> <ol> <li>\u89e3\u6790 <code>dpe://</code> URI \u4e2d\u7684 <code>host</code></li> <li>\u6839\u636e <code>host</code> \u67e5\u627e\u5bf9\u5e94\u7684 MCP Server</li> <li>\u8f6c\u53d1 <code>resources/read</code> \u8bf7\u6c42</li> <li>\u8fd4\u56de MCP Server \u7684\u54cd\u5e94</li> </ol> <pre><code>async def read_resource(self, uri: str):\n    parsed = parse_dpe_uri(uri)\n    client = self._find_client_by_host(parsed.host)\n    if not client:\n        raise SmcpError(4201, f\"No MCP Server found for host: {parsed.host}\")\n    return await client.read_resource(uri)\n</code></pre>"},{"location":"guides/finder-sdk-guide/#agent-\u5b9e\u73b0\u5ba2\u6237\u7aef","title":"Agent \u5b9e\u73b0\uff08\u5ba2\u6237\u7aef\uff09","text":""},{"location":"guides/finder-sdk-guide/#\u9700\u4fee\u6539\u6587\u4ef6_1","title":"\u9700\u4fee\u6539\u6587\u4ef6","text":"SDK \u6587\u4ef6 Python <code>agent/client.py</code> + <code>agent/sync_client.py</code> + <code>agent/types.py</code> Rust <code>src/agent/client.rs</code> + <code>src/agent/types.rs</code>"},{"location":"guides/finder-sdk-guide/#get_finder-\u65b9\u6cd5","title":"<code>get_finder()</code> \u65b9\u6cd5","text":"PythonRust <pre><code># agent/client.py\n\nasync def get_finder(\n    self,\n    computer: str,\n    keywords: list[str] | None = None,\n    file_type: str | None = None,\n    offset: int = 0,\n    limit: int = 20,\n) -&gt; GetFinderRet:\n    \"\"\"\u83b7\u53d6\u6307\u5b9a Computer \u7684\u6587\u6863\u76ee\u5f55\"\"\"\n    req: GetFinderReq = {\n        \"agent\": self._name,\n        \"req_id\": self._gen_req_id(),\n        \"computer\": computer,\n    }\n    if keywords is not None:\n        req[\"keywords\"] = keywords\n    if file_type is not None:\n        req[\"file_type\"] = file_type\n    if offset != 0:\n        req[\"offset\"] = offset\n    if limit != 20:\n        req[\"limit\"] = limit\n\n    result = await self._sio.emit(\n        GET_FINDER_EVENT,\n        req,\n        callback=True,\n    )\n    return result\n</code></pre> <pre><code>// src/agent/client.rs\n\npub async fn get_finder(\n    &amp;self,\n    computer: &amp;str,\n    keywords: Option&lt;Vec&lt;String&gt;&gt;,\n    file_type: Option&lt;String&gt;,\n    offset: Option&lt;i64&gt;,\n    limit: Option&lt;i64&gt;,\n) -&gt; Result&lt;GetFinderRet&gt; {\n    let req = GetFinderReq {\n        agent: self.name.clone(),\n        req_id: self.gen_req_id(),\n        computer: computer.to_string(),\n        keywords,\n        file_type,\n        offset,\n        limit,\n    };\n\n    self.sio.emit(GET_FINDER_EVENT, &amp;req).await\n}\n</code></pre>"},{"location":"guides/finder-sdk-guide/#\u901a\u77e5\u5904\u7406\u5668","title":"\u901a\u77e5\u5904\u7406\u5668","text":"<p>\u6ce8\u518c <code>notify:update_finder</code> \u76d1\u542c\u5668\uff0c\u63a8\u8350\u6536\u5230\u901a\u77e5\u540e\u81ea\u52a8\u8c03\u7528 <code>get_finder()</code> \u5237\u65b0\u6587\u6863\u76ee\u5f55\u3002</p> PythonRust <pre><code># agent/client.py\n\n@self._sio.on(UPDATE_FINDER_NOTIFICATION)\nasync def on_finder_updated(data: UpdateComputerConfigReq):\n    computer = data[\"computer\"]\n    # \u63a8\u8350\uff1a\u81ea\u52a8\u5237\u65b0\u6587\u6863\u76ee\u5f55\n    new_finder = await self.get_finder(computer=computer)\n    self._on_finder_changed(computer, new_finder)\n</code></pre> <pre><code>// src/agent/client.rs\n\nself.sio.on(UPDATE_FINDER_NOTIFICATION, |data: UpdateComputerConfigReq| {\n    let computer = data.computer.clone();\n    // \u63a8\u8350\uff1a\u81ea\u52a8\u5237\u65b0\u6587\u6863\u76ee\u5f55\n    let new_finder = self.get_finder(&amp;computer, None, None, None, None).await?;\n    self.on_finder_changed(&amp;computer, new_finder);\n});\n</code></pre>"},{"location":"guides/finder-sdk-guide/#\u6e10\u8fdb\u5f0f\u5bfc\u822a\u8f85\u52a9\u65b9\u6cd5\u53ef\u9009","title":"\u6e10\u8fdb\u5f0f\u5bfc\u822a\u8f85\u52a9\u65b9\u6cd5\uff08\u53ef\u9009\uff09","text":"<p>\u4ee5\u4e0b\u4fbf\u5229\u65b9\u6cd5\u5c01\u88c5 <code>resources/read</code>\uff0c\u7b80\u5316 Agent \u5bf9 DPE \u6587\u6863\u7684\u9010\u5c42\u5bfc\u822a\u3002\u8fd9\u4e9b\u662f SDK \u4fbf\u5229\u5c01\u88c5\uff0c\u975e\u534f\u8bae\u5fc5\u987b\u3002</p> PythonRust <pre><code># agent/client.py \u2014 \u53ef\u9009\u4fbf\u5229\u65b9\u6cd5\n\nasync def read_document_metadata(\n    self, computer: str, uri: str\n) -&gt; dict:\n    \"\"\"Level 1: \u8bfb\u53d6\u6587\u6863\u5143\u6570\u636e\"\"\"\n    return await self.read_resource(computer=computer, uri=uri)\n\nasync def read_document_pages(\n    self, computer: str, uri: str, offset: int = 0, limit: int = 20\n) -&gt; dict:\n    \"\"\"Level 1 + depth=pages: \u8bfb\u53d6\u6587\u6863\u5143\u6570\u636e\u548c\u9875\u9762\u7d22\u5f15\"\"\"\n    paged_uri = f\"{uri}?depth=pages&amp;offset={offset}&amp;limit={limit}\"\n    return await self.read_resource(computer=computer, uri=paged_uri)\n\nasync def read_page(\n    self, computer: str, uri: str, page_index: int, format: str = \"json\"\n) -&gt; dict:\n    \"\"\"Level 2: \u8bfb\u53d6\u6307\u5b9a\u9875\u9762\u5185\u5bb9\"\"\"\n    page_uri = f\"{uri}/pages/{page_index}?format={format}\"\n    return await self.read_resource(computer=computer, uri=page_uri)\n\nasync def read_element(\n    self, computer: str, uri: str, element_id: str\n) -&gt; dict:\n    \"\"\"Level 3: \u8bfb\u53d6\u6307\u5b9a\u5143\u7d20\u8be6\u60c5\"\"\"\n    elem_uri = f\"{uri}/elements/{element_id}\"\n    return await self.read_resource(computer=computer, uri=elem_uri)\n</code></pre> <pre><code>// src/agent/client.rs \u2014 \u53ef\u9009\u4fbf\u5229\u65b9\u6cd5\n\n/// Level 1: \u8bfb\u53d6\u6587\u6863\u5143\u6570\u636e\npub async fn read_document_metadata(\n    &amp;self, computer: &amp;str, uri: &amp;str,\n) -&gt; Result&lt;serde_json::Value&gt; {\n    self.read_resource(computer, uri).await\n}\n\n/// Level 1 + depth=pages: \u8bfb\u53d6\u6587\u6863\u5143\u6570\u636e\u548c\u9875\u9762\u7d22\u5f15\npub async fn read_document_pages(\n    &amp;self, computer: &amp;str, uri: &amp;str, offset: i64, limit: i64,\n) -&gt; Result&lt;serde_json::Value&gt; {\n    let paged_uri = format!(\"{uri}?depth=pages&amp;offset={offset}&amp;limit={limit}\");\n    self.read_resource(computer, &amp;paged_uri).await\n}\n\n/// Level 2: \u8bfb\u53d6\u6307\u5b9a\u9875\u9762\u5185\u5bb9\npub async fn read_page(\n    &amp;self, computer: &amp;str, uri: &amp;str, page_index: i64, format: &amp;str,\n) -&gt; Result&lt;serde_json::Value&gt; {\n    let page_uri = format!(\"{uri}/pages/{page_index}?format={format}\");\n    self.read_resource(computer, &amp;page_uri).await\n}\n\n/// Level 3: \u8bfb\u53d6\u6307\u5b9a\u5143\u7d20\u8be6\u60c5\npub async fn read_element(\n    &amp;self, computer: &amp;str, uri: &amp;str, element_id: &amp;str,\n) -&gt; Result&lt;serde_json::Value&gt; {\n    let elem_uri = format!(\"{uri}/elements/{element_id}\");\n    self.read_resource(computer, &amp;elem_uri).await\n}\n</code></pre>"},{"location":"guides/finder-sdk-guide/#\u9519\u8bef\u5904\u7406","title":"\u9519\u8bef\u5904\u7406","text":""},{"location":"guides/finder-sdk-guide/#\u9519\u8bef\u7801\u8be6\u89e3","title":"\u9519\u8bef\u7801\u8be6\u89e3","text":"\u4ee3\u7801 \u540d\u79f0 \u89e6\u53d1\u573a\u666f \u4ea7\u751f\u89d2\u8272 \u4f20\u64ad\u8def\u5f84 4201 Document Not Found <code>resources/read</code> \u65f6 <code>doc_ref</code> \u4e0d\u5b58\u5728 MCP Server MCP Server \u2192 Computer \u2192 Server \u2192 Agent 4202 Page Out of Range <code>resources/read</code> \u65f6 <code>page_index &gt;= page_count</code> MCP Server MCP Server \u2192 Computer \u2192 Server \u2192 Agent 4203 Element Not Found <code>resources/read</code> \u65f6 <code>element_id</code> \u4e0d\u5b58\u5728 MCP Server MCP Server \u2192 Computer \u2192 Server \u2192 Agent 4204 Invalid DPE URI URI \u683c\u5f0f\u9519\u8bef\u6216\u6821\u9a8c\u89c4\u5219\u4e0d\u901a\u8fc7 Computer Computer \u2192 Server \u2192 Agent"},{"location":"guides/finder-sdk-guide/#\u9519\u8bef\u6784\u9020\u793a\u4f8b","title":"\u9519\u8bef\u6784\u9020\u793a\u4f8b","text":"PythonRust <pre><code># \u9519\u8bef\u54cd\u5e94\u6784\u9020\ndef make_finder_error(code: int, message: str, details: dict | None = None) -&gt; dict:\n    error = {\"error\": {\"code\": code, \"message\": message}}\n    if details:\n        error[\"error\"][\"details\"] = details\n    return error\n\n# \u4f7f\u7528\u793a\u4f8b\nmake_finder_error(4201, \"Document not found\", {\"doc_ref\": \"nonexistent\"})\nmake_finder_error(4202, \"Page out of range\", {\"page_index\": 99, \"page_count\": 12})\nmake_finder_error(4203, \"Element not found\", {\"element_id\": \"bad-id\"})\nmake_finder_error(4204, \"Invalid DPE URI\", {\"uri\": \"invalid://...\"})\n</code></pre> <pre><code>// \u9519\u8bef\u679a\u4e3e\n#[derive(Debug, thiserror::Error)]\npub enum FinderError {\n    #[error(\"Document not found: {doc_ref}\")]\n    DocumentNotFound { doc_ref: String },\n\n    #[error(\"Page {page_index} out of range (page_count: {page_count})\")]\n    PageOutOfRange { page_index: i64, page_count: i64 },\n\n    #[error(\"Element not found: {element_id}\")]\n    ElementNotFound { element_id: String },\n\n    #[error(\"Invalid DPE URI: {uri}\")]\n    InvalidDPEUri { uri: String },\n}\n\nimpl FinderError {\n    pub fn code(&amp;self) -&gt; i32 {\n        match self {\n            Self::DocumentNotFound { .. } =&gt; 4201,\n            Self::PageOutOfRange { .. } =&gt; 4202,\n            Self::ElementNotFound { .. } =&gt; 4203,\n            Self::InvalidDPEUri { .. } =&gt; 4204,\n        }\n    }\n}\n</code></pre>"},{"location":"guides/finder-sdk-guide/#\u4f20\u64ad\u94fe","title":"\u4f20\u64ad\u94fe","text":"<pre><code>MCP Server                Computer              Server              Agent\n    \u2502                         \u2502                    \u2502                   \u2502\n    \u2502  4201/4202/4203         \u2502                    \u2502                   \u2502\n    \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                    \u2502                   \u2502\n    \u2502  (resources/read \u5931\u8d25)  \u2502  \u5305\u88c5\u4e3a\u6807\u51c6\u9519\u8bef\u54cd\u5e94  \u2502                   \u2502\n    \u2502                         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                   \u2502\n    \u2502                         \u2502                    \u2502  \u900f\u4f20\u9519\u8bef\u54cd\u5e94       \u2502\n    \u2502                         \u2502                    \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502\n    \u2502                         \u2502                    \u2502                   \u2502\n    \u2502                         \u2502  4204              \u2502                   \u2502\n    \u2502                         \u2502  (URI \u89e3\u6790\u5931\u8d25)     \u2502                   \u2502\n    \u2502                         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                   \u2502\n    \u2502                         \u2502                    \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502\n</code></pre> <p>\u6bcf\u4e00\u5c42\u5e94\uff1a</p> <ol> <li>\u8bb0\u5f55\u9519\u8bef\u65e5\u5fd7\uff08\u542b <code>req_id</code> \u4fbf\u4e8e\u8ffd\u8e2a\uff09</li> <li>\u5411\u4e0a\u4f20\u64ad\u9519\u8bef\uff08\u4e0d\u4e22\u5931\u539f\u59cb\u9519\u8bef\u7ec6\u8282\uff09</li> <li>\u4e0d\u66b4\u9732\u654f\u611f\u4fe1\u606f\uff08\u5982\u5185\u90e8 IP\u3001\u51ed\u8bc1\uff09</li> </ol>"},{"location":"guides/finder-sdk-guide/#\u6d4b\u8bd5\u7b56\u7565","title":"\u6d4b\u8bd5\u7b56\u7565","text":""},{"location":"guides/finder-sdk-guide/#\u5355\u5143\u6d4b\u8bd5","title":"\u5355\u5143\u6d4b\u8bd5","text":""},{"location":"guides/finder-sdk-guide/#dpe-uri-\u89e3\u6790\u5668_1","title":"DPE URI \u89e3\u6790\u5668","text":"<ul> <li>8 \u6761\u6821\u9a8c\u89c4\u5219\u8986\u76d6\uff08\u6bcf\u6761\u89c4\u5219\u81f3\u5c11\u4e00\u4e2a\u6b63\u4f8b + \u4e00\u4e2a\u53cd\u4f8b\uff09</li> <li>\u56db\u7ea7 URI \u89e3\u6790\uff08Level 0 ~ Level 3\uff09</li> <li>\u67e5\u8be2\u53c2\u6570\u7ec4\u5408\uff08format / depth / offset / limit / categories\uff09</li> <li>\u8fb9\u754c\u60c5\u51b5\uff1a\u7a7a\u5b57\u7b26\u4e32\u3001\u4ec5 scheme\u3001\u7279\u6b8a\u5b57\u7b26\u7f16\u7801</li> </ul>"},{"location":"guides/finder-sdk-guide/#finder-organizer","title":"Finder Organizer","text":"<ul> <li>\u7a7a\u8f93\u5165 \u2192 \u8fd4\u56de\u7a7a\u5217\u8868 + <code>total_count = 0</code></li> <li>\u5173\u952e\u8bcd\u5339\u914d \u2192 \u5206\u522b\u5339\u914d <code>title</code>\u3001<code>keywords</code>\u3001<code>summary</code></li> <li>\u6587\u4ef6\u7c7b\u578b\u8fc7\u6ee4 \u2192 \u7cbe\u786e\u5339\u914d\u3001\u4e0d\u5339\u914d\u65f6\u8fd4\u56de\u7a7a</li> <li>Server \u4f18\u5148\u7ea7 \u2192 \u6700\u8fd1\u4f7f\u7528\u7684 Server \u6392\u5728\u524d\u9762</li> <li><code>last_modified</code> \u6392\u5e8f \u2192 \u964d\u5e8f\u3001\u7f3a\u5931\u503c\u6392\u672b\u5c3e</li> <li>\u5206\u9875\u8fb9\u754c \u2192 <code>offset</code> \u8d85\u51fa\u8303\u56f4\u3001<code>limit = 0</code>\u3001<code>limit &gt; total</code></li> <li><code>total_count</code> \u2192 \u53cd\u6620\u8fc7\u6ee4\u540e\u7684\u603b\u6570\uff0c\u800c\u975e\u5206\u9875\u540e\u7684\u6570\u91cf</li> </ul>"},{"location":"guides/finder-sdk-guide/#\u53d8\u66f4\u68c0\u6d4b_1","title":"\u53d8\u66f4\u68c0\u6d4b","text":"<ul> <li>URI \u96c6\u5408\u76f8\u540c \u2192 \u4e0d\u89e6\u53d1\u66f4\u65b0</li> <li>URI \u96c6\u5408\u4e0d\u540c\uff08\u65b0\u589e/\u5220\u9664\uff09 \u2192 \u89e6\u53d1\u66f4\u65b0</li> <li><code>dpe://</code> vs \u975e <code>dpe://</code> URI \u2192 \u4ec5\u5173\u6ce8 <code>dpe://</code></li> </ul>"},{"location":"guides/finder-sdk-guide/#\u96c6\u6210\u6d4b\u8bd5","title":"\u96c6\u6210\u6d4b\u8bd5","text":""},{"location":"guides/finder-sdk-guide/#\u5b8c\u6574-finder-\u6d41\u7a0b","title":"\u5b8c\u6574 Finder \u6d41\u7a0b","text":"<pre><code>Mock MCP Server \u2192 Computer \u805a\u5408 \u2192 Server \u8def\u7531 \u2192 Agent \u63a5\u6536\n</code></pre> <ul> <li>Agent \u53d1\u9001 <code>client:get_finder</code> \u2192 \u6536\u5230\u6b63\u786e\u7684 <code>GetFinderRet</code></li> <li>\u5e26 <code>keywords</code> / <code>file_type</code> / <code>offset</code> / <code>limit</code> \u53c2\u6570\u7684\u8fc7\u6ee4\u8bf7\u6c42</li> </ul>"},{"location":"guides/finder-sdk-guide/#\u66f4\u65b0\u901a\u77e5\u94fe","title":"\u66f4\u65b0\u901a\u77e5\u94fe","text":"<pre><code>MCP \u901a\u77e5 \u2192 Computer \u68c0\u6d4b \u2192 Server \u5e7f\u64ad \u2192 Agent \u5237\u65b0\n</code></pre> <ul> <li><code>ResourceListChangedNotification</code> \u2192 Computer \u68c0\u6d4b \u2192 <code>server:update_finder</code> \u2192 Agent \u6536\u5230 <code>notify:update_finder</code></li> <li><code>ResourceUpdatedNotification</code>\uff08<code>dpe://</code> URI\uff09 \u2192 \u540c\u4e0a</li> </ul>"},{"location":"guides/finder-sdk-guide/#\u6e10\u8fdb\u5f0f\u5bfc\u822a","title":"\u6e10\u8fdb\u5f0f\u5bfc\u822a","text":"<ul> <li>Level 0 \u2192 Level 1 \u2192 Level 2 \u2192 Level 3 \u9010\u7ea7\u8bfb\u53d6</li> <li>\u5e26\u67e5\u8be2\u53c2\u6570\u7684\u8bfb\u53d6\uff08<code>depth=pages</code>\u3001<code>format=markdown</code>\u3001<code>categories=table</code>\uff09</li> </ul>"},{"location":"guides/finder-sdk-guide/#\u9519\u8bef\u4f20\u64ad","title":"\u9519\u8bef\u4f20\u64ad","text":"<ul> <li>\u65e0\u6548 <code>doc_ref</code> \u2192 4201 \u9519\u8bef\u6b63\u786e\u4f20\u9012\u5230 Agent</li> <li>\u65e0\u6548 URI \u2192 4204 \u9519\u8bef\u7531 Computer \u4ea7\u751f</li> <li>\u9875\u7801\u8d85\u8303\u56f4 \u2192 4202 \u9519\u8bef</li> </ul>"},{"location":"guides/finder-sdk-guide/#desktop-\u5bf9\u7167","title":"Desktop \u5bf9\u7167","text":"<p>\u6d4b\u8bd5\u6587\u4ef6\u7ed3\u6784\u5e94\u4e0e Desktop \u6d4b\u8bd5\u955c\u50cf\uff0c\u4fbf\u4e8e\u7ef4\u62a4\u548c\u5bf9\u6bd4\uff1a</p> Desktop \u6d4b\u8bd5 Finder \u6d4b\u8bd5 <code>test_window_uri.py</code> <code>test_dpe_uri.py</code> <code>test_organize_desktop.py</code> <code>test_organize_finder.py</code> <code>test_desktop_update.py</code> <code>test_finder_update.py</code> <code>test_desktop_e2e.py</code> <code>test_finder_e2e.py</code>"},{"location":"guides/finder-sdk-guide/#\u5b9e\u73b0\u6e05\u5355","title":"\u5b9e\u73b0\u6e05\u5355","text":""},{"location":"guides/finder-sdk-guide/#server","title":"Server","text":"<ul> <li> \u6ce8\u518c <code>client:get_finder</code> \u4e8b\u4ef6\u5904\u7406\u5668 \u2014 \u8def\u7531\u8f6c\u53d1\uff08\u5c0f\uff09</li> <li> \u6ce8\u518c <code>server:update_finder</code> \u4e8b\u4ef6\u5904\u7406\u5668 \u2014 \u5e7f\u64ad\u901a\u77e5\uff08\u5c0f\uff09</li> <li> \u540c\u6b65\u7248\u672c \u2014 <code>sync_namespace.py</code> \u5bf9\u5e94\u5904\u7406\u5668\uff08\u5c0f\uff09</li> </ul>"},{"location":"guides/finder-sdk-guide/#computer","title":"Computer","text":"<ul> <li> DPE URI \u89e3\u6790\u5668 \u2014 <code>utils/dpe_uri.py</code>\uff0c\u542b 8 \u6761\u6821\u9a8c\u89c4\u5219\uff08\u4e2d\uff09</li> <li> Finder Organizer \u2014 <code>finder/organize.py</code>\uff0c\u542b\u8fc7\u6ee4 + \u6392\u5e8f + \u5206\u9875\uff08\u4e2d\uff09</li> <li> MCP \u8d44\u6e90\u805a\u5408\u5668 \u2014 <code>finder/aggregator.py</code>\uff0c\u679a\u4e3e + \u6536\u96c6 + \u7f13\u5b58\uff08\u4e2d\uff09</li> <li> \u53d8\u66f4\u68c0\u6d4b \u2014 <code>ResourceListChanged</code> + <code>ResourceUpdated</code> \u5904\u7406\uff08\u4e2d\uff09</li> <li> <code>client:get_finder</code> \u4e8b\u4ef6\u5904\u7406\u5668 \u2014 \u6536\u96c6 \u2192 \u7ec4\u7ec7 \u2192 \u8fd4\u56de\uff08\u5c0f\uff09</li> <li> <code>resources/read</code> \u6865\u63a5 \u2014 URI \u89e3\u6790 \u2192 \u8def\u7531\u5230\u6b63\u786e\u7684 MCP Server\uff08\u5c0f\uff09</li> <li> DPE URI \u89e3\u6790\u5668\u5355\u5143\u6d4b\u8bd5\uff08\u4e2d\uff09</li> <li> Finder Organizer \u5355\u5143\u6d4b\u8bd5\uff08\u4e2d\uff09</li> <li> \u53d8\u66f4\u68c0\u6d4b\u5355\u5143\u6d4b\u8bd5\uff08\u5c0f\uff09</li> </ul>"},{"location":"guides/finder-sdk-guide/#agent","title":"Agent","text":"<ul> <li> <code>get_finder()</code> \u65b9\u6cd5 \u2014 \u6784\u9020\u8bf7\u6c42 + emit + \u8fd4\u56de\uff08\u5c0f\uff09</li> <li> \u540c\u6b65\u7248\u672c \u2014 <code>sync_client.py</code> \u5bf9\u5e94\u65b9\u6cd5\uff08\u5c0f\uff09</li> <li> <code>notify:update_finder</code> \u901a\u77e5\u5904\u7406\u5668\uff08\u5c0f\uff09</li> <li> \u6e10\u8fdb\u5f0f\u5bfc\u822a\u8f85\u52a9\u65b9\u6cd5\uff08\u53ef\u9009\uff09 \u2014 4 \u4e2a\u4fbf\u5229\u65b9\u6cd5\uff08\u4e2d\uff09</li> <li> \u7c7b\u578b\u5b9a\u4e49 \u2014 <code>agent/types.py</code> \u4e2d\u6dfb\u52a0 Finder \u76f8\u5173\u7c7b\u578b\uff08\u5c0f\uff09</li> <li> \u96c6\u6210\u6d4b\u8bd5 \u2014 \u5b8c\u6574 Finder \u6d41\u7a0b + \u66f4\u65b0\u901a\u77e5\u94fe\uff08\u5927\uff09</li> </ul>"},{"location":"specification/","title":"A2C-SMCP \u534f\u8bae\u6982\u8ff0","text":"<p>\u7248\u672c: 0.2.0 \u72b6\u6001: Release Candidate \u6700\u540e\u66f4\u65b0: 2026-01</p>"},{"location":"specification/#\u4ec0\u4e48\u662f-a2c-smcp","title":"\u4ec0\u4e48\u662f A2C-SMCP","text":"<p>A2C-SMCP\uff08Agent To Computer SMCP\uff09\u662f\u4e00\u79cd\u8fdc\u7a0b\u5de5\u5177\u8c03\u7528\u534f\u8bae\uff0c\u5b9a\u4e49\u4e86 Agent \u4e0e\u627f\u8f7d\u591a\u8def MCP Server \u7684 Computer \u4e4b\u95f4\u7684\u901a\u4fe1\u673a\u5236\u3002\u8be5\u534f\u8bae\u8fd0\u884c\u5728 Socket.IO \u4e4b\u4e0a\uff0c\u901a\u8fc7\u4e8b\u4ef6\u9a71\u52a8\u7684\u65b9\u5f0f\u7ec4\u7ec7\u6d88\u606f\uff0c\u5e76\u901a\u8fc7\u623f\u95f4\uff08Room/Office\uff09\u673a\u5236\u5b9e\u73b0\u5b89\u5168\u9694\u79bb\u3002</p>"},{"location":"specification/#\u8bbe\u8ba1\u76ee\u6807","title":"\u8bbe\u8ba1\u76ee\u6807","text":"<p>A2C-SMCP \u65e8\u5728\u89e3\u51b3\u4f20\u7edf MCP \u534f\u8bae\u5728\u590d\u6742 Agent \u7cfb\u7edf\u4e2d\u7684\u4ee5\u4e0b\u5173\u952e\u95ee\u9898\uff1a</p>"},{"location":"specification/#1-\u591a-mcp-\u670d\u52a1\u7ba1\u7406\u95ee\u9898","title":"1. \u591a MCP \u670d\u52a1\u7ba1\u7406\u95ee\u9898","text":"<p>\u5728\u4f01\u4e1a\u7ea7 AI \u5e94\u7528\u4e2d\uff0c\u4e00\u4e2a Agent \u901a\u5e38\u9700\u8981\u534f\u8c03\u591a\u4e2a MCP \u670d\u52a1\uff1a</p> <pre><code>\u4f20\u7edf\u67b6\u6784\uff08\u75db\u70b9\uff09\uff1a\nAgent \u2500\u252c\u2500\u2192 Excel MCP\n       \u251c\u2500\u2192 \u5408\u540c\u751f\u6210 MCP\n       \u251c\u2500\u2192 ERP \u63a5\u53e3 MCP\n       \u2514\u2500\u2192 \u722c\u866b\u5de5\u5177 MCP\n\n\u95ee\u9898\uff1a\n\u2022 Agent \u9700\u5355\u72ec\u7ef4\u62a4\u6bcf\u4e2a MCP \u7684\u751f\u547d\u5468\u671f\n\u2022 \u4efb\u4e00 MCP \u5d29\u6e83\u5bfc\u81f4\u6574\u4f53\u6d41\u7a0b\u5931\u8d25\n\u2022 \u7a7a\u95f2 MCP \u6301\u7eed\u5360\u7528\u7cfb\u7edf\u8d44\u6e90\n</code></pre> <p>A2C-SMCP \u901a\u8fc7\u5f15\u5165 Computer \u62bd\u8c61\u5c42\u89e3\u51b3\u6b64\u95ee\u9898\uff1a</p> <pre><code>SMCP \u67b6\u6784\uff08\u89e3\u51b3\u65b9\u6848\uff09\uff1a\nAgent \u2500\u2500\u2192 Computer \u2500\u252c\u2500\u2192 Excel MCP\n                    \u251c\u2500\u2192 \u5408\u540c\u751f\u6210 MCP\n                    \u251c\u2500\u2192 ERP \u63a5\u53e3 MCP\n                    \u2514\u2500\u2192 \u722c\u866b\u5de5\u5177 MCP\n\n\u4f18\u52bf\uff1a\n\u2022 \u6545\u969c\u9694\u79bb\uff1a\u5355\u4e2a MCP \u5d29\u6e83\u4e0d\u5f71\u54cd Computer \u6574\u4f53\n\u2022 \u70ed\u63d2\u62d4\uff1a\u52a8\u6001\u589e\u5220\u5de5\u5177\u65e0\u9700\u91cd\u542f Agent\n\u2022 \u7edf\u4e00\u76d1\u62a4\uff1aComputer \u5185\u90e8\u5b9e\u65bd\u670d\u52a1\u5065\u5eb7\u76d1\u6d4b\n</code></pre>"},{"location":"specification/#2-\u5de5\u5177\u6743\u9650\u4e0e\u5b89\u5168\u6311\u6218","title":"2. \u5de5\u5177\u6743\u9650\u4e0e\u5b89\u5168\u6311\u6218","text":"\u5b89\u5168\u95ee\u9898 \u4f20\u7edf MCP \u7f3a\u9677 SMCP \u89e3\u51b3\u65b9\u6848 \u786c\u7f16\u7801 Token Token \u6cc4\u9732\u98ce\u9669 \u96f6\u51ed\u8bc1\u4f20\u64ad\uff1a\u654f\u611f Token \u4ec5\u5b58\u5728\u672c\u5730 Computer \u516c\u7f51\u66b4\u9732\u7aef\u53e3 \u88ab\u653b\u51fb\u98ce\u9669 \u65e0\u516c\u7f51\u66b4\u9732\uff1aComputer \u901a\u8fc7\u957f\u8fde\u63a5\u4e3b\u52a8\u5bf9\u63a5 \u8bc1\u4e66\u51b2\u7a81 \u7248\u6743\u5ba1\u8ba1\u95ee\u9898 \u8bbe\u5907\u7ed1\u5b9a\uff1a\u8bb8\u53ef\u8bc1\u4e0e\u7279\u5b9a Computer \u786c\u4ef6\u7ed1\u5b9a"},{"location":"specification/#3-\u7f51\u7edc\u8fde\u63a5\u4e0e\u7a7f\u900f","title":"3. \u7f51\u7edc\u8fde\u63a5\u4e0e\u7a7f\u900f","text":"<ul> <li>\u901a\u8fc7 Socket.IO \u957f\u8fde\u63a5\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f</li> <li>\u65e0\u9700\u516c\u7f51 IP \u6216\u7aef\u53e3\u6620\u5c04</li> <li>\u652f\u6301 NAT\u3001\u9632\u706b\u5899\u3001\u4ee3\u7406\u7b49\u590d\u6742\u7f51\u7edc\u73af\u5883</li> </ul>"},{"location":"specification/#\u6838\u5fc3\u6982\u5ff5","title":"\u6838\u5fc3\u6982\u5ff5","text":""},{"location":"specification/#\u4e09\u89d2\u8272\u6a21\u578b","title":"\u4e09\u89d2\u8272\u6a21\u578b","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Agent  \u2502 \u2190\u2500\u2500\u2500\u2500\u2500\u2192 \u2502  Server \u2502 \u2190\u2500\u2500\u2500\u2500\u2500\u2192 \u2502Computer \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n   \u2502                     \u2502                   \u2502\n   \u2502  \u5de5\u5177\u8c03\u7528\u53d1\u8d77\u65b9     \u2502  \u4fe1\u4ee4\u670d\u52a1\u5668        \u2502  MCP \u670d\u52a1\u7ba1\u7406\u8005\n   \u2502                     \u2502  \u8fde\u63a5\u7ba1\u7406          \u2502  \u5de5\u5177\u6267\u884c\u8005\n   \u2502                     \u2502  \u6d88\u606f\u8def\u7531          \u2502\n   \u2502                     \u2502  \u901a\u77e5\u5e7f\u64ad          \u2502\n</code></pre> \u89d2\u8272 \u6570\u91cf\u7ea6\u675f \u804c\u8d23 Agent \u6bcf\u4e2a\u623f\u95f4\u6700\u591a 1 \u4e2a \u5de5\u5177\u8c03\u7528\u53d1\u8d77\u65b9\uff0c\u901a\u5e38\u4e3a\u667a\u80fd\u4f53\u3001\u673a\u5668\u4eba Server \u5168\u5c40 1 \u4e2a\uff08\u903b\u8f91\uff09 \u4fe1\u4ee4\u4e2d\u67a2\uff0c\u7ba1\u7406\u8fde\u63a5\u3001\u623f\u95f4\u3001\u8def\u7531\u4e0e\u5e7f\u64ad Computer \u6bcf\u4e2a\u623f\u95f4\u53ef\u591a\u4e2a MCP Server \u5bbf\u4e3b\uff0c\u7edf\u4e00\u7ba1\u7406\u548c\u66b4\u9732\u5de5\u5177"},{"location":"specification/#\u623f\u95f4\u9694\u79bb\u6a21\u578b","title":"\u623f\u95f4\u9694\u79bb\u6a21\u578b","text":"<p>\u623f\u95f4\uff08Office\uff09\u662f\u903b\u8f91\u9694\u79bb\u5355\u5143\uff0c\u7528\u4e8e\u7ea6\u675f Agent \u4e0e Computer \u7684\u534f\u4f5c\u8303\u56f4\uff1a</p> <ul> <li>\u6bcf\u4e2a\u623f\u95f4\u901a\u8fc7 <code>office_id</code> \u552f\u4e00\u6807\u8bc6</li> <li>\u4e00\u4e2a\u623f\u95f4\u5185\u81f3\u591a\u5305\u542b 1 \u4e2a Agent \u548c \u591a\u4e2a Computer</li> <li>\u8de8\u623f\u95f4\u8bbf\u95ee\u88ab\u4e25\u683c\u7981\u6b62</li> </ul>"},{"location":"specification/#\u4e8b\u4ef6\u5206\u7c7b","title":"\u4e8b\u4ef6\u5206\u7c7b","text":"<p>\u6240\u6709\u534f\u8bae\u4e8b\u4ef6\u901a\u8fc7 Socket.IO \u547d\u540d\u7a7a\u95f4 <code>/smcp</code> \u4f20\u8f93\uff0c\u91c7\u7528\u524d\u7f00\u7ea6\u5b9a\uff1a</p> \u524d\u7f00 \u65b9\u5411 \u8bf4\u660e <code>client:</code> Agent \u2192 Computer \u5de5\u5177\u64cd\u4f5c\u7c7b\u4e8b\u4ef6\uff0c\u7531 Server \u8def\u7531\u8f6c\u53d1 <code>server:</code> \u5ba2\u6237\u7aef \u2192 Server \u623f\u95f4\u7ba1\u7406\u3001\u914d\u7f6e\u66f4\u65b0\u7c7b\u4e8b\u4ef6 <code>notify:</code> Server \u2192 \u5e7f\u64ad \u72b6\u6001\u53d8\u66f4\u901a\u77e5\uff0c\u5e7f\u64ad\u7ed9\u623f\u95f4\u5185\u6210\u5458"},{"location":"specification/#\u534f\u8bae\u4f18\u52bf\u603b\u7ed3","title":"\u534f\u8bae\u4f18\u52bf\u603b\u7ed3","text":"<ol> <li>\u5de5\u5177\u70ed\u7ba1\u7406: \u52a8\u6001\u53d1\u73b0/\u6ce8\u518c\u5de5\u5177\uff0c\u914d\u7f6e\u70ed\u66f4\u65b0</li> <li>\u5b89\u5168\u9694\u79bb: \u57fa\u4e8e\u623f\u95f4\u7684\u6743\u9650\u8fb9\u754c\uff0cAgent-Computer \u7ed1\u5b9a</li> <li>\u7f51\u7edc\u7a7f\u900f: Socket.IO \u957f\u8fde\u63a5\uff0c\u514d\u9664\u516c\u7f51 IP \u4f9d\u8d56</li> <li>\u5f39\u6027\u67b6\u6784: \u591a Computer \u652f\u6301\uff0c\u5206\u5e03\u5f0f\u5de5\u5177\u90e8\u7f72</li> <li>\u6807\u51c6\u5316\u63a5\u53e3: \u5f3a\u7c7b\u578b\u6570\u636e\u7ed3\u6784\uff0c\u660e\u786e\u7684\u4e8b\u4ef6\u8fb9\u754c</li> </ol>"},{"location":"specification/#\u6587\u6863\u7ed3\u6784","title":"\u6587\u6863\u7ed3\u6784","text":"<ul> <li>\u67b6\u6784\u8bbe\u8ba1 - \u89d2\u8272\u5173\u7cfb\u4e0e\u901a\u4fe1\u6a21\u578b</li> <li>\u4e8b\u4ef6\u5b9a\u4e49 - \u5b8c\u6574\u4e8b\u4ef6\u5217\u8868\u4e0e\u89c4\u8303</li> <li>\u6570\u636e\u7ed3\u6784 - \u8bf7\u6c42/\u54cd\u5e94\u6570\u636e\u7ed3\u6784\u5b9a\u4e49</li> <li>Desktop \u684c\u9762\u7cfb\u7edf - Window URI \u89c4\u8303\u3001\u684c\u9762\u7ec4\u7ec7\u7b56\u7565\u4e0e\u66f4\u65b0\u673a\u5236</li> <li>Finder \u6587\u6863\u7cfb\u7edf - DPE \u6570\u636e\u6a21\u578b\u3001dpe:// URI \u89c4\u8303\u4e0e\u6587\u6863\u5bfc\u822a\u5de5\u5177</li> <li>\u623f\u95f4\u6a21\u578b - \u623f\u95f4\u9694\u79bb\u673a\u5236\u8be6\u89e3</li> <li>\u9519\u8bef\u5904\u7406 - \u9519\u8bef\u7801\u4e0e\u54cd\u5e94\u683c\u5f0f</li> <li>\u5b89\u5168\u8003\u8651 - \u5b89\u5168\u6027\u8981\u6c42\u4e0e\u5efa\u8bae</li> </ul>"},{"location":"specification/#\u4e0e-mcp-\u7684\u5173\u7cfb","title":"\u4e0e MCP \u7684\u5173\u7cfb","text":"<p>A2C-SMCP \u6784\u5efa\u4e8e MCP \u534f\u8bae\u4e4b\u4e0a\uff1a</p> <ul> <li>MCP Server \u5f00\u53d1\u8005: \u65e0\u9700\u4efb\u4f55\u6539\u52a8\uff0c\u73b0\u6709 MCP Server \u53ef\u76f4\u63a5\u88ab Computer \u7ba1\u7406\uff1bMCP Server \u8fd8\u53ef\u901a\u8fc7\u66b4\u9732 <code>window://</code> \u8d44\u6e90\u53c2\u4e0e Desktop \u684c\u9762\u7cfb\u7edf\uff0c\u6216\u901a\u8fc7\u66b4\u9732 <code>dpe://</code> \u8d44\u6e90\u53c2\u4e0e Finder \u6587\u6863\u7cfb\u7edf\uff0c\u540c\u6837\u65e0\u9700\u4efb\u4f55 SMCP \u7279\u5b9a\u6539\u52a8</li> <li>Agent \u5f00\u53d1\u8005: \u4ec5\u9700\u5b9e\u73b0 SMCP \u534f\u8bae\u63a5\u53e3\uff0c\u65e0\u9700\u5173\u5fc3\u5e95\u5c42 MCP \u7ec6\u8282</li> <li>\u5de5\u5177\u8c03\u7528: Agent \u2192 SMCP \u2192 Computer \u2192 MCP \u2192 \u5de5\u5177</li> </ul> <pre><code>Agent \u89c6\u89d2\uff1a\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  A2C-SMCP                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 Agent  \u2502\u2500\u2500\u2500\u2192\u2502 Server \u2502\u2500\u2500\u2500\u2192\u2502  Computer  \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                      \u2502\n                               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                               \u25bc             \u25bc\n                          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                          \u2502MCP Srv1\u2502    \u2502MCP Srv2\u2502\n                          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"specification/#\u4e0b\u4e00\u6b65","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u6df1\u5165\u4e86\u89e3\uff1a\u9605\u8bfb \u67b6\u6784\u8bbe\u8ba1 \u548c \u4e8b\u4ef6\u5b9a\u4e49</li> <li>\u5e38\u89c1\u95ee\u9898\uff1a\u67e5\u770b FAQ</li> </ul>"},{"location":"specification/architecture/","title":"A2C-SMCP \u67b6\u6784\u8bbe\u8ba1","text":"<p>\u672c\u6587\u6863\u63cf\u8ff0 A2C-SMCP \u534f\u8bae\u7684\u67b6\u6784\u8bbe\u8ba1\uff0c\u5305\u62ec\u89d2\u8272\u5173\u7cfb\u3001\u901a\u4fe1\u6a21\u578b\u548c\u6838\u5fc3\u7ec4\u4ef6\u3002</p>"},{"location":"specification/architecture/#\u89d2\u8272\u4e0e\u5173\u7cfb","title":"\u89d2\u8272\u4e0e\u5173\u7cfb","text":""},{"location":"specification/architecture/#\u4e09\u89d2\u8272\u6a21\u578b","title":"\u4e09\u89d2\u8272\u6a21\u578b","text":"<p>A2C-SMCP \u534f\u8bae\u5b9a\u4e49\u4e86\u4e09\u4e2a\u6838\u5fc3\u89d2\u8272\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        A2C-SMCP \u7cfb\u7edf                         \u2502\n\u2502                                                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502          \u2502       \u2502          \u2502       \u2502                  \u2502 \u2502\n\u2502  \u2502  Agent   \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u25ba\u2502  Server  \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u25ba\u2502    Computer      \u2502 \u2502\n\u2502  \u2502          \u2502       \u2502          \u2502       \u2502                  \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502       \u2502                  \u2502                      \u2502           \u2502\n\u2502       \u2502                  \u2502                      \u2502           \u2502\n\u2502  \u5de5\u5177\u8c03\u7528          \u4fe1\u4ee4\u670d\u52a1\u5668              MCP \u670d\u52a1\u7ba1\u7406      \u2502\n\u2502  \u53d1\u8d77\u65b9            \u8fde\u63a5\u7ba1\u7406                \u5de5\u5177\u6267\u884c          \u2502\n\u2502                    \u6d88\u606f\u8def\u7531                                  \u2502\n\u2502                    \u901a\u77e5\u5e7f\u64ad                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"specification/architecture/#\u89d2\u8272\u804c\u8d23","title":"\u89d2\u8272\u804c\u8d23","text":"\u89d2\u8272 \u804c\u8d23 \u6570\u91cf\u7ea6\u675f Agent \u5de5\u5177\u8c03\u7528\u53d1\u8d77\u65b9\uff0c\u901a\u5e38\u4e3a\u667a\u80fd\u4f53\u3001\u673a\u5668\u4eba\u7b49\u4e1a\u52a1\u7cfb\u7edf \u6bcf\u4e2a\u623f\u95f4\u6700\u591a 1 \u4e2a Server \u4fe1\u4ee4\u4e2d\u67a2\uff0c\u8d1f\u8d23\u8fde\u63a5\u7ba1\u7406\u3001\u623f\u95f4\u7ba1\u7406\u3001\u6d88\u606f\u8def\u7531\u548c\u901a\u77e5\u5e7f\u64ad \u5168\u5c40 1 \u4e2a\uff08\u903b\u8f91\uff09 Computer MCP Server \u5bbf\u4e3b\uff0c\u7edf\u4e00\u7ba1\u7406\u591a\u4e2a MCP \u670d\u52a1\u5e76\u5bf9\u5916\u66b4\u9732\u5de5\u5177 \u6bcf\u4e2a\u623f\u95f4\u53ef\u591a\u4e2a"},{"location":"specification/architecture/#\u89d2\u8272\u5173\u7cfb\u7ea6\u675f","title":"\u89d2\u8272\u5173\u7cfb\u7ea6\u675f","text":"<ol> <li>Agent \u72ec\u5360\u6027: \u4e00\u4e2a\u623f\u95f4\u5185\u6700\u591a\u53ea\u80fd\u6709\u4e00\u4e2a Agent</li> <li>Computer \u7ed1\u5b9a\u6027: \u4e00\u4e2a Computer \u5728\u540c\u4e00\u65f6\u523b\u53ea\u80fd\u5c5e\u4e8e\u4e00\u4e2a\u623f\u95f4</li> <li>Server \u4e2d\u5fc3\u6027: \u6240\u6709 Agent \u548c Computer \u4e4b\u95f4\u7684\u901a\u4fe1\u5fc5\u987b\u7ecf\u8fc7 Server</li> </ol>"},{"location":"specification/architecture/#\u901a\u4fe1\u6a21\u578b","title":"\u901a\u4fe1\u6a21\u578b","text":""},{"location":"specification/architecture/#\u4f20\u8f93\u5c42","title":"\u4f20\u8f93\u5c42","text":"<p>A2C-SMCP \u534f\u8bae\u8fd0\u884c\u5728 Socket.IO \u4e4b\u4e0a\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502           A2C-SMCP \u534f\u8bae              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502           Socket.IO                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502      WebSocket / HTTP \u957f\u8f6e\u8be2         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502           TCP/TLS                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"specification/architecture/#\u547d\u540d\u7a7a\u95f4","title":"\u547d\u540d\u7a7a\u95f4","text":"<p>\u6240\u6709\u534f\u8bae\u4e8b\u4ef6\u901a\u8fc7\u7edf\u4e00\u547d\u540d\u7a7a\u95f4\u4f20\u8f93\uff1a</p> <pre><code>SMCP_NAMESPACE = \"/smcp\"\n</code></pre>"},{"location":"specification/architecture/#\u6d88\u606f\u6d41\u5411","title":"\u6d88\u606f\u6d41\u5411","text":"<pre><code>             client:*                     client:*\n    Agent \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192 Server \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192 Computer\n      \u2502                    \u2502                      \u2502\n      \u2502                    \u2502                      \u2502\n      \u2502    notify:*        \u2502       server:*       \u2502\n      \u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n                           \u2502\n                           \u2502 notify:* (\u5e7f\u64ad)\n                           \u25bc\n                    \u623f\u95f4\u5185\u6240\u6709\u6210\u5458\n</code></pre>"},{"location":"specification/architecture/#\u4e8b\u4ef6\u8def\u7531\u673a\u5236","title":"\u4e8b\u4ef6\u8def\u7531\u673a\u5236","text":""},{"location":"specification/architecture/#\u4e8b\u4ef6\u524d\u7f00\u7ea6\u5b9a","title":"\u4e8b\u4ef6\u524d\u7f00\u7ea6\u5b9a","text":"\u524d\u7f00 \u65b9\u5411 \u5904\u7406\u65b9 \u8bf4\u660e <code>client:</code> Agent \u2192 Computer Computer \u7531 Server \u8def\u7531\u5230\u6307\u5b9a Computer <code>server:</code> \u5ba2\u6237\u7aef \u2192 Server Server \u7531 Server \u76f4\u63a5\u5904\u7406 <code>notify:</code> Server \u2192 \u5e7f\u64ad Agent/Computer \u5e7f\u64ad\u5230\u623f\u95f4\u5185\u6240\u6709\u6210\u5458"},{"location":"specification/architecture/#\u8def\u7531\u6d41\u7a0b","title":"\u8def\u7531\u6d41\u7a0b","text":""},{"location":"specification/architecture/#client-\u4e8b\u4ef6\u8def\u7531","title":"Client \u4e8b\u4ef6\u8def\u7531","text":"<pre><code>1. Agent \u53d1\u9001 client:tool_call\uff0c\u6307\u5b9a\u76ee\u6807 computer\n2. Server \u63a5\u6536\u4e8b\u4ef6\n3. Server \u9a8c\u8bc1 Agent \u548c Computer \u5728\u540c\u4e00\u623f\u95f4\n4. Server \u901a\u8fc7 name \u2192 sid \u6620\u5c04\u627e\u5230\u76ee\u6807 Computer\n5. Server \u8f6c\u53d1\u4e8b\u4ef6\u5230 Computer\n6. Computer \u6267\u884c\u5e76\u8fd4\u56de\u7ed3\u679c\n7. Server \u5c06\u7ed3\u679c\u8fd4\u56de\u7ed9 Agent\n</code></pre>"},{"location":"specification/architecture/#server-\u4e8b\u4ef6\u5904\u7406","title":"Server \u4e8b\u4ef6\u5904\u7406","text":"<pre><code>1. \u5ba2\u6237\u7aef\u53d1\u9001 server:join_office\n2. Server \u63a5\u6536\u5e76\u9a8c\u8bc1\u8bf7\u6c42\n3. Server \u6267\u884c\u623f\u95f4\u52a0\u5165\u903b\u8f91\n4. Server \u8fd4\u56de\u5904\u7406\u7ed3\u679c\n5. Server \u5e7f\u64ad notify:enter_office \u5230\u623f\u95f4\n</code></pre>"},{"location":"specification/architecture/#\u6838\u5fc3\u7ec4\u4ef6","title":"\u6838\u5fc3\u7ec4\u4ef6","text":""},{"location":"specification/architecture/#server-\u7aef\u7ec4\u4ef6","title":"Server \u7aef\u7ec4\u4ef6","text":"<pre><code>a2c_smcp/server/\n\u251c\u2500\u2500 auth.py           # \u8ba4\u8bc1\u7cfb\u7edf\uff08AuthenticationProvider\uff09\n\u251c\u2500\u2500 base.py           # \u57fa\u7840\u547d\u540d\u7a7a\u95f4\uff08BaseNamespace\uff09\n\u251c\u2500\u2500 namespace.py      # SMCP \u534f\u8bae\u547d\u540d\u7a7a\u95f4\uff08SMCPNamespace\uff09\n\u251c\u2500\u2500 sync_namespace.py # \u540c\u6b65\u7248\u672c\u547d\u540d\u7a7a\u95f4\n\u251c\u2500\u2500 types.py          # \u7c7b\u578b\u5b9a\u4e49\n\u2514\u2500\u2500 utils.py          # \u5de5\u5177\u51fd\u6570\n</code></pre> <p>\u6838\u5fc3\u7c7b:</p> <ul> <li><code>AuthenticationProvider</code>: \u8ba4\u8bc1\u62bd\u8c61\u57fa\u7c7b</li> <li><code>BaseNamespace</code>: \u57fa\u7840\u547d\u540d\u7a7a\u95f4\uff0c\u63d0\u4f9b\u8fde\u63a5\u7ba1\u7406\u548c name \u6620\u5c04</li> <li><code>SMCPNamespace</code>: SMCP \u534f\u8bae\u5b9e\u73b0\uff0c\u5904\u7406\u6240\u6709\u534f\u8bae\u4e8b\u4ef6</li> </ul>"},{"location":"specification/architecture/#agent-\u7aef\u7ec4\u4ef6","title":"Agent \u7aef\u7ec4\u4ef6","text":"<pre><code>a2c_smcp/agent/\n\u251c\u2500\u2500 auth.py         # Agent \u8ba4\u8bc1\u63d0\u4f9b\u8005\n\u251c\u2500\u2500 base.py         # \u57fa\u7840\u5ba2\u6237\u7aef\u62bd\u8c61\n\u251c\u2500\u2500 client.py       # \u5f02\u6b65\u5ba2\u6237\u7aef\uff08AsyncSMCPAgentClient\uff09\n\u251c\u2500\u2500 sync_client.py  # \u540c\u6b65\u5ba2\u6237\u7aef\uff08SMCPAgentClient\uff09\n\u2514\u2500\u2500 types.py        # \u7c7b\u578b\u5b9a\u4e49\u548c\u4e8b\u4ef6\u5904\u7406\u534f\u8bae\n</code></pre> <p>\u6838\u5fc3\u7c7b:</p> <ul> <li><code>AgentAuthProvider</code>: Agent \u8ba4\u8bc1\u62bd\u8c61\u57fa\u7c7b</li> <li><code>AsyncSMCPAgentClient</code>: \u5f02\u6b65 Agent \u5ba2\u6237\u7aef</li> <li><code>SMCPAgentClient</code>: \u540c\u6b65 Agent \u5ba2\u6237\u7aef</li> </ul>"},{"location":"specification/architecture/#computer-\u7aef\u7ec4\u4ef6","title":"Computer \u7aef\u7ec4\u4ef6","text":"<pre><code>a2c_smcp/computer/\n\u251c\u2500\u2500 computer.py           # Computer \u4e3b\u7c7b\n\u251c\u2500\u2500 base.py               # \u57fa\u7840\u62bd\u8c61\u7c7b\n\u251c\u2500\u2500 socketio/\n\u2502   \u2514\u2500\u2500 client.py         # Socket.IO \u5ba2\u6237\u7aef\uff08SMCPComputerClient\uff09\n\u251c\u2500\u2500 mcp_clients/\n\u2502   \u251c\u2500\u2500 manager.py        # MCP \u670d\u52a1\u5668\u7ba1\u7406\u5668\n\u2502   \u251c\u2500\u2500 base_client.py    # MCP \u5ba2\u6237\u7aef\u57fa\u7c7b\n\u2502   \u251c\u2500\u2500 stdio_client.py   # Stdio \u5ba2\u6237\u7aef\n\u2502   \u251c\u2500\u2500 sse_client.py     # SSE \u5ba2\u6237\u7aef\n\u2502   \u2514\u2500\u2500 http_client.py    # HTTP \u5ba2\u6237\u7aef\n\u251c\u2500\u2500 desktop/\n\u2502   \u2514\u2500\u2500 organize.py       # \u684c\u9762\u7ec4\u7ec7\u903b\u8f91\n\u2514\u2500\u2500 inputs/\n    \u2514\u2500\u2500 resolver.py       # \u8f93\u5165\u89e3\u6790\u5668\n</code></pre> <p>\u6838\u5fc3\u7c7b:</p> <ul> <li><code>Computer</code>: Computer \u4e3b\u7c7b\uff0c\u7ba1\u7406 MCP \u670d\u52a1\u5668\u548c\u5de5\u5177</li> <li><code>SMCPComputerClient</code>: Socket.IO \u5ba2\u6237\u7aef\uff0c\u5904\u7406 SMCP \u534f\u8bae\u901a\u4fe1</li> <li><code>MCPServerManager</code>: MCP \u670d\u52a1\u5668\u751f\u547d\u5468\u671f\u7ba1\u7406</li> </ul>"},{"location":"specification/architecture/#name-\u6620\u5c04\u7cfb\u7edf","title":"Name \u6620\u5c04\u7cfb\u7edf","text":"<p>Server \u901a\u8fc7 name \u6620\u5c04\u7cfb\u7edf\u5b9e\u73b0 Agent/Computer \u7684\u5b9a\u4f4d\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              Server \u5185\u90e8\u72b6\u6001                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                              \u2502\n\u2502  name_to_sid: dict[str, str]                \u2502\n\u2502    \"agent-1\"    \u2192 \"abc123...\"               \u2502\n\u2502    \"computer-1\" \u2192 \"def456...\"               \u2502\n\u2502    \"computer-2\" \u2192 \"ghi789...\"               \u2502\n\u2502                                              \u2502\n\u2502  sessions: dict[str, Session]               \u2502\n\u2502    \"abc123...\" \u2192 {name, role, office_id}    \u2502\n\u2502    \"def456...\" \u2192 {name, role, office_id}    \u2502\n\u2502                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"specification/architecture/#\u6620\u5c04\u751f\u547d\u5468\u671f","title":"\u6620\u5c04\u751f\u547d\u5468\u671f","text":"<ol> <li>\u6ce8\u518c: \u5ba2\u6237\u7aef\u52a0\u5165\u623f\u95f4\u65f6\uff0c\u6ce8\u518c name \u2192 sid \u6620\u5c04</li> <li>\u67e5\u8be2: \u8def\u7531\u4e8b\u4ef6\u65f6\uff0c\u901a\u8fc7 name \u67e5\u627e\u76ee\u6807 sid</li> <li>\u6ce8\u9500: \u5ba2\u6237\u7aef\u65ad\u5f00\u8fde\u63a5\u6216\u79bb\u5f00\u623f\u95f4\u65f6\uff0c\u6e05\u9664\u6620\u5c04</li> </ol>"},{"location":"specification/architecture/#\u623f\u95f4\u6a21\u578b","title":"\u623f\u95f4\u6a21\u578b","text":""},{"location":"specification/architecture/#\u623f\u95f4\u7ed3\u6784","title":"\u623f\u95f4\u7ed3\u6784","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              Office (Room)                   \u2502\n\u2502              office_id: \"room-001\"           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                              \u2502\n\u2502  Agent: agent-1 (sid: abc123)               \u2502\n\u2502                                              \u2502\n\u2502  Computers:                                  \u2502\n\u2502    - computer-1 (sid: def456)               \u2502\n\u2502    - computer-2 (sid: ghi789)               \u2502\n\u2502                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"specification/architecture/#\u9694\u79bb\u4fdd\u969c","title":"\u9694\u79bb\u4fdd\u969c","text":"\u7ea6\u675f \u8bf4\u660e Agent \u72ec\u5360 \u623f\u95f4\u5df2\u6709 Agent \u65f6\uff0c\u62d2\u7edd\u65b0 Agent \u52a0\u5165 Computer \u7ed1\u5b9a Computer \u52a0\u5165\u65b0\u623f\u95f4\u65f6\uff0c\u81ea\u52a8\u79bb\u5f00\u65e7\u623f\u95f4 \u8de8\u623f\u95f4\u7981\u6b62 \u4e0d\u5141\u8bb8\u8bbf\u95ee\u5176\u4ed6\u623f\u95f4\u7684\u8d44\u6e90"},{"location":"specification/architecture/#\u4e0e-mcp-\u7684\u96c6\u6210","title":"\u4e0e MCP \u7684\u96c6\u6210","text":"<p>Computer \u4f5c\u4e3a MCP Server \u7684\u5bbf\u4e3b\uff0c\u5b9e\u73b0\u4e86\u4e0e MCP \u534f\u8bae\u7684\u6865\u63a5\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      Computer                            \u2502\n\u2502                                                          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502              MCPServerManager                    \u2502    \u2502\n\u2502  \u2502                                                  \u2502    \u2502\n\u2502  \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502    \u2502\n\u2502  \u2502   \u2502MCP Client\u2502  \u2502MCP Client\u2502  \u2502MCP Client\u2502     \u2502    \u2502\n\u2502  \u2502   \u2502 (Stdio)  \u2502  \u2502  (SSE)   \u2502  \u2502(Streamable)\u2502   \u2502    \u2502\n\u2502  \u2502   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518     \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502           \u2502             \u2502             \u2502                 \u2502\n\u2502           \u25bc             \u25bc             \u25bc                 \u2502\n\u2502      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\n\u2502      \u2502MCP Srv1\u2502    \u2502MCP Srv2\u2502    \u2502MCP Srv3\u2502            \u2502\n\u2502      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"specification/architecture/#\u5de5\u5177\u805a\u5408","title":"\u5de5\u5177\u805a\u5408","text":"<ol> <li>Computer \u4ece\u591a\u4e2a MCP Server \u6536\u96c6\u5de5\u5177\u5b9a\u4e49</li> <li>\u7edf\u4e00\u8f6c\u6362\u4e3a <code>SMCPTool</code> \u683c\u5f0f</li> <li>\u901a\u8fc7\u522b\u540d\u673a\u5236\u89e3\u51b3\u5de5\u5177\u540d\u51b2\u7a81</li> <li>\u5bf9\u5916\u66b4\u9732\u7edf\u4e00\u7684\u5de5\u5177\u89c6\u56fe</li> </ol>"},{"location":"specification/architecture/#desktop-\u684c\u9762\u7cfb\u7edf","title":"Desktop \u684c\u9762\u7cfb\u7edf","text":"<p>Computer \u5c06\u591a\u4e2a MCP Server \u66b4\u9732\u7684 <code>window://</code> \u8d44\u6e90\u805a\u5408\u4e3a\u7edf\u4e00\u7684\u684c\u9762\u89c6\u56fe\uff0c\u4e3a Agent \u63d0\u4f9b\u5de5\u5177\u8c03\u7528\u4e4b\u5916\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002</p> <pre><code>MCP Server A \u2500\u2500\u2510\n  window://a/.. \u2502    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n               \u251c\u2500\u2500\u2500\u2192\u2502    Computer      \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192\u2502  Agent   \u2502\nMCP Server B \u2500\u2500\u2524    \u2502 Desktop Organizer\u2502         \u2502          \u2502\n  window://b/.. \u2502    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502         \u8fc7\u6ee4/\u6392\u5e8f/\u622a\u65ad\nMCP Server C \u2500\u2500\u2518\n  (\u65e0\u7a97\u53e3\u8d44\u6e90)\n</code></pre> <p>MCP \u64cd\u4f5c\u5230 Desktop \u7684\u6620\u5c04:</p> MCP \u64cd\u4f5c Desktop \u7528\u9014 <code>resources/list</code> \u679a\u4e3e\u5e76\u7b5b\u9009 <code>window://</code> \u8d44\u6e90 <code>resources/read</code> \u8bfb\u53d6\u7a97\u53e3\u7684\u6587\u672c\u5185\u5bb9 <code>resources.subscribe</code> \u80fd\u529b \u524d\u63d0\u6761\u4ef6\uff0cComputer \u636e\u6b64\u51b3\u5b9a\u662f\u5426\u679a\u4e3e\u8be5 Server \u7684\u7a97\u53e3 <code>ResourceListChangedNotification</code> \u89e6\u53d1\u7a97\u53e3\u96c6\u5408\u53d8\u5316\u68c0\u6d4b <code>ResourceUpdatedNotification</code> \u89e6\u53d1\u7a97\u53e3\u5185\u5bb9\u53d8\u5316\u5237\u65b0 <p>\u6838\u5fc3\u7ec4\u4ef6:</p> <ul> <li><code>desktop/organize.py</code> \u2014 \u684c\u9762\u7ec4\u7ec7\u7b56\u7565\uff08\u8fc7\u6ee4\u3001\u6392\u5e8f\u3001\u5168\u5c4f\u5904\u7406\u3001\u622a\u65ad\uff09</li> <li><code>utils/window_uri.py</code> \u2014 <code>window://</code> URI \u89e3\u6790\u4e0e\u6784\u5efa</li> </ul> <p>\u8be6\u89c1 Desktop \u684c\u9762\u7cfb\u7edf \u5b8c\u6574\u89c4\u8303\u3002</p>"},{"location":"specification/architecture/#finder-\u6587\u6863\u7cfb\u7edf","title":"Finder \u6587\u6863\u7cfb\u7edf","text":"<p>Computer \u5c06\u591a\u4e2a MCP Server \u66b4\u9732\u7684 <code>dpe://</code> \u8d44\u6e90\u805a\u5408\u4e3a\u7edf\u4e00\u7684\u6587\u6863\u76ee\u5f55\u89c6\u56fe\uff0c\u4e3a Agent \u63d0\u4f9b\u7ed3\u6784\u5316\u6587\u6863\u7684\u6e10\u8fdb\u5f0f\u5bfc\u822a\u80fd\u529b\u3002</p> <pre><code>MCP Server A \u2500\u2500\u2510\n  dpe://a/..   \u2502    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n               \u251c\u2500\u2500\u2500\u2192\u2502    Computer     \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192\u2502  Agent  \u2502\nMCP Server B \u2500\u2500\u2524    \u2502 Finder Organizer\u2502         \u2502         \u2502\n  dpe://b/..   \u2502    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502         \u8fc7\u6ee4/\u6392\u5e8f/\u5206\u9875\nMCP Server C \u2500\u2500\u2518\n  (\u65e0\u6587\u6863\u8d44\u6e90)\n</code></pre> <p>MCP \u64cd\u4f5c\u5230 Finder \u7684\u6620\u5c04:</p> MCP \u64cd\u4f5c Finder \u7528\u9014 <code>resources/list</code> \u679a\u4e3e\u5e76\u7b5b\u9009 <code>dpe://</code> \u8d44\u6e90 <code>resources/read</code> \u6309 URI \u7ea7\u522b\u8bfb\u53d6\u6587\u6863/\u9875\u9762/\u5143\u7d20\u5185\u5bb9 <code>resources/templates</code> \u58f0\u660e <code>pages/{N}</code> \u548c <code>elements/{ID}</code> \u5b50\u8def\u5f84\u6a21\u677f <code>resources.subscribe</code> \u80fd\u529b \u524d\u63d0\u6761\u4ef6\uff0cComputer \u636e\u6b64\u51b3\u5b9a\u662f\u5426\u679a\u4e3e\u8be5 Server \u7684\u6587\u6863 <code>ResourceListChangedNotification</code> \u89e6\u53d1\u6587\u6863\u96c6\u5408\u53d8\u5316\u68c0\u6d4b <code>ResourceUpdatedNotification</code> \u89e6\u53d1\u6587\u6863\u5185\u5bb9\u53d8\u5316\u5237\u65b0 <code>completion/complete</code> \u53ef\u9009\uff1a<code>dpe://</code> \u8d44\u6e90\u6a21\u677f\u53c2\u6570\u81ea\u52a8\u8865\u5168 <p>\u6838\u5fc3\u7ec4\u4ef6:</p> <ul> <li><code>finder/organize.py</code> \u2014 Finder \u7ec4\u7ec7\u7b56\u7565\uff08\u8fc7\u6ee4\u3001\u6392\u5e8f\u3001\u5206\u9875\uff09</li> <li><code>utils/dpe_uri.py</code> \u2014 <code>dpe://</code> URI \u89e3\u6790\u4e0e\u6784\u5efa</li> </ul> <p>\u8be6\u89c1 Finder \u6587\u6863\u7cfb\u7edf \u5b8c\u6574\u89c4\u8303\u3002</p>"},{"location":"specification/architecture/#\u540c\u6b65\u5f02\u6b65\u53cc\u6808","title":"\u540c\u6b65/\u5f02\u6b65\u53cc\u6808","text":"<p>Server \u548c Agent \u6a21\u5757\u5747\u63d0\u4f9b\u540c\u6b65\u548c\u5f02\u6b65\u4e24\u79cd\u5b9e\u73b0\uff1a</p> \u6a21\u5757 \u5f02\u6b65\u5b9e\u73b0 \u540c\u6b65\u5b9e\u73b0 Server <code>SMCPNamespace</code> <code>SyncSMCPNamespace</code> Agent <code>AsyncSMCPAgentClient</code> <code>SMCPAgentClient</code> <p>\u6ce8\u610f: \u4fee\u6539\u534f\u8bae\u903b\u8f91\u65f6\uff0c\u5fc5\u987b\u540c\u65f6\u66f4\u65b0\u4e24\u4e2a\u7248\u672c\u4ee5\u4fdd\u6301\u4e00\u81f4\u6027\u3002</p>"},{"location":"specification/architecture/#\u53c2\u8003","title":"\u53c2\u8003","text":"<ul> <li>Server \u5b9e\u73b0: <code>a2c_smcp/server/</code></li> <li>Agent \u5b9e\u73b0: <code>a2c_smcp/agent/</code></li> <li>Computer \u5b9e\u73b0: <code>a2c_smcp/computer/</code></li> <li>\u534f\u8bae\u5b9a\u4e49: <code>a2c_smcp/smcp.py</code></li> </ul>"},{"location":"specification/data-structures/","title":"A2C-SMCP \u6570\u636e\u7ed3\u6784\u5b9a\u4e49","text":"<p>\u672c\u6587\u6863\u5b9a\u4e49\u4e86 A2C-SMCP \u534f\u8bae\u7684\u6240\u6709\u6570\u636e\u7ed3\u6784\uff0c\u57fa\u4e8e <code>a2c_smcp/smcp.py</code> \u4e2d\u7684 TypedDict \u5b9a\u4e49\u3002</p>"},{"location":"specification/data-structures/#\u901a\u7528\u7ea6\u5b9a","title":"\u901a\u7528\u7ea6\u5b9a","text":"<ul> <li>\u6240\u6709\u6570\u636e\u7ed3\u6784\u4f7f\u7528 JSON \u5bf9\u8c61\u8868\u793a</li> <li>\u5b57\u6bb5\u547d\u540d\u4f7f\u7528 <code>snake_case</code> \u98ce\u683c</li> <li>\u53ef\u9009\u5b57\u6bb5\u4f7f\u7528 <code>NotRequired</code> \u6807\u6ce8</li> <li>\u65f6\u95f4\u76f8\u5173\u5b57\u6bb5\uff1a\u8d85\u65f6\u4f7f\u7528\u6574\u6570\u79d2</li> </ul>"},{"location":"specification/data-structures/#\u57fa\u7840\u6570\u636e\u7ed3\u6784","title":"\u57fa\u7840\u6570\u636e\u7ed3\u6784","text":""},{"location":"specification/data-structures/#agentcalldata","title":"AgentCallData","text":"<p>Agent \u53d1\u8d77\u8c03\u7528\u7684\u57fa\u7840\u6570\u636e\uff0c\u88ab\u591a\u4e2a\u8bf7\u6c42\u7ed3\u6784\u7ee7\u627f\u3002</p> <pre><code>class AgentCallData(TypedDict):\n    agent: str      # Agent \u540d\u79f0/\u6807\u8bc6\n    req_id: str     # \u8bf7\u6c42 ID\uff0c\u7528\u4e8e\u53bb\u91cd\u548c\u5173\u8054\n</code></pre>"},{"location":"specification/data-structures/#\u5de5\u5177\u76f8\u5173\u7ed3\u6784","title":"\u5de5\u5177\u76f8\u5173\u7ed3\u6784","text":""},{"location":"specification/data-structures/#toolcallreq","title":"ToolCallReq","text":"<p>\u5de5\u5177\u8c03\u7528\u8bf7\u6c42\uff0c\u7ee7\u627f\u81ea <code>AgentCallData</code>\u3002</p> <pre><code>class ToolCallReq(AgentCallData):\n    agent: str          # Agent \u540d\u79f0\n    req_id: str         # \u8bf7\u6c42 ID\n    computer: str       # \u76ee\u6807 Computer \u540d\u79f0\n    tool_name: str      # \u5de5\u5177\u540d\u79f0\n    params: dict        # \u5de5\u5177\u8c03\u7528\u53c2\u6570\n    timeout: int        # \u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09\n</code></pre>"},{"location":"specification/data-structures/#smcptool","title":"SMCPTool","text":"<p>SMCP \u534f\u8bae\u4e2d\u7684\u5de5\u5177\u5b9a\u4e49\uff0c\u7528\u4e8e\u5de5\u5177\u5217\u8868\u8fd4\u56de\u3002</p> <pre><code>class SMCPTool(TypedDict):\n    name: str                           # \u5de5\u5177\u540d\u79f0\n    description: str                    # \u5de5\u5177\u63cf\u8ff0\n    params_schema: dict                 # \u53c2\u6570 JSON Schema\n    return_schema: dict | None          # \u8fd4\u56de\u503c JSON Schema\uff08\u53ef\u9009\uff09\n    meta: NotRequired[Attributes | None]  # \u5de5\u5177\u5143\u6570\u636e\uff08\u53ef\u9009\uff09\n</code></pre> <p>\u8bf4\u660e: \u5f53 Computer \u7ba1\u7406\u591a\u4e2a MCP Server \u65f6\uff0c\u53ef\u80fd\u5b58\u5728\u5de5\u5177\u540d\u79f0\u51b2\u7a81\u3002\u6b64\u65f6\u53ef\u901a\u8fc7 <code>meta</code> \u4e2d\u7684 <code>alias</code> \u5b57\u6bb5\u8bbe\u7f6e\u522b\u540d\u8fdb\u884c\u533a\u5206\u3002</p>"},{"location":"specification/data-structures/#smcptoolmeta-\u5e8f\u5217\u5316\u89c4\u8303","title":"SMCPTool.meta \u5e8f\u5217\u5316\u89c4\u8303","text":"<p><code>SMCPTool.meta</code> \u662f\u5de5\u5177\u7684\u5143\u6570\u636e\u5b57\u6bb5\uff0c\u7c7b\u578b\u4e3a <code>Attributes = Mapping[str, AttributeValue]</code>\u3002\u7531\u4e8e <code>AttributeValue</code> \u4ec5\u652f\u6301\u7b80\u5355\u7c7b\u578b\uff08<code>str | bool | int | float | Sequence[str]</code> \u7b49\uff09\uff0c\u6240\u6709\u590d\u6742\u7ed3\u6784\u5fc5\u987b\u5e8f\u5217\u5316\u4e3a JSON \u5b57\u7b26\u4e32\u540e\u5b58\u5165\u3002</p>"},{"location":"specification/data-structures/#meta-\u7684\u547d\u540d\u7a7a\u95f4\u7ed3\u6784","title":"meta \u7684\u547d\u540d\u7a7a\u95f4\u7ed3\u6784","text":"<p><code>meta</code> \u662f\u4e00\u4e2a\u591a\u65b9\u5199\u5165\u7684\u5b57\u6bb5\uff0c\u4e0d\u540c\u6765\u6e90\u7684\u6570\u636e\u901a\u8fc7\u547d\u540d\u7a7a\u95f4 key \u9694\u79bb\uff1a</p> Key \u5199\u5165\u65b9 \u8bf4\u660e <code>a2c_tool_meta</code> A2C \u7cfb\u7edf\uff08Computer\uff09 A2C \u914d\u7f6e\u7684\u5de5\u5177\u5143\u6570\u636e\uff08tags\u3001auto_apply\u3001alias \u7b49\uff09 <code>MCP_TOOL_ANNOTATION</code> A2C \u7cfb\u7edf\uff08Computer\uff09 MCP \u6807\u51c6\u5de5\u5177\u6ce8\u89e3\uff08destructive\u3001readOnlyHint \u7b49\uff09 \u5176\u4ed6\u4efb\u610f key MCP Server \u81ea\u8eab MCP Server \u5728 <code>Tool._meta</code> \u4e2d\u8bbe\u7f6e\u7684\u539f\u751f\u5143\u6570\u636e <p>\u4e3a\u4ec0\u4e48\u4e0d\u5c06 a2c_tool_meta \u5c55\u5f00\u5230 meta \u9876\u5c42\uff1f</p> <p>MCP \u534f\u8bae\u7684 <code>Tool._meta</code> \u662f\u4e00\u4e2a\u5f00\u653e\u5b57\u6bb5\uff0cMCP Server \u53ef\u4ee5\u81ea\u7531\u8bbe\u7f6e\u4efb\u610f key-value\u3002 \u5982\u679c\u5c06 <code>tags</code>\u3001<code>auto_apply</code> \u7b49 A2C \u5b57\u6bb5\u76f4\u63a5\u5c55\u5f00\u5230 <code>meta</code> \u9876\u5c42\uff0c\u4e00\u65e6\u67d0\u4e2a MCP Server \u4e5f\u5728 <code>_meta</code> \u4e2d\u4f7f\u7528\u4e86\u540c\u540d key\uff08\u5982 <code>tags</code>\uff09\uff0c\u5c31\u4f1a\u4ea7\u751f\u547d\u540d\u51b2\u7a81\uff0cAgent \u7aef\u65e0\u6cd5\u533a\u5206 \u8be5\u5b57\u6bb5\u6765\u81ea A2C \u914d\u7f6e\u8fd8\u662f MCP Server \u81ea\u8eab\u3002</p> <p>\u6b64\u5916\uff0c<code>ToolMeta</code> \u4e2d\u5305\u542b <code>ret_object_mapper: dict</code> \u7b49\u5d4c\u5957\u7c7b\u578b\uff0c\u65e0\u6cd5\u76f4\u63a5\u4f5c\u4e3a <code>AttributeValue</code> \u5b58\u5165\u3002\u4f7f\u7528\u4e8c\u7ea7 key + JSON \u5b57\u7b26\u4e32\u53ef\u4ee5\u4fdd\u8bc1\u6240\u6709\u5b57\u6bb5\u7c7b\u578b\u7edf\u4e00\u3002</p>"},{"location":"specification/data-structures/#a2c_tool_meta-\u7684\u503c\u683c\u5f0f","title":"a2c_tool_meta \u7684\u503c\u683c\u5f0f","text":"<p><code>meta[\"a2c_tool_meta\"]</code> \u7684\u503c\u662f\u4e00\u4e2a JSON \u5b57\u7b26\u4e32\uff08\u4e0d\u662f dict\uff09\uff0cAgent \u7aef\u9700\u8981 <code>json.loads()</code> \u540e\u4f7f\u7528\uff1a</p> <pre><code># Agent \u7aef\u89e3\u6790\u793a\u4f8b\nimport json\n\nfor tool in tools:\n    meta = tool.get(\"meta\", {})\n    if \"a2c_tool_meta\" in meta:\n        tool_meta = json.loads(meta[\"a2c_tool_meta\"])\n        tags = tool_meta.get(\"tags\")          # list[str] | None\n        auto_apply = tool_meta.get(\"auto_apply\")  # bool | None\n        alias = tool_meta.get(\"alias\")        # str | None\n</code></pre>"},{"location":"specification/data-structures/#\u5b8c\u6574-json-\u793a\u4f8b","title":"\u5b8c\u6574 JSON \u793a\u4f8b","text":"<p>\u573a\u666f 1: <code>default_tool_meta = null</code>\uff08\u672a\u914d\u7f6e\u5143\u6570\u636e\uff09</p> <pre><code>{\n  \"name\": \"hello\",\n  \"description\": \"Say hello to someone.\",\n  \"params_schema\": {\n    \"properties\": {\n      \"name\": { \"default\": \"World\", \"title\": \"Name\", \"type\": \"string\" }\n    },\n    \"title\": \"helloArguments\",\n    \"type\": \"object\"\n  },\n  \"return_schema\": {\n    \"properties\": {\n      \"result\": { \"title\": \"Result\", \"type\": \"string\" }\n    },\n    \"required\": [\"result\"],\n    \"title\": \"helloOutput\",\n    \"type\": \"object\"\n  },\n  \"meta\": {}\n}\n</code></pre> <p>\u573a\u666f 2: <code>default_tool_meta = {\"tags\": [\"browser\"], \"auto_apply\": true}</code></p> <pre><code>{\n  \"name\": \"browser_navigate\",\n  \"description\": \"Navigate to a URL.\",\n  \"params_schema\": { \"...\" : \"...\" },\n  \"return_schema\": { \"...\" : \"...\" },\n  \"meta\": {\n    \"a2c_tool_meta\": \"{\\\"auto_apply\\\": true, \\\"alias\\\": null, \\\"tags\\\": [\\\"browser\\\"], \\\"ret_object_mapper\\\": null}\"\n  }\n}\n</code></pre> <p>\u6ce8\u610f a2c_tool_meta \u7684\u503c\u7c7b\u578b</p> <p><code>a2c_tool_meta</code> \u7684\u503c\u662f JSON \u5b57\u7b26\u4e32\uff0c\u4e0d\u662f\u5d4c\u5957\u5bf9\u8c61\u3002 \u5bf9\u5176\u6267\u884c <code>json.loads()</code> \u540e\u5f97\u5230\u5982\u4e0b dict\uff1a</p> <pre><code>{\n  \"auto_apply\": true,\n  \"alias\": null,\n  \"tags\": [\"browser\"],\n  \"ret_object_mapper\": null\n}\n</code></pre>"},{"location":"specification/data-structures/#toolmeta","title":"ToolMeta","text":"<p>\u5de5\u5177\u5143\u6570\u636e\u914d\u7f6e\u3002\u6b64\u7ed3\u6784\u5b9a\u4e49\u4e86 <code>a2c_tool_meta</code> JSON \u5b57\u7b26\u4e32\u89e3\u6790\u540e\u7684\u5b57\u6bb5\u3002</p> <pre><code>class ToolMeta(TypedDict, total=False):\n    auto_apply: NotRequired[bool | None]\n    # \u662f\u5426\u81ea\u52a8\u5e94\u7528\uff08\u8df3\u8fc7\u4e8c\u6b21\u786e\u8ba4\uff09\n\n    ret_object_mapper: NotRequired[dict | None]\n    # \u8fd4\u56de\u503c\u5bf9\u8c61\u6620\u5c04\uff0c\u7528\u4e8e\u7edf\u4e00\u4e0d\u540c MCP \u5de5\u5177\u7684\u8fd4\u56de\u683c\u5f0f\n\n    alias: NotRequired[str | None]\n    # \u5de5\u5177\u522b\u540d\uff0c\u7528\u4e8e\u89e3\u51b3\u4e0d\u540c Server \u4e0b\u7684\u5de5\u5177\u91cd\u540d\u51b2\u7a81\n\n    tags: NotRequired[list[str] | None]\n    # \u5de5\u5177\u6807\u7b7e\uff0c\u7528\u4e8e\u5206\u7c7b\n</code></pre>"},{"location":"specification/data-structures/#gettoolsreq","title":"GetToolsReq","text":"<p>\u83b7\u53d6\u5de5\u5177\u5217\u8868\u8bf7\u6c42\u3002</p> <pre><code>class GetToolsReq(AgentCallData):\n    agent: str      # Agent \u540d\u79f0\n    req_id: str     # \u8bf7\u6c42 ID\n    computer: str   # \u76ee\u6807 Computer \u540d\u79f0\n</code></pre>"},{"location":"specification/data-structures/#gettoolsret","title":"GetToolsRet","text":"<p>\u83b7\u53d6\u5de5\u5177\u5217\u8868\u54cd\u5e94\u3002</p> <pre><code>class GetToolsRet(TypedDict):\n    tools: list[SMCPTool]   # \u5de5\u5177\u5217\u8868\n    req_id: str             # \u8bf7\u6c42 ID\n</code></pre>"},{"location":"specification/data-structures/#\u623f\u95f4\u7ba1\u7406\u7ed3\u6784","title":"\u623f\u95f4\u7ba1\u7406\u7ed3\u6784","text":""},{"location":"specification/data-structures/#enterofficereq","title":"EnterOfficeReq","text":"<p>\u52a0\u5165\u623f\u95f4\u8bf7\u6c42\u3002</p> <pre><code>class EnterOfficeReq(TypedDict):\n    role: Literal[\"computer\", \"agent\"]  # \u89d2\u8272\u7c7b\u578b\n    name: str                           # \u540d\u79f0\n    office_id: str                      # \u623f\u95f4 ID\n</code></pre>"},{"location":"specification/data-structures/#leaveofficereq","title":"LeaveOfficeReq","text":"<p>\u79bb\u5f00\u623f\u95f4\u8bf7\u6c42\u3002</p> <pre><code>class LeaveOfficeReq(TypedDict):\n    office_id: str      # \u623f\u95f4 ID\n</code></pre>"},{"location":"specification/data-structures/#enterofficenotification","title":"EnterOfficeNotification","text":"<p>\u6210\u5458\u52a0\u5165\u623f\u95f4\u901a\u77e5\u3002</p> <pre><code>class EnterOfficeNotification(TypedDict, total=False):\n    office_id: str              # \u623f\u95f4 ID\n    computer: str | None        # \u52a0\u5165\u7684 Computer \u540d\u79f0\uff08\u82e5\u4e3a Computer\uff09\n    agent: str | None           # \u52a0\u5165\u7684 Agent \u540d\u79f0\uff08\u82e5\u4e3a Agent\uff09\n</code></pre>"},{"location":"specification/data-structures/#leaveofficenotification","title":"LeaveOfficeNotification","text":"<p>\u6210\u5458\u79bb\u5f00\u623f\u95f4\u901a\u77e5\u3002</p> <pre><code>class LeaveOfficeNotification(TypedDict, total=False):\n    office_id: str              # \u623f\u95f4 ID\n    computer: str | None        # \u79bb\u5f00\u7684 Computer \u540d\u79f0\n    agent: str | None           # \u79bb\u5f00\u7684 Agent \u540d\u79f0\n</code></pre>"},{"location":"specification/data-structures/#listroomreq","title":"ListRoomReq","text":"<p>\u5217\u51fa\u623f\u95f4\u5185\u4f1a\u8bdd\u8bf7\u6c42\u3002</p> <pre><code>class ListRoomReq(AgentCallData):\n    agent: str          # Agent \u540d\u79f0\n    req_id: str         # \u8bf7\u6c42 ID\n    office_id: str      # \u623f\u95f4 ID\n</code></pre>"},{"location":"specification/data-structures/#sessioninfo","title":"SessionInfo","text":"<p>\u4f1a\u8bdd\u4fe1\u606f\u3002</p> <pre><code>class SessionInfo(TypedDict, total=False):\n    sid: str                                # \u4f1a\u8bdd ID\n    name: str                               # \u4f1a\u8bdd\u540d\u79f0\n    role: Literal[\"computer\", \"agent\"]      # \u89d2\u8272\n    office_id: str                          # \u6240\u5c5e\u623f\u95f4 ID\n</code></pre>"},{"location":"specification/data-structures/#listroomret","title":"ListRoomRet","text":"<p>\u5217\u51fa\u623f\u95f4\u5185\u4f1a\u8bdd\u54cd\u5e94\u3002</p> <pre><code>class ListRoomRet(TypedDict):\n    sessions: list[SessionInfo]     # \u4f1a\u8bdd\u5217\u8868\n    req_id: str                     # \u8bf7\u6c42 ID\n</code></pre>"},{"location":"specification/data-structures/#\u914d\u7f6e\u76f8\u5173\u7ed3\u6784","title":"\u914d\u7f6e\u76f8\u5173\u7ed3\u6784","text":""},{"location":"specification/data-structures/#updatecomputerconfigreq","title":"UpdateComputerConfigReq","text":"<p>\u914d\u7f6e\u66f4\u65b0\u8bf7\u6c42\u3002\u540c\u65f6\u88ab Desktop \u66f4\u65b0\u4e8b\u4ef6\uff08<code>server:update_desktop</code> / <code>notify:update_desktop</code>\uff09\u590d\u7528\u3002</p> <pre><code>class UpdateComputerConfigReq(TypedDict):\n    computer: str       # Computer \u540d\u79f0\n</code></pre> <p>\u590d\u7528\u8bf4\u660e: \u6b64\u6570\u636e\u7ed3\u6784\u88ab\u4ee5\u4e0b\u4e8b\u4ef6\u5171\u7528\uff1a</p> \u4e8b\u4ef6 \u7528\u9014 <code>server:update_config</code> Computer \u914d\u7f6e\u66f4\u65b0\u8bf7\u6c42 <code>server:update_desktop</code> \u684c\u9762\u66f4\u65b0\u901a\u77e5\u8bf7\u6c42 <code>notify:update_desktop</code> \u684c\u9762\u66f4\u65b0\u5e7f\u64ad\u901a\u77e5 <code>server:update_finder</code> \u6587\u6863\u76ee\u5f55\u66f4\u65b0\u901a\u77e5\u8bf7\u6c42 <code>notify:update_finder</code> \u6587\u6863\u76ee\u5f55\u66f4\u65b0\u5e7f\u64ad\u901a\u77e5"},{"location":"specification/data-structures/#updatemcpconfignotification","title":"UpdateMCPConfigNotification","text":"<p>\u914d\u7f6e\u66f4\u65b0\u901a\u77e5\u3002</p> <pre><code>class UpdateMCPConfigNotification(TypedDict, total=False):\n    computer: str       # Computer \u540d\u79f0\n</code></pre>"},{"location":"specification/data-structures/#updatetoollistnotification","title":"UpdateToolListNotification","text":"<p>\u5de5\u5177\u5217\u8868\u66f4\u65b0\u901a\u77e5\u3002</p> <pre><code>class UpdateToolListNotification(TypedDict, total=False):\n    computer: str       # Computer \u540d\u79f0\n</code></pre>"},{"location":"specification/data-structures/#getcomputerconfigreq","title":"GetComputerConfigReq","text":"<p>\u83b7\u53d6 Computer \u914d\u7f6e\u8bf7\u6c42\u3002</p> <pre><code>class GetComputerConfigReq(AgentCallData):\n    agent: str          # Agent \u540d\u79f0\n    req_id: str         # \u8bf7\u6c42 ID\n    computer: str       # \u76ee\u6807 Computer \u540d\u79f0\n</code></pre>"},{"location":"specification/data-structures/#getcomputerconfigret","title":"GetComputerConfigRet","text":"<p>\u83b7\u53d6 Computer \u914d\u7f6e\u54cd\u5e94\u3002</p> <pre><code>class GetComputerConfigRet(TypedDict):\n    inputs: NotRequired[list[MCPServerInput] | None]    # \u8f93\u5165\u5b9a\u4e49\u5217\u8868\n    servers: dict[str, MCPServerConfig]                 # MCP Server \u914d\u7f6e\u6620\u5c04\n</code></pre>"},{"location":"specification/data-structures/#desktop-\u76f8\u5173\u7ed3\u6784","title":"Desktop \u76f8\u5173\u7ed3\u6784","text":""},{"location":"specification/data-structures/#getdesktopreq","title":"GetDeskTopReq","text":"<p>\u83b7\u53d6\u684c\u9762\u4fe1\u606f\u8bf7\u6c42\u3002</p> <pre><code>class GetDeskTopReq(AgentCallData, total=True):\n    agent: str                      # Agent \u540d\u79f0\n    req_id: str                     # \u8bf7\u6c42 ID\n    computer: str                   # \u76ee\u6807 Computer \u540d\u79f0\n    desktop_size: NotRequired[int]  # \u53ef\u9009\uff1a\u9650\u5236\u8fd4\u56de\u7684\u684c\u9762\u5185\u5bb9\u6570\u91cf\n    window: NotRequired[str]        # \u53ef\u9009\uff1a\u6307\u5b9a\u83b7\u53d6\u7684 WindowURI\n</code></pre>"},{"location":"specification/data-structures/#desktop","title":"Desktop","text":"<p>\u684c\u9762\u5185\u5bb9\u7c7b\u578b\u522b\u540d\u3002\u6bcf\u4e2a <code>Desktop</code> \u6761\u76ee\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u4ee3\u8868\u4e00\u4e2a\u7a97\u53e3\u7684\u6e32\u67d3\u7ed3\u679c\u3002</p> <pre><code>Desktop: TypeAlias = str\n</code></pre> <p>\u5185\u5bb9\u683c\u5f0f:</p> <ul> <li>\u6709\u6587\u672c\u5185\u5bb9\u65f6\uff1a<code>{window:// URI}\\n\\n{body}</code>\uff08\u591a\u4e2a <code>TextResourceContents</code> \u7684 <code>text</code> \u7528 <code>\\n\\n</code> \u8fde\u63a5\uff09</li> <li>\u65e0\u6587\u672c\u5185\u5bb9\u65f6\uff1a\u4ec5 <code>{window:// URI}</code></li> </ul> <p>\u793a\u4f8b:</p> <pre><code>window://com.example.browser/main?priority=80\n\n&lt;html&gt;\u5f53\u524d\u9875\u9762\u5185\u5bb9...&lt;/html&gt;\n</code></pre> <p>\u8be6\u89c1 Desktop \u684c\u9762\u7cfb\u7edf \u4e2d\u7684\u5b8c\u6574\u89c4\u8303\u3002</p> <p>Desktop \u66f4\u65b0\u4e8b\u4ef6\u7684\u6570\u636e\u7ed3\u6784</p> <p><code>server:update_desktop</code> \u548c <code>notify:update_desktop</code> \u4e8b\u4ef6\u5747\u590d\u7528 <code>UpdateComputerConfigReq</code> \u7ed3\u6784\uff08\u4ec5\u5305\u542b <code>computer: str</code> \u5b57\u6bb5\uff09\uff0c\u4e0e <code>server:update_config</code> \u5171\u4eab\u540c\u4e00\u6570\u636e\u7ed3\u6784\u3002</p>"},{"location":"specification/data-structures/#getdesktopret","title":"GetDeskTopRet","text":"<p>\u83b7\u53d6\u684c\u9762\u4fe1\u606f\u54cd\u5e94\u3002</p> <pre><code>class GetDeskTopRet(TypedDict, total=False):\n    desktops: list[Desktop]     # \u684c\u9762\u5185\u5bb9\u5217\u8868\uff08\u5b57\u7b26\u4e32\u5f62\u5f0f\uff09\n    req_id: str                 # \u8bf7\u6c42 ID\n</code></pre>"},{"location":"specification/data-structures/#finder-\u76f8\u5173\u7ed3\u6784","title":"Finder \u76f8\u5173\u7ed3\u6784","text":""},{"location":"specification/data-structures/#getfinderreq","title":"GetFinderReq","text":"<p>\u83b7\u53d6\u6587\u6863\u76ee\u5f55\u8bf7\u6c42\u3002</p> <pre><code>class GetFinderReq(AgentCallData, total=True):\n    agent: str                          # Agent \u540d\u79f0\n    req_id: str                         # \u8bf7\u6c42 ID\n    computer: str                       # \u76ee\u6807 Computer \u540d\u79f0\n    keywords: NotRequired[list[str]]    # \u53ef\u9009\uff1a\u5173\u952e\u8bcd\u8fc7\u6ee4\n    file_type: NotRequired[str]         # \u53ef\u9009\uff1a\u6587\u4ef6\u7c7b\u578b\u8fc7\u6ee4\n    offset: NotRequired[int]            # \u53ef\u9009\uff1a\u5206\u9875\u504f\u79fb\uff08\u9ed8\u8ba4 0\uff09\n    limit: NotRequired[int]             # \u53ef\u9009\uff1a\u5206\u9875\u9650\u5236\uff08\u9ed8\u8ba4 20\uff09\n</code></pre>"},{"location":"specification/data-structures/#dpedocumentsummary","title":"DPEDocumentSummary","text":"<p>DPE \u6587\u6863\u6458\u8981\uff0c\u7528\u4e8e\u6587\u6863\u76ee\u5f55\u5c55\u793a\u3002</p> <pre><code>class DPEDocumentSummary(TypedDict):\n    doc_ref: str                        # \u6587\u6863\u5f15\u7528\u952e\uff08MCP Server \u5206\u914d\u7684\u4e0d\u900f\u660e\u77ed\u952e\uff09\n    uri: str                            # \u5b8c\u6574 dpe:// URI\n    file_uri: str                       # \u539f\u59cb\u6587\u4ef6 URI\n    file_type: str                      # \u6587\u4ef6\u7c7b\u578b\uff08xlsx, pdf, pptx \u7b49\uff09\n    title: str                          # \u6587\u6863\u6807\u9898\n    page_count: int                     # \u603b\u9875\u6570\n    keywords: NotRequired[list[str]]    # \u5173\u952e\u8bcd\u5217\u8868\n    summary: NotRequired[str]           # \u6587\u6863\u6458\u8981\n    server: str                         # \u6765\u6e90 MCP Server \u540d\u79f0\n    last_modified: NotRequired[str]     # \u6700\u540e\u4fee\u6539\u65f6\u95f4\uff08ISO 8601\uff09\n</code></pre>"},{"location":"specification/data-structures/#dpepagesummary","title":"DPEPageSummary","text":"<p>DPE \u9875\u9762\u6458\u8981\uff0c\u7528\u4e8e\u6587\u6863\u5185\u9875\u9762\u7d22\u5f15\u3002</p> <pre><code>class DPEPageSummary(TypedDict):\n    page_index: int                     # \u9875\u7801\uff08\u4ece 0 \u5f00\u59cb\uff09\n    title: str                          # \u9875\u9762\u6807\u9898\n    element_count: int                  # \u5143\u7d20\u6570\u91cf\n    uri: str                            # \u9875\u9762\u7684 dpe:// URI\n    doc_ref: NotRequired[str]           # \u6240\u5c5e\u6587\u6863\u5f15\u7528\u952e\n</code></pre>"},{"location":"specification/data-structures/#dpeelementdetail","title":"DPEElementDetail","text":"<p>DPE \u5143\u7d20\u8be6\u60c5\u3002</p> <pre><code>class DPEElementDetail(TypedDict):\n    element_id: str                     # \u5143\u7d20\u552f\u4e00\u6807\u8bc6\n    category: str                       # \u5143\u7d20\u7c7b\u578b\n    summary: NotRequired[str]           # \u5143\u7d20\u6458\u8981\n    content: dict                       # \u5143\u7d20\u5185\u5bb9\uff08\u7ed3\u6784\u56e0\u7c7b\u578b\u800c\u5f02\uff09\n    doc_ref: NotRequired[str]           # \u6240\u5c5e\u6587\u6863\u5f15\u7528\u952e\n    page_index: NotRequired[int]        # \u6240\u5c5e\u9875\u7801\n    uri: NotRequired[str]              # \u5143\u7d20\u7684 dpe:// URI\n    metadata: NotRequired[dict]         # \u9644\u52a0\u5143\u6570\u636e\n</code></pre>"},{"location":"specification/data-structures/#getfinderret","title":"GetFinderRet","text":"<p>\u83b7\u53d6\u6587\u6863\u76ee\u5f55\u54cd\u5e94\u3002</p> <pre><code>class GetFinderRet(TypedDict, total=False):\n    documents: list[DPEDocumentSummary]  # \u6587\u6863\u6458\u8981\u5217\u8868\n    total_count: int                     # \u603b\u6587\u6863\u6570\uff08\u7528\u4e8e\u5206\u9875\uff09\n    req_id: str                          # \u8bf7\u6c42 ID\n</code></pre> <p>Finder \u66f4\u65b0\u4e8b\u4ef6\u7684\u6570\u636e\u7ed3\u6784</p> <p><code>server:update_finder</code> \u548c <code>notify:update_finder</code> \u4e8b\u4ef6\u5747\u590d\u7528 <code>UpdateComputerConfigReq</code> \u7ed3\u6784\uff08\u4ec5\u5305\u542b <code>computer: str</code> \u5b57\u6bb5\uff09\uff0c\u4e0e <code>server:update_config</code>\u3001<code>server:update_desktop</code> \u5171\u4eab\u540c\u4e00\u6570\u636e\u7ed3\u6784\u3002</p> <p>\u8be6\u89c1 Finder \u6587\u6863\u7cfb\u7edf \u5b8c\u6574\u89c4\u8303\u3002</p>"},{"location":"specification/data-structures/#mcp-server-\u914d\u7f6e\u7ed3\u6784","title":"MCP Server \u914d\u7f6e\u7ed3\u6784","text":""},{"location":"specification/data-structures/#basemcpserverconfig","title":"BaseMCPServerConfig","text":"<p>MCP Server \u914d\u7f6e\u57fa\u7c7b\u3002</p> <pre><code>class BaseMCPServerConfig(TypedDict):\n    name: str\n    # MCP Server \u540d\u79f0\n\n    disabled: bool\n    # \u662f\u5426\u7981\u7528\n\n    forbidden_tools: list[str]\n    # \u7981\u7528\u7684\u5de5\u5177\u5217\u8868\n\n    tool_meta: dict[str, ToolMeta]\n    # \u5de5\u5177\u5143\u6570\u636e\u6620\u5c04\uff08\u5de5\u5177\u540d \u2192 \u5143\u6570\u636e\uff09\n\n    default_tool_meta: NotRequired[ToolMeta | None]\n    # \u9ed8\u8ba4\u5de5\u5177\u5143\u6570\u636e\uff0c\u5f53\u5177\u4f53\u5de5\u5177\u672a\u914d\u7f6e\u65f6\u4f7f\u7528\n\n    vrl: NotRequired[str | None]\n    # VRL \u811a\u672c\uff0c\u7528\u4e8e\u52a8\u6001\u8f6c\u6362\u5de5\u5177\u8fd4\u56de\u503c\n</code></pre>"},{"location":"specification/data-structures/#mcpserverstdioconfig","title":"MCPServerStdioConfig","text":"<p>\u6807\u51c6\u8f93\u5165\u8f93\u51fa\u6a21\u5f0f\u7684 MCP Server \u914d\u7f6e\u3002</p> <pre><code>class MCPServerStdioParameters(TypedDict):\n    command: str\n    # \u542f\u52a8\u547d\u4ee4\n\n    args: list[str]\n    # \u547d\u4ee4\u884c\u53c2\u6570\n\n    env: dict[str, str] | None\n    # \u73af\u5883\u53d8\u91cf\n\n    cwd: str | None\n    # \u5de5\u4f5c\u76ee\u5f55\n\n    encoding: str\n    # \u6587\u672c\u7f16\u7801\uff0c\u9ed8\u8ba4 utf-8\n\n    encoding_error_handler: Literal[\"strict\", \"ignore\", \"replace\"]\n    # \u7f16\u7801\u9519\u8bef\u5904\u7406\u65b9\u5f0f\n\n\nclass MCPServerStdioConfig(BaseMCPServerConfig):\n    type: Literal[\"stdio\"]\n    server_parameters: MCPServerStdioParameters\n</code></pre>"},{"location":"specification/data-structures/#mcpserverstreamablehttpconfig","title":"MCPServerStreamableHttpConfig","text":"<p>Streamable HTTP \u6a21\u5f0f\u7684 MCP Server \u914d\u7f6e\u3002</p> <pre><code>class MCPServerStreamableHttpParameters(TypedDict):\n    url: str\n    # \u7aef\u70b9 URL\n\n    headers: dict[str, Any] | None\n    # \u8bf7\u6c42\u5934\n\n    timeout: str\n    # HTTP \u8d85\u65f6\uff08ISO 8601 duration \u683c\u5f0f\uff09\n\n    sse_read_timeout: str\n    # SSE \u8bfb\u53d6\u8d85\u65f6\uff08ISO 8601 duration \u683c\u5f0f\uff09\n\n    terminate_on_close: bool\n    # \u5173\u95ed\u65f6\u662f\u5426\u7ec8\u6b62\u5ba2\u6237\u7aef\u4f1a\u8bdd\n\n\nclass MCPServerStreamableHttpConfig(BaseMCPServerConfig):\n    type: Literal[\"streamable\"]\n    server_parameters: MCPServerStreamableHttpParameters\n</code></pre>"},{"location":"specification/data-structures/#mcpsseconfig","title":"MCPSSEConfig","text":"<p>SSE \u6a21\u5f0f\u7684 MCP Server \u914d\u7f6e\u3002</p> <pre><code>class MCPSSEParameters(TypedDict):\n    url: str\n    # \u7aef\u70b9 URL\n\n    headers: dict[str, Any] | None\n    # \u8bf7\u6c42\u5934\n\n    timeout: float\n    # HTTP \u8d85\u65f6\uff08\u79d2\uff09\n\n    sse_read_timeout: float\n    # SSE \u8bfb\u53d6\u8d85\u65f6\uff08\u79d2\uff09\n\n\nclass MCPSSEConfig(BaseMCPServerConfig):\n    type: Literal[\"sse\"]\n    server_parameters: MCPSSEParameters\n</code></pre>"},{"location":"specification/data-structures/#mcpserverconfig","title":"MCPServerConfig","text":"<p>MCP Server \u914d\u7f6e\u8054\u5408\u7c7b\u578b\u3002</p> <pre><code>MCPServerConfig = MCPServerStdioConfig | MCPServerStreamableHttpConfig | MCPSSEConfig\n</code></pre> <p>\u6ce8\u610f: MCP Server \u7c7b\u578b\u4e3a <code>\"stdio\"</code>, <code>\"streamable\"</code>, <code>\"sse\"</code> \u4e09\u79cd\uff0c\u5176\u4e2d <code>\"streamable\"</code> \u5bf9\u5e94 MCP \u5b98\u65b9\u7684 Streamable HTTP \u4f20\u8f93\u6a21\u5f0f\u3002</p>"},{"location":"specification/data-structures/#\u8f93\u5165\u914d\u7f6e\u7ed3\u6784","title":"\u8f93\u5165\u914d\u7f6e\u7ed3\u6784","text":"<p>\u8f93\u5165\u914d\u7f6e\u7528\u4e8e\u5b9a\u4e49 MCP Server \u914d\u7f6e\u4e2d\u7684\u52a8\u6001\u5360\u4f4d\u7b26\u3002</p>"},{"location":"specification/data-structures/#mcpserverinputbase","title":"MCPServerInputBase","text":"<p>\u8f93\u5165\u914d\u7f6e\u57fa\u7c7b\u3002</p> <pre><code>class MCPServerInputBase(TypedDict):\n    id: str             # \u8f93\u5165 ID\n    description: str    # \u63cf\u8ff0\n</code></pre>"},{"location":"specification/data-structures/#mcpserverpromptstringinput","title":"MCPServerPromptStringInput","text":"<p>\u5b57\u7b26\u4e32\u8f93\u5165\u7c7b\u578b\u3002</p> <pre><code>class MCPServerPromptStringInput(MCPServerInputBase):\n    type: Literal[\"promptString\"]\n    default: NotRequired[str | None]        # \u9ed8\u8ba4\u503c\n    password: NotRequired[bool | None]      # \u662f\u5426\u4e3a\u5bc6\u7801\uff08\u9690\u85cf\u8f93\u5165\uff09\n</code></pre>"},{"location":"specification/data-structures/#mcpserverpickstringinput","title":"MCPServerPickStringInput","text":"<p>\u9009\u62e9\u8f93\u5165\u7c7b\u578b\u3002</p> <pre><code>class MCPServerPickStringInput(MCPServerInputBase):\n    type: Literal[\"pickString\"]\n    options: list[str]                      # \u53ef\u9009\u9879\u5217\u8868\n    default: NotRequired[str | None]        # \u9ed8\u8ba4\u503c\n</code></pre>"},{"location":"specification/data-structures/#mcpservercommandinput","title":"MCPServerCommandInput","text":"<p>\u547d\u4ee4\u8f93\u5165\u7c7b\u578b\uff08\u901a\u8fc7\u6267\u884c\u547d\u4ee4\u83b7\u53d6\u503c\uff09\u3002</p> <pre><code>class MCPServerCommandInput(MCPServerInputBase):\n    type: Literal[\"command\"]\n    command: str                            # \u8981\u6267\u884c\u7684\u547d\u4ee4\n    args: NotRequired[dict[str, str] | None]  # \u547d\u4ee4\u53c2\u6570\n</code></pre>"},{"location":"specification/data-structures/#mcpserverinput","title":"MCPServerInput","text":"<p>\u8f93\u5165\u914d\u7f6e\u8054\u5408\u7c7b\u578b\u3002</p> <pre><code>MCPServerInput = MCPServerPromptStringInput | MCPServerPickStringInput | MCPServerCommandInput\n</code></pre>"},{"location":"specification/data-structures/#\u7c7b\u578b\u522b\u540d","title":"\u7c7b\u578b\u522b\u540d","text":"<pre><code>from a2c_smcp.types import SERVER_NAME, TOOL_NAME, Attributes, AttributeValue\n\nSERVER_NAME: TypeAlias = str    # MCP Server \u540d\u79f0\nTOOL_NAME: TypeAlias = str      # \u5de5\u5177\u540d\u79f0\nAttributeValue: TypeAlias = str | int | float | bool | None\nAttributes: TypeAlias = dict[str, AttributeValue]\nDesktop: TypeAlias = str        # \u684c\u9762\u5185\u5bb9\uff08\u5b57\u7b26\u4e32\u5f62\u5f0f\uff09\n</code></pre>"},{"location":"specification/data-structures/#\u53c2\u8003","title":"\u53c2\u8003","text":"<ul> <li>\u7c7b\u578b\u5b9a\u4e49\u6e90\u7801: <code>a2c_smcp/smcp.py</code></li> <li>Pydantic \u6a21\u578b: <code>a2c_smcp/computer/mcp_clients/model.py</code></li> <li>\u901a\u7528\u7c7b\u578b: <code>a2c_smcp/types.py</code></li> </ul>"},{"location":"specification/desktop/","title":"Desktop \u684c\u9762\u7cfb\u7edf","text":""},{"location":"specification/desktop/#\u6982\u8ff0","title":"\u6982\u8ff0","text":"<p>Desktop \u662f A2C-SMCP \u534f\u8bae\u4e2d\u5de5\u5177\u8c03\u7528\u4e4b\u5916\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u901a\u9053\u3002\u5b83\u5c06\u591a\u4e2a MCP Server \u66b4\u9732\u7684 <code>window://</code> \u8d44\u6e90\u805a\u5408\u4e3a\u7edf\u4e00\u7684\u684c\u9762\u89c6\u56fe\uff0c\u4f9b Agent \u5728\u5de5\u5177\u8c03\u7528\u524d\u540e\u83b7\u53d6\u8f85\u52a9\u4fe1\u606f\uff08\u4f8b\u5982\u5f53\u524d\u7f51\u9875\u5185\u5bb9\u3001\u7f16\u8f91\u5668\u72b6\u6001\u3001\u65e5\u5fd7\u8f93\u51fa\u7b49\uff09\u3002</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                          Computer                                \u2502\n\u2502                                                                  \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u2502\n\u2502   \u2502MCP Srv A \u2502   \u2502MCP Srv B \u2502   \u2502MCP Srv C \u2502                   \u2502\n\u2502   \u2502window://a\u2502   \u2502window://b\u2502   \u2502(\u65e0\u7a97\u53e3)   \u2502                   \u2502\n\u2502   \u2502  /editor \u2502   \u2502  /log    \u2502   \u2502          \u2502                   \u2502\n\u2502   \u2502  /status \u2502   \u2502          \u2502   \u2502          \u2502                   \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                   \u2502\n\u2502        \u2502              \u2502                                          \u2502\n\u2502        \u25bc              \u25bc                                          \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                   \u2502\n\u2502   \u2502   Desktop Organizer     \u2502 \u2190 \u8fc7\u6ee4\u3001\u6392\u5e8f\u3001\u622a\u65ad                 \u2502\n\u2502   \u2502   (organize_desktop)    \u2502                                   \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                   \u2502\n\u2502               \u2502                                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502\n                \u25bc\n           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n           \u2502  Agent   \u2502  \u2190 \u901a\u8fc7 client:get_desktop \u83b7\u53d6\n           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Desktop \u7684\u6838\u5fc3\u7406\u5ff5\u662f\uff1aMCP Server \u53ea\u9700\u6309 MCP \u6807\u51c6\u66b4\u9732 <code>window://</code> \u8d44\u6e90\uff0c\u65e0\u9700\u4efb\u4f55 SMCP \u7279\u5b9a\u6539\u52a8\uff0cComputer \u81ea\u52a8\u5b8c\u6210\u805a\u5408\u4e0e\u7ec4\u7ec7\u3002</p>"},{"location":"specification/desktop/#window-uri-\u89c4\u8303","title":"Window URI \u89c4\u8303","text":""},{"location":"specification/desktop/#uri-\u683c\u5f0f","title":"URI \u683c\u5f0f","text":"<pre><code>window://host/path1/path2?priority=P&amp;fullscreen=F\n</code></pre>"},{"location":"specification/desktop/#\u7ec4\u6210\u90e8\u5206","title":"\u7ec4\u6210\u90e8\u5206","text":"\u7ec4\u4ef6 \u5fc5\u9700 \u8bf4\u660e \u7ea6\u675f <code>scheme</code> \u662f \u56fa\u5b9a\u4e3a <code>window</code> \u5fc5\u987b\u4e3a <code>window</code>\uff0c\u5426\u5219\u89e3\u6790\u5931\u8d25 <code>host</code> \u662f MCP \u552f\u4e00\u6807\u8bc6 \u4e0d\u80fd\u4e3a\u7a7a\uff1b\u63a8\u8350\u4f7f\u7528\u53cd\u5411\u57df\u540d\u98ce\u683c\uff0c\u5982 <code>com.example.mcp</code> <code>path</code> \u5426 0..N \u4e2a\u8def\u5f84\u6bb5 \u6bcf\u6bb5 URL \u7f16\u7801\uff1b<code>c%2Fd</code> \u4fdd\u6301\u4e3a\u5355\u6bb5\uff0c\u89e3\u7801\u4e3a <code>c/d</code> <code>priority</code> \u5426 \u5e03\u5c40\u6392\u5e8f\u4f18\u5148\u7ea7 \u6574\u6570 <code>[0, 100]</code>\uff1b\u9ed8\u8ba4 <code>0</code>\uff1b\u4ec5\u5728\u540c\u4e00 MCP Server \u5185\u90e8\u7a97\u53e3\u95f4\u6bd4\u8f83 <code>fullscreen</code> \u5426 \u5168\u5c4f\u6e32\u67d3\u6807\u8bb0 \u5e03\u5c14\u503c\uff08<code>true</code>/<code>1</code>/<code>yes</code>/<code>on</code> \u6216 <code>false</code>/<code>0</code>/<code>no</code>/<code>off</code>\uff09\uff1b\u540c\u4e00 Server \u5185\u4ec5\u9996\u4e2a\u751f\u6548"},{"location":"specification/desktop/#\u6821\u9a8c\u89c4\u5219","title":"\u6821\u9a8c\u89c4\u5219","text":"<ol> <li><code>scheme</code> \u5fc5\u987b\u4e3a <code>window</code></li> <li><code>host</code> \u4e0d\u80fd\u4e3a\u7a7a</li> <li><code>priority</code> \u82e5\u5b58\u5728\uff0c\u5fc5\u987b\u4e3a <code>[0, 100]</code> \u8303\u56f4\u5185\u7684\u6574\u6570</li> <li><code>fullscreen</code> \u82e5\u5b58\u5728\uff0c\u5fc5\u987b\u53ef\u89e3\u6790\u4e3a\u5e03\u5c14\u503c\uff08<code>true</code>/<code>1</code>/<code>yes</code>/<code>on</code> \u6216 <code>false</code>/<code>0</code>/<code>no</code>/<code>off</code>\uff09</li> <li>\u8def\u5f84\u6bb5\u4f7f\u7528 URL \u7f16\u7801\uff0c<code>c%2Fd</code> \u4fdd\u6301\u4e3a\u5355\u6bb5\uff0c\u89e3\u7801\u4e3a <code>c/d</code></li> </ol>"},{"location":"specification/desktop/#\u6784\u5efa\u793a\u4f8b","title":"\u6784\u5efa\u793a\u4f8b","text":"<p>\u5e26\u5b8c\u6574\u53c2\u6570\u7684 URI:</p> <pre><code>window://com.example.browser/main/tab1?priority=80&amp;fullscreen=true\n</code></pre> <ul> <li><code>host</code>: <code>com.example.browser</code></li> <li><code>path</code>: <code>[\"main\", \"tab1\"]</code></li> <li><code>priority</code>: <code>80</code></li> <li><code>fullscreen</code>: <code>true</code></li> </ul> <p>\u65e0\u8def\u5f84\u7684\u6700\u7b80 URI:</p> <pre><code>window://com.example.logger\n</code></pre> <ul> <li><code>host</code>: <code>com.example.logger</code></li> <li><code>path</code>: <code>[]</code>\uff08\u7a7a\uff09</li> <li><code>priority</code>: <code>None</code>\uff08\u9ed8\u8ba4\u4e3a <code>0</code>\uff09</li> <li><code>fullscreen</code>: <code>None</code>\uff08\u9ed8\u8ba4\u4e0d\u5168\u5c4f\uff09</li> </ul> <p>\u542b\u7279\u6b8a\u5b57\u7b26\u7684\u8def\u5f84\u6bb5:</p> <pre><code>window://com.example.editor/src%2Fmain/file%20name\n</code></pre> <ul> <li><code>host</code>: <code>com.example.editor</code></li> <li><code>path</code>: <code>[\"src/main\", \"file name\"]</code>\uff08URL \u89e3\u7801\u540e\uff09</li> </ul>"},{"location":"specification/desktop/#desktop-\u5185\u5bb9\u683c\u5f0f","title":"Desktop \u5185\u5bb9\u683c\u5f0f","text":""},{"location":"specification/desktop/#\u7c7b\u578b\u5b9a\u4e49","title":"\u7c7b\u578b\u5b9a\u4e49","text":"<pre><code>Desktop: TypeAlias = str\n</code></pre> <p><code>Desktop</code> \u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u7c7b\u578b\u522b\u540d\uff0c\u6bcf\u4e2a Desktop \u6761\u76ee\u4ee3\u8868\u4e00\u4e2a\u7a97\u53e3\u7684\u6e32\u67d3\u7ed3\u679c\u3002</p>"},{"location":"specification/desktop/#\u6e32\u67d3\u89c4\u5219","title":"\u6e32\u67d3\u89c4\u5219","text":"<ol> <li>\u6709\u6587\u672c\u5185\u5bb9: <code>{URI}\\n\\n{body}</code><ul> <li><code>body</code> \u7531\u7a97\u53e3\u8d44\u6e90\u4e2d\u6240\u6709 <code>TextResourceContents</code> \u7684 <code>text</code> \u4ee5 <code>\\n\\n</code> \u8fde\u63a5</li> </ul> </li> <li>\u65e0\u6587\u672c\u5185\u5bb9: \u4ec5 <code>{URI}</code></li> <li>BlobResourceContents: \u5f53\u524d\u4e0d\u652f\u6301\u6e32\u67d3\uff0c\u9047\u5230\u65f6\u4f1a\u4ea7\u751f\u8b66\u544a\u5e76\u8df3\u8fc7</li> <li>\u7a7a\u5185\u5bb9\u7684\u7a97\u53e3: \u5728\u7ec4\u7ec7\u9636\u6bb5\u5373\u88ab\u8fc7\u6ee4\uff0c\u4e0d\u4f1a\u51fa\u73b0\u5728\u6700\u7ec8\u7ed3\u679c\u4e2d</li> </ol>"},{"location":"specification/desktop/#\u793a\u4f8b","title":"\u793a\u4f8b","text":"<p>\u4e00\u4e2a\u5305\u542b\u4e24\u4e2a\u7a97\u53e3\u7684 Desktop \u8fd4\u56de\u503c\uff1a</p> <pre><code>{\n    \"desktops\": [\n        \"window://com.example.browser/main?priority=80\\n\\n&lt;html&gt;\u5f53\u524d\u9875\u9762\u5185\u5bb9...&lt;/html&gt;\",\n        \"window://com.example.logger\\n\\n[2026-02-14 10:30:01] INFO: \u64cd\u4f5c\u5b8c\u6210\"\n    ],\n    \"req_id\": \"req-001\"\n}\n</code></pre>"},{"location":"specification/desktop/#desktop-\u7ec4\u7ec7\u7b56\u7565","title":"Desktop \u7ec4\u7ec7\u7b56\u7565","text":""},{"location":"specification/desktop/#\u6982\u8ff0_1","title":"\u6982\u8ff0","text":"<p>Computer \u901a\u8fc7 <code>organize_desktop(windows, size, history)</code> \u51fd\u6570\u5bf9\u539f\u59cb\u7a97\u53e3\u8d44\u6e90\u8fdb\u884c\u7ec4\u7ec7\uff0c\u8f93\u51fa\u7ecf\u8fc7\u8fc7\u6ee4\u3001\u6392\u5e8f\u548c\u622a\u65ad\u7684 Desktop \u5217\u8868\u3002</p>"},{"location":"specification/desktop/#\u6b65\u9aa4-1\u8fc7\u6ee4\u4e0e\u5206\u7ec4","title":"\u6b65\u9aa4 1\uff1a\u8fc7\u6ee4\u4e0e\u5206\u7ec4","text":"<ul> <li>\u8fc7\u6ee4: \u8df3\u8fc7\u4ee5\u4e0b\u7a97\u53e3\uff1a<ul> <li>\u5185\u5bb9\u4e3a\u7a7a\u7684\u7a97\u53e3\uff08<code>contents</code> \u4e3a\u7a7a\u5217\u8868\u6216\u4e0d\u5b58\u5728\uff09</li> <li>URI \u65e0\u6548\uff08\u975e <code>window://</code> \u6216\u89e3\u6790\u5931\u8d25\uff09\u7684\u7a97\u53e3</li> <li>\u4ec5\u542b <code>BlobResourceContents</code> \u7684\u7a97\u53e3\uff08\u5f53\u524d\u4e0d\u652f\u6301\u6e32\u67d3\uff09</li> </ul> </li> <li>\u5206\u7ec4: \u6309\u6240\u5c5e MCP Server \u540d\u79f0\u5206\u7ec4</li> </ul>"},{"location":"specification/desktop/#\u6b65\u9aa4-2\u670d\u52a1\u5668\u4f18\u5148\u7ea7\u6392\u5e8f","title":"\u6b65\u9aa4 2\uff1a\u670d\u52a1\u5668\u4f18\u5148\u7ea7\u6392\u5e8f","text":"<p>\u6839\u636e\u5de5\u5177\u8c03\u7528\u5386\u53f2\u786e\u5b9a Server \u7684\u5c55\u793a\u987a\u5e8f\uff1a</p> <ol> <li>\u53cd\u5411\u904d\u5386\u5de5\u5177\u8c03\u7528\u5386\u53f2\u8bb0\u5f55\uff0c\u53bb\u91cd\u540e\u5f97\u5230\u6700\u8fd1\u4f7f\u7528\u7684 Server \u5217\u8868\uff08\u6700\u8fd1\u4f7f\u7528\u7684\u6392\u5728\u524d\u9762\uff09</li> <li>\u672a\u51fa\u73b0\u5728\u5386\u53f2\u4e2d\u7684 Server \u6309\u540d\u79f0\u5b57\u6bcd\u5e8f\u8ffd\u52a0\u5230\u672b\u5c3e</li> </ol> <p>ToolCallRecord</p> <p>Computer \u5185\u90e8\u901a\u8fc7 <code>ToolCallRecord</code>\uff08\u5b9a\u4e49\u5728 <code>computer/types.py</code>\uff09\u7ef4\u62a4\u6700\u8fd1\u7684\u5de5\u5177\u8c03\u7528\u8bb0\u5f55\uff0c\u7528\u4e8e\u670d\u52a1\u5668\u4f18\u5148\u7ea7\u6392\u5e8f\u3002\u8be5\u7c7b\u578b\u4e3a Computer \u7684\u5185\u90e8\u5b9e\u73b0\u7ec6\u8282\uff0c\u4e0d\u5c5e\u4e8e A2C-SMCP \u534f\u8bae\u6570\u636e\u7ed3\u6784\u3002</p> <pre><code>class ToolCallRecord(TypedDict):\n    timestamp: str\n    req_id: str\n    server: str       # MCP Server \u540d\u79f0\uff0c\u7528\u4e8e\u4f18\u5148\u7ea7\u6392\u5e8f\n    tool: str\n    parameters: dict\n    timeout: float | None\n    success: bool\n    error: str | None\n</code></pre>"},{"location":"specification/desktop/#\u6b65\u9aa4-3\u7a97\u53e3\u4f18\u5148\u7ea7\u6392\u5e8f","title":"\u6b65\u9aa4 3\uff1a\u7a97\u53e3\u4f18\u5148\u7ea7\u6392\u5e8f","text":"<p>\u540c\u4e00 Server \u5185\u7684\u7a97\u53e3\u6309 <code>priority</code> \u964d\u5e8f\u6392\u5217\uff08\u9ad8\u4f18\u5148\u7ea7\u5728\u524d\uff09\u3002\u672a\u6307\u5b9a <code>priority</code> \u7684\u7a97\u53e3\u9ed8\u8ba4\u4e3a <code>0</code>\u3002</p>"},{"location":"specification/desktop/#\u6b65\u9aa4-4\u5168\u5c4f\u5904\u7406","title":"\u6b65\u9aa4 4\uff1a\u5168\u5c4f\u5904\u7406","text":"<p>fullscreen \u662f per-Server \u7684\u6982\u5ff5\uff0c\u4e0d\u662f\u5168\u5c40\u7684\u3002\u5bf9\u6bcf\u4e2a Server \u72ec\u7acb\u5224\u65ad\uff1a</p> <ol> <li>\u82e5\u8be5 Server \u5185\u5b58\u5728 <code>fullscreen=true</code> \u7684\u7a97\u53e3\uff0c\u4ec5\u4fdd\u7559\u7b2c\u4e00\u4e2a\u5168\u5c4f\u7a97\u53e3\uff08\u6309\u539f\u59cb\u8d44\u6e90\u5217\u8868\u5e8f\u53f7\u6700\u5c0f\u8005\uff09</li> <li>\u8be5 Server \u7684\u5176\u4ed6\u6240\u6709\u7a97\u53e3\u88ab\u6392\u9664</li> <li>\u5904\u7406\u7ee7\u7eed\u81f3\u4e0b\u4e00\u4e2a Server</li> </ol> <p>\u8de8 Server \u7684 fullscreen</p> <p>\u5982\u679c\u591a\u4e2a Server \u5404\u81ea\u62e5\u6709 fullscreen \u7a97\u53e3\uff0c\u6bcf\u4e2a Server \u90fd\u4f1a\u8d21\u732e\u4e00\u4e2a\u5168\u5c4f\u7a97\u53e3\u5230\u6700\u7ec8\u7ed3\u679c\u4e2d\u3002fullscreen \u4ec5\u7ea6\u675f\u540c\u4e00 Server \u5185\u7684\u7a97\u53e3\u9009\u62e9\uff0c\u4e0d\u4f1a\u963b\u6b62\u5176\u4ed6 Server \u7684\u7a97\u53e3\u51fa\u73b0\u3002</p>"},{"location":"specification/desktop/#\u6b65\u9aa4-5\u5c3a\u5bf8\u622a\u65ad","title":"\u6b65\u9aa4 5\uff1a\u5c3a\u5bf8\u622a\u65ad","text":"<ul> <li><code>size=None</code> \u2192 \u4e0d\u9650\u5236\uff0c\u8fd4\u56de\u6240\u6709\u7a97\u53e3</li> <li><code>size\u22640</code> \u2192 \u8fd4\u56de\u7a7a\u5217\u8868</li> <li><code>size&gt;0</code> \u2192 \u622a\u65ad\u4e3a\u5168\u5c40\u4e0a\u9650\uff08\u8de8\u6240\u6709 Server \u7d2f\u8ba1\uff09</li> </ul>"},{"location":"specification/desktop/#\u7b97\u6cd5\u6d41\u7a0b\u56fe","title":"\u7b97\u6cd5\u6d41\u7a0b\u56fe","text":"<pre><code>flowchart TD\n    A[\u8f93\u5165: windows, size, history] --&gt; B{size \u2264 0?}\n    B -- \u662f --&gt; C[\u8fd4\u56de\u7a7a\u5217\u8868]\n    B -- \u5426 --&gt; D[\u8fc7\u6ee4\u65e0\u6548/\u7a7a\u7a97\u53e3]\n    D --&gt; E[\u6309 Server \u540d\u79f0\u5206\u7ec4]\n    E --&gt; F[\u6839\u636e\u5de5\u5177\u8c03\u7528\u5386\u53f2\u6392\u5e8f Server]\n    F --&gt; G[\u6bcf\u4e2a Server \u5185\u6309 priority \u964d\u5e8f\u6392\u5e8f]\n    G --&gt; H{\u904d\u5386\u6bcf\u4e2a Server}\n    H --&gt; I{Server \u5185\u6709 fullscreen \u7a97\u53e3?}\n    I -- \u662f --&gt; J[\u4ec5\u53d6\u7b2c\u4e00\u4e2a fullscreen \u7a97\u53e3]\n    I -- \u5426 --&gt; K[\u6309\u4f18\u5148\u7ea7\u4f9d\u6b21\u53d6\u7a97\u53e3]\n    J --&gt; L{\u8fbe\u5230 size \u4e0a\u9650?}\n    K --&gt; L\n    L -- \u5426 --&gt; H\n    L -- \u662f --&gt; M[\u6e32\u67d3\u5e76\u8fd4\u56de Desktop \u5217\u8868]\n    H -- \u904d\u5386\u5b8c\u6bd5 --&gt; M\n</code></pre>"},{"location":"specification/desktop/#desktop-\u66f4\u65b0\u673a\u5236","title":"Desktop \u66f4\u65b0\u673a\u5236","text":""},{"location":"specification/desktop/#\u53d8\u5316\u68c0\u6d4bcomputer-\u7aef","title":"\u53d8\u5316\u68c0\u6d4b\uff08Computer \u7aef\uff09","text":"<p>Computer \u901a\u8fc7\u76d1\u542c MCP Server \u7684\u8d44\u6e90\u53d8\u66f4\u901a\u77e5\u6765\u68c0\u6d4b\u684c\u9762\u53d8\u5316\uff1a</p>"},{"location":"specification/desktop/#1-\u8d44\u6e90\u5217\u8868\u53d8\u5316resourcelistchangednotification","title":"1. \u8d44\u6e90\u5217\u8868\u53d8\u5316\uff08ResourceListChangedNotification\uff09","text":"<pre><code>MCP Server \u53d1\u51fa ResourceListChangedNotification\n    \u2192 Computer \u6536\u96c6\u5f53\u524d\u6240\u6709 window:// URI\n    \u2192 \u4e0e\u7f13\u5b58\u7684 URI \u96c6\u5408\u6bd4\u8f83\n    \u2192 \u96c6\u5408\u4e0d\u540c \u2192 \u89e6\u53d1\u684c\u9762\u5237\u65b0\n    \u2192 \u96c6\u5408\u76f8\u540c \u2192 \u8df3\u8fc7\uff08\u4ec5\u8bb0\u5f55\u65e5\u5fd7\uff09\n</code></pre>"},{"location":"specification/desktop/#2-\u8d44\u6e90\u5185\u5bb9\u66f4\u65b0resourceupdatednotification","title":"2. \u8d44\u6e90\u5185\u5bb9\u66f4\u65b0\uff08ResourceUpdatedNotification\uff09","text":"<pre><code>MCP Server \u53d1\u51fa ResourceUpdatedNotification (\u643a\u5e26\u5177\u4f53 URI)\n    \u2192 Computer \u68c0\u67e5\u8be5 URI \u662f\u5426\u4e3a window://\n    \u2192 \u662f \u2192 \u76f4\u63a5\u89e6\u53d1\u684c\u9762\u5237\u65b0\uff08\u65e0\u9700\u96c6\u5408\u6bd4\u8f83\uff0c\u964d\u4f4e\u5ef6\u8fdf\uff09\n    \u2192 \u5426 \u2192 \u5ffd\u7565\n</code></pre>"},{"location":"specification/desktop/#3-agent-\u4e3b\u52a8\u62c9\u53d6","title":"3. Agent \u4e3b\u52a8\u62c9\u53d6","text":"<p>Agent \u53ef\u5728\u4efb\u4f55\u65f6\u5019\u901a\u8fc7 <code>client:get_desktop</code> \u4e8b\u4ef6\u4e3b\u52a8\u83b7\u53d6\u6700\u65b0\u684c\u9762\uff0c\u65e0\u9700\u7b49\u5f85\u901a\u77e5\u3002</p>"},{"location":"specification/desktop/#\u4e8b\u4ef6\u6d41","title":"\u4e8b\u4ef6\u6d41","text":"<p>\u5f53 Computer \u68c0\u6d4b\u5230\u684c\u9762\u53d8\u5316\u65f6\uff0c\u901a\u8fc7\u4ee5\u4e0b\u4e8b\u4ef6\u94fe\u901a\u77e5 Agent\uff1a</p> <pre><code>Computer \u2500\u2500[server:update_desktop]\u2500\u2500\u2192 Server \u2500\u2500[notify:update_desktop]\u2500\u2500\u2192 Agent\n</code></pre> <p>\u4e24\u4e2a\u4e8b\u4ef6\u5747\u590d\u7528 <code>UpdateComputerConfigReq</code> \u6570\u636e\u7ed3\u6784\uff1a</p> <pre><code>{\n    \"computer\": str   # Computer \u540d\u79f0\n}\n</code></pre> <p>Agent \u6536\u5230 <code>notify:update_desktop</code> \u540e\uff0c\u5efa\u8bae\u81ea\u52a8\u8c03\u7528 <code>client:get_desktop</code> \u83b7\u53d6\u6700\u65b0\u684c\u9762\u3002</p>"},{"location":"specification/desktop/#\u5b8c\u6574\u751f\u547d\u5468\u671f\u65f6\u5e8f\u56fe","title":"\u5b8c\u6574\u751f\u547d\u5468\u671f\u65f6\u5e8f\u56fe","text":""},{"location":"specification/desktop/#\u521d\u59cb\u62c9\u53d6\u6d41\u7a0b","title":"\u521d\u59cb\u62c9\u53d6\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant A as Agent\n    participant S as Server\n    participant C as Computer\n\n    A-&gt;&gt;S: client:get_desktop (GetDeskTopReq)\n    S-&gt;&gt;C: client:get_desktop (\u8f6c\u53d1)\n    C-&gt;&gt;C: organize_desktop()\n    C-&gt;&gt;S: GetDeskTopRet\n    S-&gt;&gt;A: GetDeskTopRet\n</code></pre>"},{"location":"specification/desktop/#\u7a97\u53e3\u5217\u8868\u53d8\u5316\u89e6\u53d1\u6d41\u7a0b","title":"\u7a97\u53e3\u5217\u8868\u53d8\u5316\u89e6\u53d1\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant M as MCP Server\n    participant C as Computer\n    participant S as Server\n    participant A as Agent\n\n    Note over M: \u7a97\u53e3\u589e\u5220\uff08\u5982\u65b0\u589e window:// \u8d44\u6e90\uff09\n    M-&gt;&gt;C: ResourceListChangedNotification\n    C-&gt;&gt;C: \u6536\u96c6 window:// URI \u96c6\u5408\n    C-&gt;&gt;C: \u4e0e\u7f13\u5b58\u6bd4\u8f83 \u2192 \u96c6\u5408\u4e0d\u540c\n    C-&gt;&gt;S: server:update_desktop {\"computer\": \"...\"}\n    S-&gt;&gt;A: notify:update_desktop {\"computer\": \"...\"}\n    A-&gt;&gt;S: client:get_desktop (GetDeskTopReq)\n    S-&gt;&gt;C: client:get_desktop (\u8f6c\u53d1)\n    C-&gt;&gt;C: organize_desktop()\n    C-&gt;&gt;S: GetDeskTopRet\n    S-&gt;&gt;A: GetDeskTopRet\n</code></pre>"},{"location":"specification/desktop/#\u7a97\u53e3\u5185\u5bb9\u53d8\u5316\u89e6\u53d1\u6d41\u7a0b","title":"\u7a97\u53e3\u5185\u5bb9\u53d8\u5316\u89e6\u53d1\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant M as MCP Server\n    participant C as Computer\n    participant S as Server\n    participant A as Agent\n\n    Note over M: \u7a97\u53e3\u5185\u5bb9\u66f4\u65b0\n    M-&gt;&gt;C: ResourceUpdatedNotification (uri=window://...)\n    C-&gt;&gt;C: \u786e\u8ba4\u4e3a window:// URI\n    C-&gt;&gt;S: server:update_desktop {\"computer\": \"...\"}\n    S-&gt;&gt;A: notify:update_desktop {\"computer\": \"...\"}\n    A-&gt;&gt;S: client:get_desktop (GetDeskTopReq)\n    S-&gt;&gt;C: client:get_desktop (\u8f6c\u53d1)\n    C-&gt;&gt;C: organize_desktop()\n    C-&gt;&gt;S: GetDeskTopRet\n    S-&gt;&gt;A: GetDeskTopRet\n</code></pre>"},{"location":"specification/desktop/#mcp-server-\u5b9e\u73b0\u6307\u5357","title":"MCP Server \u5b9e\u73b0\u6307\u5357","text":""},{"location":"specification/desktop/#\u524d\u63d0\u6761\u4ef6","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>MCP Server \u82e5\u8981\u53c2\u4e0e Desktop\uff0c\u5fc5\u987b\u58f0\u660e <code>resources.subscribe</code> \u80fd\u529b\u3002\u5426\u5219 Computer \u4e0d\u4f1a\u679a\u4e3e\u8be5 Server \u7684\u7a97\u53e3\u8d44\u6e90\uff0c\u4e5f\u4e0d\u4f1a\u6536\u5230\u8be5 Server \u7684\u8d44\u6e90\u53d8\u66f4\u901a\u77e5\u3002</p>"},{"location":"specification/desktop/#\u66b4\u9732\u7a97\u53e3\u8d44\u6e90","title":"\u66b4\u9732\u7a97\u53e3\u8d44\u6e90","text":"<p>\u5728 <code>resources/list</code> \u54cd\u5e94\u4e2d\u8fd4\u56de <code>window://</code> URI \u7684 Resource\uff1a</p> <pre><code>@server.list_resources()\nasync def list_resources():\n    return [\n        Resource(\n            uri=\"window://com.example.myapp/status\",\n            name=\"\u5e94\u7528\u72b6\u6001\",\n            description=\"\u5f53\u524d\u5e94\u7528\u7684\u8fd0\u884c\u72b6\u6001\",\n            mimeType=\"text/plain\",\n        )\n    ]\n</code></pre> <p>\u6bcf\u4e2a Resource \u7684 <code>uri</code> \u5fc5\u987b\u662f\u6709\u6548\u7684 <code>window://</code> URI\uff08\u53c2\u89c1 URI \u683c\u5f0f\uff09\u3002</p>"},{"location":"specification/desktop/#\u63d0\u4f9b\u7a97\u53e3\u5185\u5bb9","title":"\u63d0\u4f9b\u7a97\u53e3\u5185\u5bb9","text":"<p>\u5b9e\u73b0 <code>resources/read</code>\uff0c\u8fd4\u56de <code>TextResourceContents</code>\uff1a</p> <pre><code>@server.read_resource()\nasync def read_resource(uri: str):\n    if uri == \"window://com.example.myapp/status\":\n        return ReadResourceResult(\n            contents=[\n                TextResourceContents(\n                    uri=uri,\n                    mimeType=\"text/plain\",\n                    text=\"\u8fd0\u884c\u4e2d | CPU: 45% | \u5185\u5b58: 2.1GB\",\n                )\n            ]\n        )\n</code></pre> <p>BlobResourceContents \u4e0d\u88ab\u6e32\u67d3</p> <p>Desktop \u5f53\u524d\u4ec5\u6e32\u67d3 <code>TextResourceContents</code>\u3002\u5982\u679c\u8fd4\u56de <code>BlobResourceContents</code>\uff0c\u8be5\u5185\u5bb9\u4f1a\u88ab\u8df3\u8fc7\u5e76\u4ea7\u751f\u8b66\u544a\u65e5\u5fd7\u3002</p>"},{"location":"specification/desktop/#\u53d8\u66f4\u901a\u77e5","title":"\u53d8\u66f4\u901a\u77e5","text":"<ul> <li>\u7a97\u53e3\u589e\u5220\u65f6: \u53d1\u51fa <code>ResourceListChangedNotification</code></li> <li>\u7a97\u53e3\u5185\u5bb9\u53d8\u5316\u65f6: \u53d1\u51fa <code>ResourceUpdatedNotification</code>\uff08\u643a\u5e26\u5177\u4f53 <code>window://</code> URI\uff09</li> </ul> <pre><code># \u7a97\u53e3\u5217\u8868\u53d8\u5316\nawait server.request_context.session.send_resource_list_changed()\n\n# \u7a97\u53e3\u5185\u5bb9\u66f4\u65b0\nawait server.request_context.session.send_resource_updated(\n    uri=\"window://com.example.myapp/status\"\n)\n</code></pre>"},{"location":"specification/desktop/#\u6700\u4f73\u5b9e\u8df5","title":"\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>host \u4f7f\u7528\u53cd\u5411\u57df\u540d\u98ce\u683c\uff08\u5982 <code>com.example.myapp</code>\uff09\u4ee5\u907f\u514d\u4e0e\u5176\u4ed6 MCP Server \u51b2\u7a81</li> <li>\u5408\u7406\u5206\u914d priority\uff0c\u907f\u514d\u6240\u6709\u7a97\u53e3\u4f7f\u7528\u540c\u4e00\u4f18\u5148\u7ea7\uff08\u9ed8\u8ba4 <code>0</code>\uff09</li> <li>fullscreen \u4ec5\u7528\u4e8e\u9700\u8981\u5b8c\u6574\u5c55\u793a\u7684\u4e3b\u7a97\u53e3\uff0c\u5982\u5f53\u524d\u6d4f\u89c8\u5668\u9875\u9762\u6216\u5168\u5c4f\u7f16\u8f91\u5668</li> <li>\u7a97\u53e3\u5185\u5bb9\u4fdd\u6301\u7b80\u6d01\u3001\u6587\u672c\u5316\uff0c\u4fbf\u4e8e LLM \u6d88\u8d39\uff1b\u907f\u514d\u5d4c\u5165\u5927\u91cf\u539f\u59cb HTML \u6216\u4e8c\u8fdb\u5236\u6570\u636e</li> <li>\u53ca\u65f6\u53d1\u9001\u53d8\u66f4\u901a\u77e5\uff0c\u786e\u4fdd Agent \u83b7\u53d6\u5230\u6700\u65b0\u684c\u9762\u72b6\u6001</li> </ol>"},{"location":"specification/dpe-standardization-proposal/","title":"DPE (Document-Page-Element) \u7edf\u4e00\u6587\u6863\u8868\u793a\u6a21\u578b\u6807\u51c6\u5316\u63d0\u6848","text":"<p>\u7248\u672c: 1.0-draft \u65e5\u671f: 2026-02-14 \u4f5c\u8005: TFRobot \u56e2\u961f \u72b6\u6001: \u63d0\u6848\u9636\u6bb5</p>"},{"location":"specification/dpe-standardization-proposal/#\u6458\u8981","title":"\u6458\u8981","text":"<p>\u672c\u63d0\u6848\u4ecb\u7ecd DPE (Document-Page-Element) \u4e09\u5c42\u6587\u6863\u8868\u793a\u6a21\u578b\u2014\u2014\u4e00\u79cd\u9762\u5411 AI \u7cfb\u7edf\u7684\u7edf\u4e00\u6587\u6863\u6570\u636e\u7ed3\u6784\u3002DPE \u6a21\u578b\u4ee5\"\u6587\u6863-\u9875\u9762-\u5143\u7d20\"\u7684\u4e09\u7ea7\u5c42\u6b21\u7ed3\u6784\uff0c\u5c06\u4f20\u7edf\u8ba1\u7b97\u673a\u4e0a\u51e0\u4e4e\u6240\u6709\u4e3b\u6d41\u6587\u6863\u683c\u5f0f\uff08PDF\u3001Word\u3001Excel\u3001PPT\u3001HTML\u3001\u90ae\u4ef6\u3001\u56fe\u7247\u3001\u4ee3\u7801\u4ed3\u5e93\u7b49 30+ \u79cd\uff09\u7edf\u4e00\u6620\u5c04\u5230\u540c\u4e00\u5957\u6570\u636e\u6a21\u578b\u4e2d\uff0c\u4f7f\u4e0a\u5c42 AI \u5e94\u7528\u80fd\u591f\u4ee5\u4e00\u81f4\u7684\u65b9\u5f0f\u8bfb\u53d6\u3001\u68c0\u7d22\u3001\u63a8\u7406\u548c\u64cd\u4f5c\u4efb\u610f\u6587\u6863\u5185\u5bb9\u3002</p> <p>DPE \u6a21\u578b\u5df2\u5728 TFRobot \u667a\u80fd\u4f53\u5e73\u53f0\u4e2d\u7ecf\u8fc7\u5de5\u7a0b\u9a8c\u8bc1\uff0c\u652f\u6491\u4e86\u4ece\u6587\u6863\u89e3\u6790\u3001\u5411\u91cf\u68c0\u7d22\u3001\u77e5\u8bc6\u56fe\u8c31\u6784\u5efa\u5230\u591a\u6b65\u63a8\u7406\u7684\u5b8c\u6574 AI \u5904\u7406\u94fe\u8def\u3002\u6211\u4eec\u5efa\u8bae\u5c06 DPE \u7ed3\u6784\u7eb3\u5165\u534f\u8bae\u7684\u6807\u51c6\u6587\u6863\u8868\u793a\u683c\u5f0f\u3002</p>"},{"location":"specification/dpe-standardization-proposal/#1-\u95ee\u9898\u80cc\u666f\u4e3a\u4ec0\u4e48\u9700\u8981\u7edf\u4e00\u6587\u6863\u6a21\u578b","title":"1. \u95ee\u9898\u80cc\u666f\uff1a\u4e3a\u4ec0\u4e48\u9700\u8981\u7edf\u4e00\u6587\u6863\u6a21\u578b\uff1f","text":""},{"location":"specification/dpe-standardization-proposal/#11-\u73b0\u72b6\u788e\u7247\u5316\u7684\u6587\u6863\u4e16\u754c","title":"1.1 \u73b0\u72b6\uff1a\u788e\u7247\u5316\u7684\u6587\u6863\u4e16\u754c","text":"<p>\u5f53\u4eca\u4fe1\u606f\u4e16\u754c\u7684\u6587\u6863\u7c7b\u578b\u9ad8\u5ea6\u788e\u7247\u5316\uff1a</p> \u7c7b\u522b \u5178\u578b\u683c\u5f0f \u5185\u5bb9\u7279\u5f81 \u6392\u7248\u6587\u6863 PDF, DOCX, ODT, RTF \u9875\u9762\u5e03\u5c40\u3001\u6bb5\u843d\u3001\u8868\u683c\u3001\u56fe\u7247 \u6f14\u793a\u6587\u7a3f PPTX, PPT \u5e7b\u706f\u7247\u3001\u6587\u672c\u6846\u3001\u56fe\u8868 \u7535\u5b50\u8868\u683c XLSX, CSV, TSV \u5de5\u4f5c\u8868\u3001\u884c\u5217\u3001\u516c\u5f0f \u7f51\u9875\u5185\u5bb9 HTML, XML, Markdown DOM \u7ed3\u6784\u3001\u94fe\u63a5\u3001\u591a\u5a92\u4f53 \u901a\u4fe1\u5185\u5bb9 EML, MSG \u6536\u53d1\u4eba\u3001\u4e3b\u9898\u3001\u6b63\u6587\u3001\u9644\u4ef6 \u56fe\u50cf\u6587\u4ef6 PNG, JPG, TIFF, BMP, HEIC \u50cf\u7d20\u6570\u636e\u3001OCR \u6587\u672c \u7535\u5b50\u4e66 EPUB \u7ae0\u8282\u3001\u76ee\u5f55\u3001\u6b63\u6587 \u4ee3\u7801\u4ed3\u5e93 Python/Java/JS/TS Repo \u6587\u4ef6\u6811\u3001\u51fd\u6570\u3001\u7c7b\u3001\u6ce8\u91ca <p>\u6bcf\u79cd\u683c\u5f0f\u90fd\u6709\u81ea\u5df1\u7684\u89e3\u6790\u5e93\u3001\u6570\u636e\u7ed3\u6784\u548c\u8bbf\u95ee\u65b9\u5f0f\u3002\u5bf9\u4e8e\u9700\u8981\u5904\u7406\u591a\u79cd\u6587\u6863\u7684 AI \u7cfb\u7edf\u6765\u8bf4\uff0c\u8fd9\u610f\u5473\u7740\uff1a</p> <ul> <li>N \u79cd\u683c\u5f0f \u00d7 M \u79cd AI \u80fd\u529b = N\u00d7M \u79cd\u9002\u914d\u903b\u8f91\uff0c\u7ec4\u5408\u7206\u70b8</li> <li>\u6bcf\u79cd\u683c\u5f0f\u7684\u5143\u6570\u636e\u8bed\u4e49\u4e0d\u540c\uff08PDF \u6709\"\u9875\"\uff0cExcel \u6709\"Sheet\"\uff0cPPT \u6709\"\u5e7b\u706f\u7247\"\uff09\uff0c\u96be\u4ee5\u7edf\u4e00\u68c0\u7d22</li> <li>\u7a7a\u95f4\u4fe1\u606f\u8868\u8fbe\u4e0d\u4e00\u81f4\uff08PDF \u7528 Point \u5750\u6807\u7cfb\uff0c\u56fe\u7247\u7528 Pixel \u5750\u6807\u7cfb\uff09\uff0c\u5e03\u5c40\u5206\u6790\u56f0\u96be</li> </ul>"},{"location":"specification/dpe-standardization-proposal/#12-\u6838\u5fc3\u9700\u6c42","title":"1.2 \u6838\u5fc3\u9700\u6c42","text":"<p>\u4e00\u4e2a\u597d\u7684\u7edf\u4e00\u6587\u6863\u6a21\u578b\u9700\u8981\u540c\u65f6\u6ee1\u8db3\uff1a</p> <ol> <li>\u8868\u8fbe\u529b\uff1a\u80fd\u5fe0\u5b9e\u8868\u793a\u5404\u79cd\u6587\u6863\u683c\u5f0f\u7684\u5185\u5bb9\u4e0e\u7ed3\u6784\uff0c\u4e0d\u4e22\u5931\u5173\u952e\u4fe1\u606f</li> <li>\u7edf\u4e00\u6027\uff1a\u4e0a\u5c42\u7cfb\u7edf\u53ea\u9700\u9762\u5bf9\u4e00\u5957\u63a5\u53e3\uff0c\u4e0d\u5fc5\u5173\u5fc3\u5e95\u5c42\u683c\u5f0f\u5dee\u5f02</li> <li>\u53ef\u6269\u5c55\u6027\uff1a\u65b0\u6587\u6863\u7c7b\u578b\u6216\u65b0\u5143\u6570\u636e\u5b57\u6bb5\u53ef\u4ee5\u65e0\u7f1d\u52a0\u5165\uff0c\u4e0d\u7834\u574f\u73b0\u6709\u7ed3\u6784</li> <li>AI \u53cb\u597d\uff1a\u7ed3\u6784\u5929\u7136\u9002\u914d\u5411\u91cf\u68c0\u7d22\u3001\u6587\u672c\u5206\u7247\u3001\u4e0a\u4e0b\u6587\u7a97\u53e3\u7ba1\u7406\u7b49 AI \u5de5\u4f5c\u6d41</li> <li>\u7a7a\u95f4\u611f\u77e5\uff1a\u4fdd\u7559\u6587\u6863\u7684\u5e03\u5c40\u4fe1\u606f\uff0c\u652f\u6301\u89c6\u89c9\u7406\u89e3\u548c\u5b9a\u4f4d</li> </ol>"},{"location":"specification/dpe-standardization-proposal/#2-dpe-\u6a21\u578b\u8bbe\u8ba1","title":"2. DPE \u6a21\u578b\u8bbe\u8ba1","text":""},{"location":"specification/dpe-standardization-proposal/#21-\u6838\u5fc3\u76f4\u89c9\u6587\u6863\u7684\u6700\u5927\u516c\u56e0\u6570","title":"2.1 \u6838\u5fc3\u76f4\u89c9\uff1a\u6587\u6863\u7684\"\u6700\u5927\u516c\u56e0\u6570\"","text":"<p>DPE \u6a21\u578b\u7684\u8bbe\u8ba1\u51fa\u53d1\u70b9\u662f\u4e00\u4e2a\u7b80\u5355\u4f46\u6df1\u523b\u7684\u89c2\u5bdf\uff1a</p> <p>\u51e0\u4e4e\u6240\u6709\u6587\u6863\u683c\u5f0f\uff0c\u5728\u6982\u5ff5\u4e0a\u90fd\u53ef\u4ee5\u62c6\u89e3\u4e3a\u4e09\u4e2a\u5c42\u6b21\uff1a\u4e00\u4e2a\u6587\u6863\u5305\u542b\u82e5\u5e72\"\u9875\u9762\"\uff0c\u6bcf\u4e2a\u9875\u9762\u5305\u542b\u82e5\u5e72\"\u5185\u5bb9\u5143\u7d20\"\u3002</p> <ul> <li>PDF \u6709\u7269\u7406\u9875\u9762\uff0c\u6bcf\u9875\u6709\u6587\u672c\u5757\u3001\u56fe\u7247\u3001\u8868\u683c</li> <li>Word \u6709\u903b\u8f91\u9875\u9762\uff08\u901a\u8fc7\u5206\u9875\u7b26\u5212\u5206\uff09\uff0c\u6bcf\u9875\u6709\u6bb5\u843d\u3001\u5217\u8868\u3001\u56fe\u7247</li> <li>PPT \u6709\u5e7b\u706f\u7247\uff0c\u6bcf\u5f20\u6709\u6587\u672c\u6846\u3001\u56fe\u8868</li> <li>Excel \u6709\u5de5\u4f5c\u8868\uff08Sheet\uff09\uff0c\u6bcf\u4e2a Sheet \u6709\u5355\u5143\u683c\u548c\u884c</li> <li>HTML \u6709\u8282/\u533a\u5757\uff0c\u6bcf\u4e2a\u533a\u5757\u6709\u6587\u672c\u3001\u94fe\u63a5\u3001\u8868\u683c</li> <li>\u90ae\u4ef6\u6709\"\u4fe1\"\u672c\u8eab\u4f5c\u4e3a\u4e00\u4e2a\u9875\u9762\uff0c\u5305\u542b\u53d1\u4ef6\u4eba\u3001\u6b63\u6587\u3001\u9644\u4ef6</li> <li>\u56fe\u7247\u662f\u5355\u9875\u6587\u6863\uff0cOCR \u540e\u4ea7\u51fa\u6587\u672c\u5143\u7d20</li> <li>\u4ee3\u7801\u4ed3\u5e93\u6709\u6587\u4ef6\uff08\u9875\u9762\uff09\uff0c\u6bcf\u4e2a\u6587\u4ef6\u6709\u51fd\u6570/\u7c7b/\u6ce8\u91ca\uff08\u5143\u7d20\uff09</li> </ul> <p>\u8fd9\u5c31\u662f DPE \u4e09\u5c42\u7ed3\u6784\u7684\u6838\u5fc3\u76f4\u89c9\u2014\u2014\u5b83\u4e0d\u662f\u67d0\u79cd\u6587\u6863\u683c\u5f0f\u7684\u8d85\u96c6\uff0c\u800c\u662f\u6240\u6709\u6587\u6863\u683c\u5f0f\u7684\u8bed\u4e49\u516c\u56e0\u6570\u3002</p>"},{"location":"specification/dpe-standardization-proposal/#22-\u4e09\u5c42\u67b6\u6784","title":"2.2 \u4e09\u5c42\u67b6\u6784","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   Document                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 file_uri: \u552f\u4e00\u8d44\u6e90\u5b9a\u4f4d                        \u2502 \u2502\n\u2502  \u2502 file_type: \u6e90\u683c\u5f0f\u679a\u4e3e (30+ \u79cd)               \u2502 \u2502\n\u2502  \u2502 doc_metadata: \u6587\u6863\u7ea7\u5143\u6570\u636e                    \u2502 \u2502\n\u2502  \u2502 keywords: \u6587\u6863\u7ea7\u5173\u952e\u8bcd                        \u2502 \u2502\n\u2502  \u2502 entrance_page_id: \u5feb\u901f\u5165\u53e3\u6307\u9488                \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                      \u2502 1:N                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502                   DocPage                     \u2502 \u2502\n\u2502  \u2502  number: \u9875\u9762\u5e8f\u53f7                             \u2502 \u2502\n\u2502  \u2502  title: \u9875\u9762\u6807\u9898                              \u2502 \u2502\n\u2502  \u2502  keywords: \u9875\u9762\u7ea7\u5173\u952e\u8bcd                       \u2502 \u2502\n\u2502  \u2502  entrance_ele_id: \u5165\u53e3\u5143\u7d20\u6307\u9488                \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                      \u2502 1:N                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502                 DocElement                    \u2502 \u2502\n\u2502  \u2502  text: \u5185\u5bb9\u6587\u672c                               \u2502 \u2502\n\u2502  \u2502  category: \u5143\u7d20\u7c7b\u578b (\u53ef\u5224\u522b\u8054\u5408\u4f53)             \u2502 \u2502\n\u2502  \u2502  element_id: \u4e0d\u53ef\u53d8\u6e90 ID (UUID)               \u2502 \u2502\n\u2502  \u2502  ele_metadata: \u5143\u7d20\u7ea7\u5143\u6570\u636e (40+ \u5b57\u6bb5)         \u2502 \u2502\n\u2502  \u2502  keywords: \u5143\u7d20\u7ea7\u5173\u952e\u8bcd                        \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"specification/dpe-standardization-proposal/#23-\u8bbe\u8ba1\u539f\u5219","title":"2.3 \u8bbe\u8ba1\u539f\u5219","text":"\u539f\u5219 \u5b9e\u73b0\u65b9\u5f0f \u6700\u5c0f\u60ca\u8bb6 \u4e09\u5c42\u7ed3\u6784\u6620\u5c04\u5230\u4eba\u5bf9\u6587\u6863\u7684\u76f4\u89c9\u8ba4\u77e5\u2014\u2014\u7ffb\u5f00\u4e00\u4e2a\u6587\u6863\uff0c\u7ffb\u5230\u67d0\u9875\uff0c\u770b\u5230\u67d0\u6bb5\u5185\u5bb9 \u7c7b\u578b\u5b89\u5168 \u5168\u90e8\u4f7f\u7528 Pydantic \u6a21\u578b\u5efa\u6a21\uff0c\u63d0\u4f9b\u4e25\u683c\u7684\u7c7b\u578b\u6821\u9a8c\u548c JSON Schema \u5173\u6ce8\u70b9\u5206\u79bb \u5185\u5bb9\uff08text\uff09\u3001\u7ed3\u6784\uff08category/\u5c42\u7ea7\uff09\u3001\u4f4d\u7f6e\uff08coordinates\uff09\u3001\u8bed\u4e49\uff08metadata\uff09\u5b8c\u5168\u6b63\u4ea4 \u5f00\u653e-\u5c01\u95ed \u5143\u7d20\u7c7b\u578b\u901a\u8fc7\u7ee7\u627f\u6269\u5c55\uff08\u5f00\u653e\uff09\uff0c\u6838\u5fc3\u4e09\u5c42\u7ed3\u6784\u4e0d\u53d8\uff08\u5c01\u95ed\uff09 \u683c\u5f0f\u65e0\u5173 \u540c\u4e00\u4e2a <code>Document</code> \u5bf9\u8c61\uff0c\u65e0\u8bba\u6765\u81ea PDF \u8fd8\u662f Excel\uff0c\u4e0a\u5c42\u4ee3\u7801\u4e00\u89c6\u540c\u4ec1"},{"location":"specification/dpe-standardization-proposal/#3-\u6a21\u578b\u8be6\u7ec6\u8bbe\u8ba1","title":"3. \u6a21\u578b\u8be6\u7ec6\u8bbe\u8ba1","text":""},{"location":"specification/dpe-standardization-proposal/#31-document-\u5c42\u6587\u6863\u7684\u5c01\u9762","title":"3.1 Document \u5c42\u2014\u2014\u6587\u6863\u7684\"\u5c01\u9762\"","text":"<p>Document \u662f\u6574\u4e2a\u6a21\u578b\u7684\u6839\u8282\u70b9\uff0c\u627f\u8f7d\u6587\u6863\u7ea7\u522b\u7684\u5168\u5c40\u4fe1\u606f\uff1a</p> <pre><code>Document\n\u251c\u2500\u2500 doc_id: int?          # \u6301\u4e45\u5316\u4e3b\u952e\uff08\u6570\u636e\u5e93\u81ea\u589e\uff09\n\u251c\u2500\u2500 file_uri: URL         # \u6587\u6863\u7684\u552f\u4e00\u8d44\u6e90\u6807\u8bc6\u7b26\uff08\u5fc5\u586b\uff09\n\u251c\u2500\u2500 file_type: TFFileType # \u6e90\u683c\u5f0f\u679a\u4e3e\n\u251c\u2500\u2500 keywords: [str]?      # \u5168\u6587\u5173\u952e\u8bcd\n\u251c\u2500\u2500 pages: [DocPage]      # \u5b50\u9875\u9762\u96c6\u5408\n\u251c\u2500\u2500 entrance_page_id: int?# \u5165\u53e3\u9875\u9762\u5feb\u901f\u6307\u9488\n\u2514\u2500\u2500 doc_metadata           # \u6587\u6863\u7ea7\u5143\u6570\u636e\n    \u251c\u2500\u2500 created_at: datetime\n    \u251c\u2500\u2500 last_modified: datetime\n    \u251c\u2500\u2500 filename: str?\n    \u251c\u2500\u2500 summary: str?              # \u6587\u6863\u6458\u8981\n    \u251c\u2500\u2500 languages: [str]?          # \u8bed\u8a00\u5217\u8868 (ISO 639-3)\n    \u251c\u2500\u2500 forward_citation_uris: [URL]?   # \u6b63\u5411\u5f15\u7528\uff08\u8c01\u5f15\u7528\u4e86\u6211\uff09\n    \u251c\u2500\u2500 backward_citation_uris: [URL]?  # \u53cd\u5411\u5f15\u7528\uff08\u6211\u5f15\u7528\u4e86\u8c01\uff09\n    \u251c\u2500\u2500 global_dict: {str: str}?   # \u5168\u5c40\u6307\u4ee3\u6d88\u6b67\u5b57\u5178\n    \u2514\u2500\u2500 ...\uff08\u5141\u8bb8\u81ea\u5b9a\u4e49\u6269\u5c55\u5b57\u6bb5\uff09\n</code></pre> <p>\u8bbe\u8ba1\u4eae\u70b9\uff1a</p> <ul> <li><code>file_uri</code> \u4f5c\u4e3a\u552f\u4e00\u6807\u8bc6\uff1a\u91c7\u7528 URI \u800c\u975e\u6587\u4ef6\u8def\u5f84\uff0c\u4f7f\u5f97\u672c\u5730\u6587\u4ef6 (<code>file:///...</code>)\u3001\u7f51\u7edc\u8d44\u6e90 (<code>https://...</code>)\u3001\u5bf9\u8c61\u5b58\u50a8 (<code>s3://...</code>) \u90fd\u80fd\u7edf\u4e00\u5bfb\u5740\u3002</li> <li><code>entrance_page_id</code> \u5feb\u901f\u6307\u9488\uff1a\u5bf9\u4e8e\u5927\u578b\u6587\u6863\uff0c\u76f4\u63a5\u8df3\u8f6c\u5230\u6700\u91cd\u8981\u7684\u9875\u9762\uff0c\u4e0d\u5fc5\u904d\u5386\u5168\u90e8\u3002</li> <li><code>global_dict</code> \u5168\u5c40\u6307\u4ee3\u6d88\u6b67\uff1a\u5728\u5408\u540c\u7b49\u6587\u6863\u4e2d\uff0c\"\u7532\u65b9\"\u3001\"\u4e59\u65b9\" \u8fd9\u6837\u7684\u6307\u4ee3\u9700\u8981\u5728\u6587\u6863\u7ea7\u522b\u7edf\u4e00\u89e3\u6790\uff08\u5982 <code>{\"\u7532\u65b9\": \"\u5317\u4eacXX\u79d1\u6280\u6709\u9650\u516c\u53f8\"}</code>\uff09\uff0c\u907f\u514d\u5728\u6bcf\u4e2a Element \u4e0a\u91cd\u590d\u89e3\u6790\u3002</li> <li>\u53cc\u5411\u5f15\u7528\u94fe\uff1a<code>forward/backward_citation_uris</code> \u6784\u5efa\u6587\u6863\u95f4\u7684\u5f15\u7528\u56fe\u8c31\uff0c\u652f\u6301\u77e5\u8bc6\u5173\u8054\u3002</li> </ul>"},{"location":"specification/dpe-standardization-proposal/#32-docpage-\u5c42\u6587\u6863\u7684\u5e27","title":"3.2 DocPage \u5c42\u2014\u2014\u6587\u6863\u7684\"\u5e27\"","text":"<p>DocPage \u662f\u6587\u6863\u5185\u5bb9\u7684\u7ec4\u7ec7\u5355\u5143\uff0c\u5bf9\u5e94\u4eba\u9605\u8bfb\u6587\u6863\u65f6\"\u7ffb\u4e00\u9875\"\u7684\u76f4\u89c9\uff1a</p> <pre><code>DocPage\n\u251c\u2500\u2500 page_id: int?         # \u6301\u4e45\u5316\u4e3b\u952e\n\u251c\u2500\u2500 doc_id: int?          # \u5916\u952e\u2192Document\n\u251c\u2500\u2500 number: int           # \u9875\u9762\u5e8f\u53f7\n\u251c\u2500\u2500 title: str?           # \u9875\u9762\u6807\u9898\n\u251c\u2500\u2500 keywords: [str]?      # \u9875\u9762\u5173\u952e\u8bcd\n\u251c\u2500\u2500 elements: [DocElement]# \u5b50\u5143\u7d20\u96c6\u5408\uff08\u9605\u8bfb\u5e8f\u6392\u5217\uff09\n\u2514\u2500\u2500 entrance_ele_id: int? # \u5165\u53e3\u5143\u7d20\u5feb\u901f\u6307\u9488\n</code></pre> <p>\u4e3a\u4ec0\u4e48\u9700\u8981 Page \u8fd9\u4e00\u5c42\uff1f</p> <p>\u8fd9\u662f DPE \u6a21\u578b\u4e0e\u6241\u5e73\u5f0f\u6587\u6863\u6a21\u578b\uff08\u5982\"\u6587\u6863 \u2192 \u5143\u7d20\u5217\u8868\"\uff09\u7684\u6838\u5fc3\u533a\u522b\u3002Page \u5c42\u7684\u5b58\u5728\u89e3\u51b3\u4e86\u4e09\u4e2a\u5173\u952e\u95ee\u9898\uff1a</p> <ol> <li> <p>\u5206\u9875\u8bed\u4e49\u7684\u4fdd\u7559\uff1aPDF \u7684\u7269\u7406\u9875\u3001PPT \u7684\u5e7b\u706f\u7247\u3001Excel \u7684\u5de5\u4f5c\u8868\u2014\u2014\u8fd9\u4e9b\"\u9875\u9762\"\u8fb9\u754c\u672c\u8eab\u643a\u5e26\u8bed\u4e49\u4fe1\u606f\uff08\u4f5c\u8005\u6709\u610f\u4e3a\u4e4b\u7684\u4fe1\u606f\u5206\u7ec4\uff09\uff0c\u6241\u5e73\u5316\u4f1a\u4e22\u5931\u8fd9\u4e00\u4fe1\u606f\u3002</p> </li> <li> <p>\u4e0a\u4e0b\u6587\u7a97\u53e3\u7684\u5929\u7136\u8fb9\u754c\uff1aLLM \u6709\u4e0a\u4e0b\u6587\u957f\u5ea6\u9650\u5236\u3002Page \u63d0\u4f9b\u4e86\u4e00\u4e2a\u81ea\u7136\u7684\u3001\u6709\u8bed\u4e49\u7684\u5206\u7247\u8fb9\u754c\u2014\u2014\u4e00\u9875\u5185\u5bb9\u901a\u5e38\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u4fe1\u606f\u5355\u5143\uff0c\u65e2\u4e0d\u4f1a\u592a\u957f\uff08\u8d85\u51fa\u7a97\u53e3\uff09\uff0c\u4e5f\u4e0d\u4f1a\u592a\u788e\uff08\u4e22\u5931\u4e0a\u4e0b\u6587\uff09\u3002</p> </li> <li> <p>\u7a7a\u95f4\u5750\u6807\u7cfb\u7684\u4f5c\u7528\u57df\uff1a\u540c\u4e00\u9875\u9762\u5185\u7684\u6240\u6709\u5143\u7d20\u5171\u4eab\u5750\u6807\u7a7a\u95f4\uff08\u5982 PDF \u4e00\u9875\u7684\u5bbd\u9ad8\uff09\uff0cPage \u662f\u5750\u6807\u7cfb\u7684\u81ea\u7136\u4f5c\u7528\u57df\u3002</p> </li> </ol> <p>Page \u5bf9\u4e0d\u540c\u683c\u5f0f\u7684\u8bed\u4e49\u6620\u5c04\uff1a</p> \u6e90\u683c\u5f0f Page \u7684\u542b\u4e49 number \u7684\u8bed\u4e49 PDF \u7269\u7406\u9875\u9762 \u9875\u7801 DOCX \u903b\u8f91\u9875\u9762\uff08\u5206\u9875\u7b26\u5206\u5272\uff09 \u9875\u5e8f PPTX \u5e7b\u706f\u7247 \u5e7b\u706f\u7247\u5e8f\u53f7 XLSX \u5de5\u4f5c\u8868 (Sheet) Sheet \u7d22\u5f15 HTML <code>&lt;section&gt;</code> / <code>&lt;article&gt;</code> / \u903b\u8f91\u5757 \u533a\u5757\u5e8f\u53f7 EML \u90ae\u4ef6\u6574\u4f53 0\uff08\u5355\u9875\uff09 Image \u56fe\u50cf\u81ea\u8eab 0\uff08\u5355\u9875\uff09 Code Repo \u6e90\u6587\u4ef6 \u6587\u4ef6\u7d22\u5f15"},{"location":"specification/dpe-standardization-proposal/#33-docelement-\u5c42\u6587\u6863\u7684\u539f\u5b50","title":"3.3 DocElement \u5c42\u2014\u2014\u6587\u6863\u7684\"\u539f\u5b50\"","text":"<p>DocElement \u662f DPE \u6a21\u578b\u7684\u6838\u5fc3\u2014\u2014\u6587\u6863\u5185\u5bb9\u7684\u6700\u5c0f\u8bed\u4e49\u5355\u5143\uff1a</p> <pre><code>DocElement (\u57fa\u7c7b)\n\u251c\u2500\u2500 ele_id: int?              # \u6301\u4e45\u5316\u4e3b\u952e\uff08\u6570\u636e\u5e93\u81ea\u589e\uff09\n\u251c\u2500\u2500 page_id: int?             # \u5916\u952e\u2192DocPage\n\u251c\u2500\u2500 text: str                 # \u5185\u5bb9\u6587\u672c\uff08\u53ef\u6e05\u6d17\uff09\n\u251c\u2500\u2500 category: str             # \u5143\u7d20\u7c7b\u578b\u6807\u8bc6\u7b26\uff08\u5224\u522b\u8054\u5408\u4f53\u7684\u9274\u522b\u5668\uff09\n\u251c\u2500\u2500 element_id: UUID|str      # \u4e0d\u53ef\u53d8\u6e90 ID\n\u251c\u2500\u2500 keywords: [str]?          # \u5143\u7d20\u5173\u952e\u8bcd\n\u2514\u2500\u2500 ele_metadata               # \u5143\u7d20\u7ea7\u5143\u6570\u636e (40+ \u5b57\u6bb5)\n</code></pre>"},{"location":"specification/dpe-standardization-proposal/#331-\u5224\u522b\u8054\u5408\u4f53-discriminated-union--\u7c7b\u578b\u5b89\u5168\u7684\u591a\u6001","title":"3.3.1 \u5224\u522b\u8054\u5408\u4f53 (Discriminated Union) \u2014\u2014 \u7c7b\u578b\u5b89\u5168\u7684\u591a\u6001","text":"<p>DPE \u6a21\u578b\u5bf9\u5143\u7d20\u7c7b\u578b\u7684\u5efa\u6a21\uff0c\u91c7\u7528\u4e86\u4ee5 <code>category</code> \u4e3a\u9274\u522b\u5668\u7684\u5224\u522b\u8054\u5408\u4f53\u6a21\u5f0f\u3002\u8fd9\u662f\u6574\u4e2a\u8bbe\u8ba1\u4e2d\u6700\u7cbe\u5de7\u7684\u90e8\u5206\u4e4b\u4e00\u3002</p> <p>\u5f53\u524d\u5df2\u5b9a\u4e49\u7684 19 \u79cd\u5143\u7d20\u7c7b\u578b\uff1a</p> <pre><code>DocElement (\u62bd\u8c61\u57fa\u7c7b)\n\u251c\u2500\u2500 TextElement (\u901a\u7528\u6587\u672c)\n\u2502   \u251c\u2500\u2500 Title               # \u6807\u9898\uff08\u652f\u6301 category_depth \u5c42\u7ea7\uff09\n\u2502   \u251c\u2500\u2500 NarrativeText       # \u6b63\u6587\u6bb5\u843d\n\u2502   \u251c\u2500\u2500 ListItem            # \u5217\u8868\u9879\uff08\u652f\u6301\u5d4c\u5957\u6df1\u5ea6\uff09\n\u2502   \u251c\u2500\u2500 Address             # \u5730\u5740\u4fe1\u606f\n\u2502   \u251c\u2500\u2500 EmailAddress        # \u90ae\u4ef6\u5730\u5740\n\u2502   \u251c\u2500\u2500 CompositeElement    # \u590d\u5408\u5757\uff08\u5206\u7247\u4ea7\u7269\uff09\n\u2502   \u251c\u2500\u2500 CodeSnippet         # \u4ee3\u7801\u7247\u6bb5\n\u2502   \u251c\u2500\u2500 FigureCaption       # \u56fe\u7247\u8bf4\u660e\n\u2502   \u251c\u2500\u2500 PageNumber          # \u9875\u7801\n\u2502   \u251c\u2500\u2500 Formula             # \u6570\u5b66\u516c\u5f0f\n\u2502   \u251c\u2500\u2500 Image               # \u56fe\u7247\uff08\u542b base64/path\uff09\n\u2502   \u251c\u2500\u2500 PageBreak           # \u5206\u9875\u7b26\n\u2502   \u251c\u2500\u2500 Table               # \u8868\u683c\uff08\u542b\u884c\u5217\u89e3\u6790\uff09\n\u2502   \u251c\u2500\u2500 TableChunk          # \u8868\u683c\u884c\u5757\n\u2502   \u251c\u2500\u2500 Header              # \u9875\u7709\n\u2502   \u251c\u2500\u2500 Footer              # \u9875\u811a\n\u2502   \u2514\u2500\u2500 FormKeysValues      # \u8868\u5355\u952e\u503c\u5bf9\n\u2514\u2500\u2500 CheckBoxElement          # \u590d\u9009\u6846\uff08\u542b checked \u72b6\u6001\uff09\n</code></pre> <p>\u8fd9\u79cd\u8bbe\u8ba1\u7684\u7cbe\u5999\u4e4b\u5904\uff1a</p> <ol> <li> <p>\u7edf\u4e00\u63a5\u53e3\uff0c\u5dee\u5f02\u9690\u85cf\uff1a\u6240\u6709\u5143\u7d20\u5171\u4eab <code>text</code>\u3001<code>category</code>\u3001<code>ele_metadata</code> \u4e09\u4e2a\u6838\u5fc3\u5b57\u6bb5\u3002\u4e0a\u5c42\u4ee3\u7801\u53ef\u4ee5\u7edf\u4e00\u904d\u5386\u3001\u68c0\u7d22\u548c\u5904\u7406\u6240\u6709\u5143\u7d20\uff0c\u53ea\u5728\u9700\u8981\u65f6\u901a\u8fc7 <code>category</code> \u9274\u522b\u5668\u505a\u7279\u5316\u5904\u7406\u3002</p> </li> <li> <p>\u7c7b\u578b\u5b89\u5168\u7684\u53cd\u5e8f\u5217\u5316\uff1a\u4ece JSON \u6216\u6570\u636e\u5e93\u53cd\u5e8f\u5217\u5316\u65f6\uff0c\u5de5\u5382\u65b9\u6cd5\u6839\u636e <code>category</code> \u5b57\u6bb5\u81ea\u52a8\u8def\u7531\u5230\u6b63\u786e\u7684\u5b50\u7c7b\uff0c\u65e0\u9700\u5916\u90e8\u7c7b\u578b\u6ce8\u518c\u8868\u3002</p> </li> <li> <p>\u5f00\u653e\u5f0f\u6269\u5c55\uff1a\u65b0\u589e\u5143\u7d20\u7c7b\u578b\u53ea\u9700\u7ee7\u627f <code>DocElement</code> \u5e76\u58f0\u660e <code>category: Literal[\"NewType\"]</code>\uff0c\u57fa\u7c7b\u7684 <code>__init_subclass__</code> \u81ea\u52a8\u5b8c\u6210\u6ce8\u518c\uff0c\u96f6\u914d\u7f6e\u3002</p> </li> <li> <p>\u8868\u683c\u7684\u7279\u6b8a\u5904\u7406\uff1a<code>Table</code> \u5143\u7d20\u5185\u7f6e\u4e86\u884c\u5217\u89e3\u6790\u80fd\u529b\u2014\u2014\u4ece HTML \u8868\u683c\u6216 Markdown \u8868\u683c\u4e2d\u81ea\u52a8\u63d0\u53d6\u8868\u5934\u548c\u6570\u636e\u884c\uff0c\u5e76\u62c6\u5206\u4e3a <code>TableChunk</code>\uff0c\u4f7f\u5f97\u8868\u683c\u5185\u5bb9\u53ef\u4ee5\u88ab LLM \u6309\u884c\u7406\u89e3\u3002</p> </li> </ol>"},{"location":"specification/dpe-standardization-proposal/#332-\u53cc-id-\u7cfb\u7edf","title":"3.3.2 \u53cc ID \u7cfb\u7edf","text":"<p>DPE \u6a21\u578b\u4e3a\u6bcf\u4e2a\u5143\u7d20\u7ef4\u62a4\u4e24\u5957 ID\uff1a</p> ID \u7c7b\u578b \u6765\u6e90 \u7528\u9014 <code>element_id</code> UUID/string \u6587\u6863\u89e3\u6790\u65f6\u751f\u6210\uff0c\u4e0d\u53ef\u53d8 \u5143\u7d20\u8eab\u4efd\u8ffd\u8e2a\u3001\u8de8\u7cfb\u7edf\u5f15\u7528\u3001parent/related \u5173\u7cfb <code>ele_id</code> \u81ea\u589e\u6574\u6570 \u6570\u636e\u5e93\u5165\u5e93\u65f6\u5206\u914d \u6301\u4e45\u5316\u4e3b\u952e\u3001\u5916\u952e\u5173\u8054\u3001\u6392\u5e8f <p>\u4e3a\u4ec0\u4e48\u9700\u8981\u53cc ID\uff1f</p> <p><code>element_id</code> \u662f\u5143\u7d20\u7684\"\u8eab\u4efd\u8bc1\u53f7\"\u2014\u2014\u4ece\u6587\u6863\u88ab\u89e3\u6790\u7684\u90a3\u4e00\u523b\u8d77\u5c31\u786e\u5b9a\u4e86\uff0c\u4e0d\u968f\u5b58\u50a8\u4f4d\u7f6e\u53d8\u5316\u3002\u8fd9\u5bf9\u4e8e\u6784\u5efa\u5143\u7d20\u95f4\u7684\u5173\u7cfb\u56fe\uff08<code>parent_id</code>\u3001<code>related_ids</code>\uff09\u81f3\u5173\u91cd\u8981\u2014\u2014\u5728\u5143\u7d20\u5c1a\u672a\u5165\u5e93\u65f6\u5c31\u9700\u8981\u80fd\u591f\u76f8\u4e92\u5f15\u7528\u3002</p> <p><code>ele_id</code> \u662f\u6570\u636e\u5e93\u7684\"\u5de5\u53f7\"\u2014\u2014\u81ea\u589e\u6574\u6570\uff0c\u9ad8\u6548\u7d22\u5f15\uff0c\u9002\u5408\u505a\u5916\u952e\u548c\u6392\u5e8f\u4f9d\u636e\u3002</p> <p>\u4e24\u8005\u7684\u5206\u79bb\u4f7f\u5f97 DPE \u6a21\u578b\u5728\"\u6587\u6863\u5904\u7406\u6d41\u6c34\u7ebf\"\uff08\u4e0d\u6d89\u53ca\u6570\u636e\u5e93\uff09\u548c\"\u6587\u6863\u5b58\u50a8\u7cfb\u7edf\"\uff08\u9700\u8981\u6570\u636e\u5e93\uff09\u4e24\u79cd\u573a\u666f\u4e0b\u90fd\u80fd\u826f\u597d\u8fd0\u4f5c\u3002</p>"},{"location":"specification/dpe-standardization-proposal/#34-\u5143\u6570\u636e\u4f53\u7cfb\u4fe1\u606f\u4e0d\u4e22\u5931\u7684\u5173\u952e","title":"3.4 \u5143\u6570\u636e\u4f53\u7cfb\u2014\u2014\u4fe1\u606f\u4e0d\u4e22\u5931\u7684\u5173\u952e","text":"<p>DPE \u6a21\u578b\u5728\u4e09\u4e2a\u5c42\u7ea7\u90fd\u914d\u5907\u4e86\u5143\u6570\u636e\uff0c\u5176\u4e2d\u5143\u7d20\u7ea7\u5143\u6570\u636e (<code>TFElementMetadata</code>) \u6700\u4e3a\u4e30\u5bcc\uff0c\u5305\u542b 40+ \u4e2a\u8bed\u4e49\u660e\u786e\u7684\u5b57\u6bb5\uff1a</p> <pre><code>TFElementMetadata\n\u251c\u2500\u2500 \u3010\u6587\u4ef6\u4fe1\u606f\u3011\n\u2502   \u251c\u2500\u2500 filename, filetype, last_modified\n\u2502   \u2514\u2500\u2500 encrypted (PDF \u52a0\u5bc6\u6807\u8bc6)\n\u2502\n\u251c\u2500\u2500 \u3010\u7ed3\u6784\u5173\u7cfb\u3011\n\u2502   \u251c\u2500\u2500 parent_id: ElementId        # \u7236\u5143\u7d20\uff08\u6811\u5f62\u7ed3\u6784\uff09\n\u2502   \u251c\u2500\u2500 related_ids: [ElementId]    # \u76f8\u5173\u5143\u7d20\uff08\u56fe\u7ed3\u6784\uff09\n\u2502   \u251c\u2500\u2500 category_depth: int         # \u5c42\u7ea7\u6df1\u5ea6\uff08\u6807\u9898/\u5217\u8868\u5d4c\u5957\uff09\n\u2502   \u2514\u2500\u2500 is_continuation: bool       # \u8de8\u9875\u7eed\u63a5\u6807\u8bb0\n\u2502\n\u251c\u2500\u2500 \u3010\u7a7a\u95f4\u4f4d\u7f6e\u3011\n\u2502   \u2514\u2500\u2500 coordinates                 # \u5750\u6807\u4fe1\u606f\n\u2502       \u251c\u2500\u2500 points: ((x1,y1), (x2,y2), ...)  # \u8fb9\u754c\u6846\u9876\u70b9\n\u2502       \u2514\u2500\u2500 system: CoordinateSystem          # \u5750\u6807\u7cfb\n\u2502           \u251c\u2500\u2500 PixelSpace (\u5c4f\u5e55\u7cfb\uff0c\u539f\u70b9\u5de6\u4e0a\uff0cy\u2193)\n\u2502           \u251c\u2500\u2500 PointSpace (\u7b1b\u5361\u5c14\u7cfb\uff0c\u539f\u70b9\u5de6\u4e0b\uff0cy\u2191)\n\u2502           \u2514\u2500\u2500 RelativeCoordinateSystem (\u5f52\u4e00\u5316\uff0c[0,1]\u00b2)\n\u2502\n\u251c\u2500\u2500 \u3010\u89c6\u89c9\u4fe1\u606f\u3011\n\u2502   \u251c\u2500\u2500 text_as_html: str           # HTML \u683c\u5f0f\u4fdd\u7559\uff08\u8868\u683c\uff09\n\u2502   \u251c\u2500\u2500 image_path / image_base64   # \u56fe\u50cf\u6570\u636e\n\u2502   \u251c\u2500\u2500 image_mime_type             # \u56fe\u50cf\u683c\u5f0f\n\u2502   \u251c\u2500\u2500 emphasized_text_contents    # \u52a0\u7c97/\u659c\u4f53\u6587\u672c\n\u2502   \u2514\u2500\u2500 detection_class_prob        # AI \u68c0\u6d4b\u7f6e\u4fe1\u5ea6\n\u2502\n\u251c\u2500\u2500 \u3010\u8bed\u4e49\u6807\u8bb0\u3011\n\u2502   \u251c\u2500\u2500 languages: [str]            # ISO 639-3 \u8bed\u8a00\u6807\u8bc6\n\u2502   \u251c\u2500\u2500 is_active / is_deprecated   # \u751f\u547d\u5468\u671f\u72b6\u6001\n\u2502   \u251c\u2500\u2500 is_narrative                # \u662f\u5426\u6b63\u6587\u5185\u5bb9\n\u2502   \u2514\u2500\u2500 header_info                 # \u8868\u683c\u8868\u5934\u4fe1\u606f\n\u2502\n\u251c\u2500\u2500 \u3010\u5206\u9875\u4fe1\u606f\u3011\n\u2502   \u251c\u2500\u2500 page_number: int            # \u6e90\u6587\u6863\u9875\u7801\n\u2502   \u2514\u2500\u2500 page_name: str              # \u5de5\u4f5c\u8868\u540d\u79f0\n\u2502\n\u251c\u2500\u2500 \u3010\u90ae\u4ef6\u4e13\u5c5e\u3011\n\u2502   \u251c\u2500\u2500 sent_from / sent_to         # \u6536\u53d1\u4eba\n\u2502   \u2514\u2500\u2500 subject                     # \u4e3b\u9898\n\u2502\n\u251c\u2500\u2500 \u3010\u8d85\u94fe\u63a5\u3011\n\u2502   \u251c\u2500\u2500 link_texts / link_urls      # \u94fe\u63a5\u6587\u672c\u4e0e\u76ee\u6807\n\u2502   \u2514\u2500\u2500 links: [{text, url, start_index}]  # \u5e26\u4f4d\u7f6e\u7684\u94fe\u63a5\n\u2502\n\u251c\u2500\u2500 \u3010\u534f\u4f5c\u4fe1\u606f\u3011\n\u2502   \u251c\u2500\u2500 editor / editor_email / editor_id\n\u2502   \u2514\u2500\u2500 data_source                 # \u6570\u636e\u6e90\u8ffd\u8e2a\n\u2502\n\u2514\u2500\u2500 ...\uff08extra=\"allow\"\uff0c\u652f\u6301\u4efb\u610f\u6269\u5c55\u5b57\u6bb5\uff09\n</code></pre> <p>\u8bbe\u8ba1\u4eae\u70b9\uff1a</p> <ul> <li><code>extra=\"allow\"</code> \u7b56\u7565\uff1a\u6587\u6863\u7ea7\u548c\u5143\u7d20\u7ea7\u5143\u6570\u636e\u90fd\u5141\u8bb8\u989d\u5916\u5b57\u6bb5\u3002\u8fd9\u610f\u5473\u7740\u7279\u5b9a\u9886\u57df\uff08\u5982\u533b\u7597\u3001\u6cd5\u5f8b\u3001\u91d1\u878d\uff09\u53ef\u4ee5\u5728\u4e0d\u4fee\u6539\u6838\u5fc3\u6a21\u578b\u7684\u60c5\u51b5\u4e0b\u9644\u52a0\u9886\u57df\u7279\u5b9a\u7684\u5143\u6570\u636e\u3002</li> <li>\u5750\u6807\u7cfb\u7edf\u4e00\u8f6c\u6362\uff1a\u4e0d\u540c\u6587\u6863\u683c\u5f0f\u4f7f\u7528\u4e0d\u540c\u7684\u5750\u6807\u7cfb\uff08PDF \u7528 PointSpace\uff0c\u56fe\u7247\u7528 PixelSpace\uff09\uff0cDPE \u6a21\u578b\u5185\u7f6e\u4e86\u5750\u6807\u7cfb\u95f4\u7684\u7ebf\u6027\u53d8\u6362\uff0c\u901a\u8fc7 <code>RelativeCoordinateSystem</code> (\u5f52\u4e00\u5316\u5230 [0,1]\u00b2) \u4f5c\u4e3a\u4e2d\u95f4\u6865\u6881\uff0c\u5b9e\u73b0\u4efb\u610f\u5750\u6807\u7cfb\u4e4b\u95f4\u7684\u65e0\u635f\u8f6c\u6362\u3002</li> </ul>"},{"location":"specification/dpe-standardization-proposal/#4-\u8bbe\u8ba1\u5de7\u5999\u4e4b\u5904","title":"4. \u8bbe\u8ba1\u5de7\u5999\u4e4b\u5904","text":""},{"location":"specification/dpe-standardization-proposal/#41-\u4ee5\u4eba\u7684\u9605\u8bfb\u987a\u5e8f\u4e3a\u5e8f","title":"4.1 \"\u4ee5\u4eba\u7684\u9605\u8bfb\u987a\u5e8f\u4e3a\u5e8f\"","text":"<p>DocPage \u7684\u6587\u6863\u6ce8\u91ca\u4e2d\u5199\u9053\uff1a</p> <p>\"A page consists of an ordered set of elements. The intent of the ordering is to align with the order in which a person would read the document.\"</p> <p>\u8fd9\u662f\u4e00\u4e2a\u770b\u4f3c\u7b80\u5355\u4f46\u5f71\u54cd\u6df1\u8fdc\u7684\u8bbe\u8ba1\u51b3\u7b56\u3002Element \u5728 Page \u5185\u7684\u6392\u5217\u4e0d\u662f\u6309\u7167\u6587\u4ef6\u683c\u5f0f\u7684\u5b58\u50a8\u987a\u5e8f\uff0c\u4e5f\u4e0d\u662f\u6309\u7167\u7a7a\u95f4\u5750\u6807\u6392\u5217\uff0c\u800c\u662f\u6309\u7167\u4eba\u7684\u9605\u8bfb\u987a\u5e8f\u3002\u8fd9\u610f\u5473\u7740\uff1a</p> <ul> <li>\u5bf9\u4e8e\u4e2d\u6587/\u82f1\u6587\u6587\u6863\uff1a\u4ece\u5de6\u5230\u53f3\uff0c\u4ece\u4e0a\u5230\u4e0b</li> <li>\u5bf9\u4e8e\u963f\u62c9\u4f2f\u8bed\u6587\u6863\uff1a\u4ece\u53f3\u5230\u5de6</li> <li>\u5bf9\u4e8e\u8868\u683c\uff1a\u5148\u8868\u5934\uff0c\u518d\u9010\u884c</li> <li>\u5bf9\u4e8e\u591a\u680f\u5e03\u5c40\uff1a\u5148\u5de6\u680f\u4ece\u4e0a\u5230\u4e0b\uff0c\u518d\u53f3\u680f</li> </ul> <p>\u8fd9\u79cd\u6392\u5e8f\u4f7f\u5f97\u5c06\u5143\u7d20\u5217\u8868\u76f4\u63a5\u62fc\u63a5\u6210\u6587\u672c\uff08<code>\"\\n\\n\".join(elements)</code>\uff09\u5c31\u80fd\u4ea7\u751f\u53ef\u8bfb\u7684\u5185\u5bb9\uff0c\u6781\u5927\u7b80\u5316\u4e86 LLM \u7684\u6587\u672c\u8f93\u5165\u6784\u9020\u3002</p>"},{"location":"specification/dpe-standardization-proposal/#42-\u5165\u53e3\u6307\u9488-entrance-pointer","title":"4.2 \u5165\u53e3\u6307\u9488 (Entrance Pointer)","text":"<p>Document \u6709 <code>entrance_page_id</code>\uff0cPage \u6709 <code>entrance_ele_id</code>\u2014\u2014\u8fd9\u662f\u4e00\u5bf9\"\u5feb\u901f\u5165\u53e3\"\u6307\u9488\u3002</p> <p>\u5728\u5927\u578b\u6587\u6863\u4e2d\uff08\u5982\u6570\u767e\u9875\u7684\u6280\u672f\u624b\u518c\uff09\uff0cAI \u7cfb\u7edf\u5f80\u5f80\u9700\u8981\u5feb\u901f\u5b9a\u4f4d\u5230\"\u6700\u91cd\u8981\"\u6216\"\u6700\u76f8\u5173\"\u7684\u5185\u5bb9\u3002\u5165\u53e3\u6307\u9488\u63d0\u4f9b\u4e86 O(1) \u7684\u8df3\u8f6c\u80fd\u529b\uff0c\u800c\u4e0d\u9700\u8981\u904d\u5386\u5168\u90e8\u9875\u9762/\u5143\u7d20\u3002</p> <p>\u8fd9\u7c7b\u4f3c\u4e8e\u4e66\u7684\"\u76ee\u5f55\"\u6216\u7f51\u9875\u7684\"\u951a\u70b9\"\u2014\u2014\u4e00\u4e2a\u8f7b\u91cf\u4f46\u5b9e\u7528\u7684\u4f18\u5316\u3002</p>"},{"location":"specification/dpe-standardization-proposal/#43-\u53ef\u6e05\u6d17\u5b57\u6bb5-cleanable-fields","title":"4.3 \u53ef\u6e05\u6d17\u5b57\u6bb5 (Cleanable Fields)","text":"<p>DocElement \u7684 <code>text</code> \u5b57\u6bb5\u88ab\u6807\u8bb0\u4e3a <code>cleanable=True</code>\uff0c\u914d\u5408 <code>apply(*cleaners)</code> \u65b9\u6cd5\uff1a</p> <pre><code># \u94fe\u5f0f\u6587\u672c\u6e05\u6d17\nfor element in doc.elements:\n    element.apply(str.strip, normalize_unicode, remove_control_chars)\n</code></pre> <p>\u8fd9\u4e2a\u8bbe\u8ba1\u5c06\"\u6587\u672c\u5185\u5bb9\"\u4e0e\"\u6587\u672c\u6e05\u6d17\"\u89e3\u8026\u3002<code>apply()</code> \u4f1a\u81ea\u52a8\u627e\u5230\u6240\u6709\u6807\u8bb0\u4e3a <code>cleanable</code> \u7684\u5b57\u6bb5\u5e76\u4f9d\u6b21\u5e94\u7528\u6e05\u6d17\u51fd\u6570\uff0c\u65e2\u5b89\u5168\uff08\u6709\u7c7b\u578b\u6821\u9a8c\uff0c\u786e\u4fdd\u8f93\u51fa\u4ecd\u4e3a\u5b57\u7b26\u4e32\uff09\u53c8\u7075\u6d3b\uff08\u6e05\u6d17\u7b56\u7565\u53ef\u4ee5\u7ec4\u5408\u548c\u66ff\u6362\uff09\u3002</p>"},{"location":"specification/dpe-standardization-proposal/#44-cmd-f-\u5f0f\u6587\u6863\u68c0\u7d22","title":"4.4 Cmd-F \u5f0f\u6587\u6863\u68c0\u7d22","text":"<p>Document \u5185\u7f6e\u4e86 <code>lookup()</code> \u548c <code>lookup_all()</code> \u65b9\u6cd5\uff0c\u6a21\u62df\u4e86 Cmd-F\uff08Ctrl-F\uff09\u7684\u67e5\u627e\u884c\u4e3a\uff1a</p> <ul> <li><code>lookup(term)</code> \u8fd4\u56de\u4e0b\u4e00\u4e2a\u5339\u914d\u7684\u5143\u7d20\uff0c\u8fde\u7eed\u8c03\u7528\u4f1a\u5faa\u73af\u904d\u5386\u6240\u6709\u5339\u914d\u9879</li> <li><code>lookup_all(term)</code> \u8fd4\u56de\u6240\u6709\u5339\u914d\u5143\u7d20</li> <li><code>after_element(el, count)</code> / <code>before_element(el, count)</code> \u83b7\u53d6\u4e0a\u4e0b\u6587</li> </ul> <p>\u8fd9\u4e3a AI \u7cfb\u7edf\u63d0\u4f9b\u4e86\u4e0e\u4eba\u7c7b\u76f8\u540c\u7684\"\u5728\u6587\u6863\u4e2d\u67e5\u627e\u5e76\u83b7\u53d6\u4e0a\u4e0b\u6587\"\u7684\u80fd\u529b\u2014\u2014\u8fd9\u6b63\u662f RAG (Retrieval-Augmented Generation) \u5de5\u4f5c\u6d41\u4e2d\u6700\u5e38\u7528\u7684\u64cd\u4f5c\u4e4b\u4e00\u3002</p>"},{"location":"specification/dpe-standardization-proposal/#45-\u81ea\u6ce8\u518c\u7684\u7c7b\u578b\u7cfb\u7edf","title":"4.5 \u81ea\u6ce8\u518c\u7684\u7c7b\u578b\u7cfb\u7edf","text":"<p>\u5143\u7d20\u5b50\u7c7b\u901a\u8fc7 <code>__init_subclass__</code> \u673a\u5236\u81ea\u52a8\u6ce8\u518c\u5230\u5168\u5c40\u6ce8\u518c\u8868\uff1a</p> <pre><code>class DocElement(TFBaseModel):\n    def __init_subclass__(cls, **kwargs):\n        super().__init_subclass__(**kwargs)\n        RegisterMap().register(\"DocElement\", cls)\n</code></pre> <p>\u8fd9\u610f\u5473\u7740\u4efb\u4f55\u7cfb\u7edf\u2014\u2014\u5305\u62ec\u7b2c\u4e09\u65b9\u63d2\u4ef6\u2014\u2014\u53ea\u8981\u5b9a\u4e49\u4e86 <code>DocElement</code> \u7684\u5b50\u7c7b\uff0c\u5c31\u81ea\u52a8\u88ab DPE \u7cfb\u7edf\u8bc6\u522b\u548c\u652f\u6301\u3002\u65e0\u9700\u914d\u7f6e\u6587\u4ef6\u3001\u65e0\u9700\u624b\u52a8\u6ce8\u518c\u3001\u65e0\u9700\u4fee\u6539\u6838\u5fc3\u4ee3\u7801\u3002</p>"},{"location":"specification/dpe-standardization-proposal/#46-\u5750\u6807\u7cfb\u7684\u7edf\u4e00\u8f6c\u6362\u6865","title":"4.6 \u5750\u6807\u7cfb\u7684\u7edf\u4e00\u8f6c\u6362\u6865","text":"<p>DPE \u901a\u8fc7 <code>RelativeCoordinateSystem</code>\uff08\u5f52\u4e00\u5316\u5230 [0,1] \u00d7 [0,1]\uff09\u4f5c\u4e3a\u6240\u6709\u5750\u6807\u7cfb\u4e4b\u95f4\u7684\"\u901a\u7528\u8d27\u5e01\"\uff1a</p> <pre><code>PixelSpace \u2190\u2192 RelativeCoordinate \u2190\u2192 PointSpace\n(\u56fe\u7247\u5750\u6807)      (\u5f52\u4e00\u5316\u4e2d\u95f4\u6001)         (PDF\u5750\u6807)\n</code></pre> <p>\u4efb\u4f55\u5750\u6807\u7cfb\u53ea\u8981\u80fd\u4e0e Relative \u4e92\u8f6c\uff0c\u5c31\u80fd\u4e0e\u5176\u4ed6\u6240\u6709\u5750\u6807\u7cfb\u4e92\u8f6c\u3002\u65b0\u589e\u5750\u6807\u7cfb\u53ea\u9700\u5b9e\u73b0\u4e24\u4e2a\u65b9\u5411\u7684\u8f6c\u6362\uff0c\u5373\u83b7\u5f97\u5bf9\u6240\u6709\u5df2\u6709\u5750\u6807\u7cfb\u7684\u517c\u5bb9\u6027\u3002\u8fd9\u662f\u7ecf\u5178\u7684\"\u4e2d\u95f4\u8868\u793a\"\uff08Intermediate Representation\uff09\u8bbe\u8ba1\u6a21\u5f0f\u5728\u7a7a\u95f4\u57df\u7684\u5e94\u7528\u3002</p>"},{"location":"specification/dpe-standardization-proposal/#47-\u72ec\u7acb\u5b58\u50a8\u6807\u8bb0-independent-storage","title":"4.7 \u72ec\u7acb\u5b58\u50a8\u6807\u8bb0 (Independent Storage)","text":"<p>DPE \u6a21\u578b\u4e2d\u7684\u5173\u952e\u5d4c\u5957\u5bf9\u8c61\uff08<code>pages</code>\u3001<code>elements</code>\u3001<code>coordinates</code>\uff09\u88ab\u6807\u8bb0\u4e3a <code>is_independent_storage=True</code>\uff1a</p> <pre><code>pages: list[DocPage] = TFField(\n    default_factory=list,\n    tf_meta=TFFieldMeta(is_independent_storage=True)\n)\n</code></pre> <p>\u8fd9\u610f\u5473\u7740\u8fd9\u4e9b\u5b57\u6bb5\u5728\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u65f6\u53ef\u4ee5\u72ec\u7acb\u4e8e\u7236\u5bf9\u8c61\u5904\u7406\u3002\u5177\u4f53\u573a\u666f\uff1a</p> <ul> <li>\u6570\u636e\u5e93\u5b58\u50a8\u65f6\uff0cDocument\u3001Page\u3001Element \u5206\u522b\u5b58\u5165\u4e09\u5f20\u8868</li> <li>\u6587\u4ef6\u5b58\u50a8\u65f6\uff0c\u5927\u578b\u5d4c\u5957\u53ef\u4ee5\u5404\u81ea\u4fdd\u5b58\u5230\u72ec\u7acb\u6587\u4ef6</li> <li>\u7f51\u7edc\u4f20\u8f93\u65f6\uff0c\u53ef\u4ee5\u6309\u9700\u61d2\u52a0\u8f7d\u5b50\u5bf9\u8c61</li> </ul> <p>\u8fd9\u79cd\u6807\u8bb0\u4f7f\u5f97\u540c\u4e00\u5957 Pydantic \u6a21\u578b\u65e2\u80fd\u7528\u4e8e\u5185\u5b58\u4e2d\u7684\u5b8c\u6574\u5bf9\u8c61\u56fe\u64cd\u4f5c\uff0c\u53c8\u80fd\u9002\u914d\u5173\u7cfb\u578b\u6570\u636e\u5e93\u3001\u6587\u4ef6\u7cfb\u7edf\u3001\u5206\u5e03\u5f0f\u7f13\u5b58\u7b49\u4e0d\u540c\u5b58\u50a8\u540e\u7aef\u3002</p>"},{"location":"specification/dpe-standardization-proposal/#5-\u6587\u6863\u683c\u5f0f\u8986\u76d6\u4e0e\u8f6c\u6362\u80fd\u529b","title":"5. \u6587\u6863\u683c\u5f0f\u8986\u76d6\u4e0e\u8f6c\u6362\u80fd\u529b","text":""},{"location":"specification/dpe-standardization-proposal/#51-\u652f\u6301\u7684\u6587\u6863\u683c\u5f0f","title":"5.1 \u652f\u6301\u7684\u6587\u6863\u683c\u5f0f","text":"<p>DPE \u6a21\u578b\u901a\u8fc7 <code>TFFileType</code> \u679a\u4e3e\u8986\u76d6\u4e86 30+ \u79cd\u6587\u6863\u683c\u5f0f\uff0c\u6bcf\u79cd\u683c\u5f0f\u90fd\u643a\u5e26\u5b8c\u6574\u7684\u5143\u4fe1\u606f\uff1a</p> \u5c5e\u6027 \u8bf4\u660e \u793a\u4f8b <code>partitioner_shortname</code> \u5bf9\u5e94\u7684\u89e3\u6790\u5668\u7c7b\u540d <code>\"PDFLoader\"</code>, <code>\"WordLoader\"</code> <code>importable_package_dependencies</code> \u6240\u9700\u4f9d\u8d56\u5305 <code>[\"pdf2image\", \"pdfminer\"]</code> <code>extensions</code> \u6587\u4ef6\u6269\u5c55\u540d <code>[\".pdf\"]</code>, <code>[\".docx\"]</code> <code>canonical_mime_type</code> \u6807\u51c6 MIME \u7c7b\u578b <code>\"application/pdf\"</code> <code>alias_mime_types</code> \u522b\u540d MIME \u7c7b\u578b <code>[\"text/x-csv\", ...]</code> <p>\u683c\u5f0f\u8bc6\u522b\u7b56\u7565\uff1a</p> <pre><code># \u901a\u8fc7\u6269\u5c55\u540d\u8bc6\u522b\nTFFileType.from_extension(\".pdf\")  \u2192 TFFileType.PDF\n\n# \u901a\u8fc7 MIME \u7c7b\u578b\u8bc6\u522b\nTFFileType.from_mime_type(\"application/pdf\")  \u2192 TFFileType.PDF\n</code></pre>"},{"location":"specification/dpe-standardization-proposal/#52-\u8f93\u51fa\u683c\u5f0f\u8f6c\u6362","title":"5.2 \u8f93\u51fa\u683c\u5f0f\u8f6c\u6362","text":"<p>DPE \u6a21\u578b\u652f\u6301\u5c06\u4efb\u610f\u6587\u6863\u683c\u5f0f\u8f6c\u6362\u4e3a\u6807\u51c6 Markdown \u8f93\u51fa\uff0c\u6bcf\u79cd\u5143\u7d20\u7c7b\u578b\u6709\u5bf9\u5e94\u7684\u8f6c\u6362\u89c4\u5219\uff1a</p> \u5143\u7d20\u7c7b\u578b Markdown \u8f93\u51fa Title (depth=2) <code>## \u6807\u9898\u6587\u672c</code> NarrativeText \u666e\u901a\u6bb5\u843d ListItem (depth=1) <code>- \u5217\u8868\u9879</code> Table Markdown \u8868\u683c \u6216 HTML <code>&lt;table&gt;</code> CodeSnippet <code>```language ... ```</code> Image <code>&lt;img src=\"...\" /&gt;</code> CheckBox (checked) <code>- [x] \u5185\u5bb9</code> PageBreak <code>---</code> Header/Footer <code>&gt; [Header] \u6587\u672c</code> Formula <code>$\u516c\u5f0f\u5185\u5bb9$</code>"},{"location":"specification/dpe-standardization-proposal/#6-\u5b58\u50a8\u5c42\u8bbe\u8ba1","title":"6. \u5b58\u50a8\u5c42\u8bbe\u8ba1","text":""},{"location":"specification/dpe-standardization-proposal/#61-\u5173\u7cfb\u578b\u6570\u636e\u5e93\u6620\u5c04","title":"6.1 \u5173\u7cfb\u578b\u6570\u636e\u5e93\u6620\u5c04","text":"<p>DPE \u6a21\u578b\u53ef\u76f4\u63a5\u6620\u5c04\u5230\u4e09\u5f20\u5173\u7cfb\u8868\uff0c\u652f\u6301 PostgreSQL \u7684\u9ad8\u7ea7\u7279\u6027\uff1a</p> <pre><code>-- \u6587\u6863\u8868\nCREATE TABLE doc.documents (\n    doc_id        SERIAL PRIMARY KEY,\n    file_uri      VARCHAR(1024) NOT NULL UNIQUE,\n    file_type     VARCHAR(32)   NOT NULL,\n    keywords      TEXT[],                          -- PostgreSQL \u6570\u7ec4\n    entrance_page_id INTEGER,\n    metadata      JSONB,                           -- \u534a\u7ed3\u6784\u5316\u5143\u6570\u636e\n    sort_weight   BIGINT,                          -- \u6e38\u6807\u5206\u9875\u6743\u91cd\n    create_timestamp BIGINT,\n    update_timestamp BIGINT\n);\n\n-- \u9875\u9762\u8868\nCREATE TABLE doc.doc_pages (\n    page_id       SERIAL PRIMARY KEY,\n    doc_id        INTEGER NOT NULL REFERENCES documents,\n    number        INTEGER NOT NULL,\n    title         VARCHAR(128),\n    keywords      TEXT[],\n    entrance_ele_id INTEGER,\n    UNIQUE(doc_id, number)                         -- \u6587\u6863\u5185\u9875\u7801\u552f\u4e00\n);\n\n-- \u5143\u7d20\u8868\nCREATE TABLE doc.doc_elements (\n    ele_id        SERIAL PRIMARY KEY,\n    page_id       INTEGER NOT NULL REFERENCES doc_pages,\n    text          TEXT,\n    category      VARCHAR(64) NOT NULL,\n    keywords      TEXT[],\n    element_id    VARCHAR(128) NOT NULL UNIQUE,     -- \u6e90 ID \u5168\u5c40\u552f\u4e00\n    metadata      JSONB                            -- \u534a\u7ed3\u6784\u5316\u5143\u6570\u636e\n);\n</code></pre> <p>\u7d22\u5f15\u7b56\u7565\uff1a</p> <ul> <li><code>file_uri</code> UNIQUE \u7d22\u5f15\uff1a\u5feb\u901f\u53bb\u91cd\u548c\u5b9a\u4f4d</li> <li><code>category</code> \u7d22\u5f15\uff1a\u6309\u5143\u7d20\u7c7b\u578b\u68c0\u7d22\uff08\u5982\"\u53ea\u67e5\u8868\u683c\"\uff09</li> <li><code>element_id</code> UNIQUE \u7d22\u5f15\uff1a\u8de8\u7cfb\u7edf\u5143\u7d20\u8ffd\u8e2a</li> <li><code>metadata</code> GIN \u7d22\u5f15\uff1aJSONB \u5185\u90e8\u5b57\u6bb5\u67e5\u8be2</li> <li><code>keywords</code> GIN \u7d22\u5f15\uff1a\u6570\u7ec4\u91cd\u53e0\u67e5\u8be2 (<code>&amp;&amp;</code> \u64cd\u4f5c\u7b26)</li> </ul>"},{"location":"specification/dpe-standardization-proposal/#62-\u6e38\u6807\u5206\u9875","title":"6.2 \u6e38\u6807\u5206\u9875","text":"<p>\u4e09\u5f20\u8868\u90fd\u6709\u8ba1\u7b97\u5b57\u6bb5 <code>sort_weight</code>\uff0c\u5b9e\u73b0\u9ad8\u6027\u80fd\u7684\u6e38\u6807\u5206\u9875\uff1a</p> <pre><code>sort_weight = update_timestamp \u00d7 1000 + (id % 1000)\n</code></pre> <p>\u8fd9\u79cd\u8bbe\u8ba1\u5728\u4fdd\u8bc1\"\u6700\u8fd1\u66f4\u65b0\u4f18\u5148\"\u6392\u5e8f\u7684\u540c\u65f6\uff0c\u901a\u8fc7\u53d6\u6a21\u64cd\u4f5c\u907f\u514d\u4e86\u76f8\u540c\u65f6\u95f4\u6233\u7684\u8bb0\u5f55\u4ea7\u751f\u76f8\u540c\u6743\u91cd\u3002</p>"},{"location":"specification/dpe-standardization-proposal/#7-ai-\u5de5\u4f5c\u6d41\u9002\u914d\u6027","title":"7. AI \u5de5\u4f5c\u6d41\u9002\u914d\u6027","text":""},{"location":"specification/dpe-standardization-proposal/#71-\u5411\u91cf\u68c0\u7d22-rag","title":"7.1 \u5411\u91cf\u68c0\u7d22 (RAG)","text":"<p>DPE \u6a21\u578b\u5929\u7136\u9002\u914d RAG \u5de5\u4f5c\u6d41\uff1a</p> <pre><code>Document \u2192 Pages \u2192 Elements \u2192 \u5411\u91cf\u5316 \u2192 FAISS/ChromaDB\n                                          \u2193\n                              \u67e5\u8be2 \u2192 \u8fd4\u56de Element \u2192 \u901a\u8fc7 parent \u5173\u7cfb\u83b7\u53d6\u4e0a\u4e0b\u6587\n</code></pre> <ul> <li>\u5206\u7247\u7c92\u5ea6\u7075\u6d3b\uff1a\u53ef\u4ee5\u6309 Page \u5206\u7247\uff08\u7c97\u7c92\u5ea6\uff09\u6216\u6309 Element \u5206\u7247\uff08\u7ec6\u7c92\u5ea6\uff09</li> <li>\u5143\u6570\u636e\u8fc7\u6ee4\uff1a\u5411\u91cf\u68c0\u7d22\u65f6\u53ef\u9644\u52a0 <code>category</code>\u3001<code>languages</code>\u3001<code>page_number</code> \u7b49\u5143\u6570\u636e\u8fc7\u6ee4\u6761\u4ef6</li> <li>\u4e0a\u4e0b\u6587\u91cd\u5efa\uff1a<code>after_element()</code> / <code>before_element()</code> \u65b9\u6cd5\u53ef\u4ee5\u4ece\u5339\u914d\u5143\u7d20\u6269\u5c55\u5230\u5b8c\u6574\u4e0a\u4e0b\u6587</li> </ul>"},{"location":"specification/dpe-standardization-proposal/#72-\u6587\u672c\u5206\u7247","title":"7.2 \u6587\u672c\u5206\u7247","text":"<p>\u5185\u7f6e\u7684 <code>split_element()</code> \u51fd\u6570\u652f\u6301\u667a\u80fd\u5206\u7247\uff1a</p> <ul> <li>\u8bed\u8a00\u611f\u77e5\uff1a\u4e2d\u6587\u4f7f\u7528 Jieba \u5206\u8bcd\uff0c\u82f1\u6587\u4f7f\u7528\u9012\u5f52\u5b57\u7b26\u5206\u5272</li> <li>\u8868\u683c\u7279\u6b8a\u5904\u7406\uff1a\u5148\u62c6\u5206\u8868\u5934\uff0c\u518d\u9010\u884c\u62c6\u5206\uff0c\u4fdd\u8bc1\u8868\u683c\u7ed3\u6784\u5b8c\u6574\u6027</li> <li>\u5143\u6570\u636e\u7ee7\u627f\uff1a\u5206\u7247\u4ea7\u7269\u7ee7\u627f\u539f\u59cb\u5143\u7d20\u7684\u5168\u90e8\u5143\u6570\u636e\uff08\u751f\u6210\u65b0 UUID\uff09</li> </ul>"},{"location":"specification/dpe-standardization-proposal/#73-\u77e5\u8bc6\u56fe\u8c31","title":"7.3 \u77e5\u8bc6\u56fe\u8c31","text":"<p>DPE \u5143\u7d20\u901a\u8fc7 <code>parent_id</code> \u548c <code>related_ids</code> \u6784\u5efa\u5173\u7cfb\u7f51\u7edc\uff1a</p> <pre><code>element_A (parent_id \u2192 element_B)\nelement_C (related_ids \u2192 [element_A, element_D])\n</code></pre> <p>\u914d\u5408\u6587\u6863\u7ea7\u7684 <code>forward/backward_citation_uris</code>\uff0c\u53ef\u4ee5\u6784\u5efa\u4ece\u5143\u7d20\u7ea7\u5230\u6587\u6863\u7ea7\u7684\u591a\u5c42\u77e5\u8bc6\u56fe\u8c31\u3002</p>"},{"location":"specification/dpe-standardization-proposal/#8-\u4e0e\u5176\u4ed6\u65b9\u6848\u7684\u5bf9\u6bd4","title":"8. \u4e0e\u5176\u4ed6\u65b9\u6848\u7684\u5bf9\u6bd4","text":"\u7279\u6027 DPE \u6a21\u578b Unstructured Element LangChain Document LlamaIndex Node \u5c42\u7ea7\u7ed3\u6784 \u4e09\u5c42 (D-P-E) \u5355\u5c42\uff08\u6241\u5e73\u5217\u8868\uff09 \u5355\u5c42 \u6811\u5f62 \u9875\u9762\u8bed\u4e49 \u4e00\u7b49\u516c\u6c11 \u4ec5\u5728\u5143\u6570\u636e\u4e2d \u65e0 \u65e0 \u7c7b\u578b\u5b89\u5168 Pydantic \u5224\u522b\u8054\u5408\u4f53 Python \u7c7b\u7ee7\u627f \u65e0 \u5f31 \u7a7a\u95f4\u4fe1\u606f \u5750\u6807\u7cfb + \u8f6c\u6362 \u6709\u5750\u6807\u7cfb \u65e0 \u65e0 \u5143\u6570\u636e\u6269\u5c55 <code>extra=\"allow\"</code> \u56fa\u5b9a\u5b57\u6bb5\u96c6 \u81ea\u7531 dict \u81ea\u7531 dict \u5143\u7d20\u95f4\u5173\u7cfb parent_id + related_ids parent_id \u65e0 parent/child \u8868\u683c\u89e3\u6790 \u5185\u7f6e\u884c\u5217\u62c6\u5206 \u4ec5\u6587\u672c \u65e0 \u65e0 \u6587\u6863\u95f4\u5f15\u7528 \u53cc\u5411 citation_uris \u65e0 \u65e0 \u65e0 \u6570\u636e\u5e93\u6620\u5c04 \u4e09\u8868 + GIN \u7d22\u5f15 \u65e0 \u65e0 \u65e0 \u683c\u5f0f\u8986\u76d6 30+ \u79cd\uff08\u542b\u4ee3\u7801\u4ed3\u5e93\uff09 20+ \u79cd \u53d6\u51b3\u4e8e Loader \u53d6\u51b3\u4e8e Reader"},{"location":"specification/dpe-standardization-proposal/#9-\u6807\u51c6\u5316\u5efa\u8bae","title":"9. \u6807\u51c6\u5316\u5efa\u8bae","text":""},{"location":"specification/dpe-standardization-proposal/#91-\u6838\u5fc3\u89c4\u8303","title":"9.1 \u6838\u5fc3\u89c4\u8303","text":"<p>\u5efa\u8bae\u5c06\u4ee5\u4e0b\u5185\u5bb9\u7eb3\u5165\u6807\u51c6\uff1a</p> <ol> <li>\u4e09\u5c42\u7ed3\u6784\u5b9a\u4e49\uff1aDocument\u3001Page\u3001Element \u7684\u5fc5\u586b\u5b57\u6bb5\u548c\u8bed\u4e49</li> <li>\u5143\u7d20\u7c7b\u578b\u679a\u4e3e\uff1a19 \u79cd\u57fa\u7840\u5143\u7d20\u7c7b\u578b\u53ca\u5176 <code>category</code> \u6807\u8bc6\u7b26</li> <li>\u5143\u6570\u636e Schema\uff1a\u6587\u6863\u7ea7\u548c\u5143\u7d20\u7ea7\u5143\u6570\u636e\u7684\u6807\u51c6\u5b57\u6bb5</li> <li>\u5750\u6807\u7cfb\u89c4\u8303\uff1aPixelSpace\u3001PointSpace\u3001RelativeCoordinateSystem \u53ca\u8f6c\u6362\u7b97\u6cd5</li> <li>\u5e8f\u5217\u5316\u683c\u5f0f\uff1aJSON Schema \u5b9a\u4e49</li> </ol>"},{"location":"specification/dpe-standardization-proposal/#92-\u6269\u5c55\u89c4\u8303","title":"9.2 \u6269\u5c55\u89c4\u8303","text":"<p>\u5efa\u8bae\u4ee5\u4e0b\u5185\u5bb9\u4f5c\u4e3a\u53ef\u9009\u6269\u5c55\uff1a</p> <ol> <li>\u9886\u57df\u5143\u6570\u636e\u6269\u5c55\uff1a\u901a\u8fc7 <code>extra=\"allow\"</code> \u673a\u5236\u6dfb\u52a0\u7279\u5b9a\u884c\u4e1a\u5b57\u6bb5</li> <li>\u81ea\u5b9a\u4e49\u5143\u7d20\u7c7b\u578b\uff1a\u901a\u8fc7\u7ee7\u627f\u673a\u5236\u6dfb\u52a0\u65b0\u5143\u7d20\u7c7b\u578b\u7684\u89c4\u8303</li> <li>\u5b58\u50a8\u6620\u5c04\u89c4\u8303\uff1a\u5173\u7cfb\u578b\u6570\u636e\u5e93\u3001\u5411\u91cf\u6570\u636e\u5e93\u3001\u6587\u4ef6\u7cfb\u7edf\u7684\u6620\u5c04\u5efa\u8bae</li> </ol>"},{"location":"specification/dpe-standardization-proposal/#93-\u517c\u5bb9\u6027","title":"9.3 \u517c\u5bb9\u6027","text":"<p>DPE \u6a21\u578b\u7684\u8bbe\u8ba1\u786e\u4fdd\u4e86\u5411\u524d\u517c\u5bb9\u548c\u5411\u540e\u517c\u5bb9\uff1a</p> <ul> <li>\u5411\u524d\u517c\u5bb9\uff1a<code>extra=\"allow\"</code> \u4f7f\u5f97\u65e7\u7248\u89e3\u6790\u5668\u53ef\u4ee5\u5b89\u5168\u5ffd\u7565\u65b0\u7248\u672c\u65b0\u589e\u7684\u5143\u6570\u636e\u5b57\u6bb5</li> <li>\u5411\u540e\u517c\u5bb9\uff1a\u6240\u6709\u65b0\u589e\u5b57\u6bb5\u5747\u8bbe\u4e3a <code>Optional</code>\uff0c\u65b0\u7248\u89e3\u6790\u5668\u53ef\u4ee5\u5904\u7406\u65e7\u7248\u6570\u636e</li> <li>\u683c\u5f0f\u4e2d\u7acb\uff1aDPE \u4e0d\u4f9d\u8d56\u4efb\u4f55\u7279\u5b9a\u7684\u5e8f\u5217\u5316\u683c\u5f0f\uff08JSON\u3001Protobuf\u3001MessagePack \u5747\u53ef\uff09\uff0c\u53ea\u5b9a\u4e49\u8bed\u4e49\u7ed3\u6784</li> </ul>"},{"location":"specification/dpe-standardization-proposal/#10-\u7ed3\u8bba","title":"10. \u7ed3\u8bba","text":"<p>DPE \u6a21\u578b\u7684\u6838\u5fc3\u4ef7\u503c\u5728\u4e8e\uff1a\u5b83\u4e0d\u662f\u53c8\u4e00\u4e2a\u6587\u6863\u683c\u5f0f\uff0c\u800c\u662f\u6587\u6863\u683c\u5f0f\u4e4b\u95f4\u7684\u901a\u7528\u8bed\u8a00\u3002</p> <p>\u6b63\u5982 IP \u534f\u8bae\u4e0d\u5173\u5fc3\u5e95\u5c42\u662f\u4ee5\u592a\u7f51\u8fd8\u662f Wi-Fi\uff0cDPE \u6a21\u578b\u4e0d\u5173\u5fc3\u5e95\u5c42\u662f PDF \u8fd8\u662f Excel\u2014\u2014\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7a33\u5b9a\u7684\u3001AI \u53cb\u597d\u7684\u4e2d\u95f4\u8868\u793a\u5c42\uff0c\u8ba9\u4e0a\u5c42\u5e94\u7528\u53ef\u4ee5\u4e13\u6ce8\u4e8e\"\u7406\u89e3\u6587\u6863\u5185\u5bb9\"\uff0c\u800c\u4e0d\u662f\"\u89e3\u6790\u6587\u6863\u683c\u5f0f\"\u3002</p> <p>\u6211\u4eec\u76f8\u4fe1\uff0c\u968f\u7740 AI \u5728\u6587\u6863\u5904\u7406\u9886\u57df\u7684\u6df1\u5165\u5e94\u7528\uff0c\u4e00\u4e2a\u6807\u51c6\u5316\u7684\u6587\u6863\u8868\u793a\u6a21\u578b\u5c06\u6210\u4e3a\u57fa\u7840\u8bbe\u65bd\u7684\u5173\u952e\u4e00\u73af\u3002DPE \u6a21\u578b\u5df2\u7ecf\u5728\u5b9e\u9645\u5de5\u7a0b\u4e2d\u8bc1\u660e\u4e86\u5b83\u7684\u8868\u8fbe\u529b\u3001\u6269\u5c55\u6027\u548c\u5b9e\u7528\u6027\uff0c\u5177\u5907\u6210\u4e3a\u8fd9\u4e00\u6807\u51c6\u7684\u57fa\u7840\u3002</p>"},{"location":"specification/dpe-standardization-proposal/#\u9644\u5f55-a-json-schema-\u793a\u4f8b","title":"\u9644\u5f55 A: JSON Schema \u793a\u4f8b","text":"<pre><code>{\n  \"doc_id\": 1,\n  \"file_uri\": \"https://example.com/report.pdf\",\n  \"file_type\": \"pdf\",\n  \"keywords\": [\"quarterly\", \"revenue\", \"2024\"],\n  \"entrance_page_id\": 1,\n  \"doc_metadata\": {\n    \"created_at\": \"2024-06-15T10:30:00Z\",\n    \"filename\": \"report.pdf\",\n    \"languages\": [\"eng\"],\n    \"summary\": \"Q2 2024 Revenue Report\",\n    \"forward_citation_uris\": [],\n    \"backward_citation_uris\": [\"https://example.com/q1-report.pdf\"]\n  },\n  \"pages\": [\n    {\n      \"page_id\": 1,\n      \"doc_id\": 1,\n      \"number\": 0,\n      \"title\": \"Cover Page\",\n      \"elements\": [\n        {\n          \"ele_id\": 1,\n          \"page_id\": 1,\n          \"text\": \"Q2 2024 Revenue Report\",\n          \"category\": \"Title\",\n          \"element_id\": \"a1b2c3d4e5f6\",\n          \"ele_metadata\": {\n            \"category_depth\": 0,\n            \"languages\": [\"eng\"],\n            \"coordinates\": {\n              \"points\": [[72, 100], [540, 100], [540, 140], [72, 140]],\n              \"system\": {\n                \"type\": \"PointSpace\",\n                \"width\": 612,\n                \"height\": 792,\n                \"orientation\": \"CARTESIAN\"\n              }\n            }\n          }\n        },\n        {\n          \"ele_id\": 2,\n          \"page_id\": 1,\n          \"text\": \"Revenue grew 15% year-over-year, driven by strong performance in cloud services.\",\n          \"category\": \"NarrativeText\",\n          \"element_id\": \"f6e5d4c3b2a1\",\n          \"ele_metadata\": {\n            \"is_narrative\": true,\n            \"languages\": [\"eng\"]\n          }\n        }\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"specification/dpe-standardization-proposal/#\u9644\u5f55-b-\u5143\u7d20\u7c7b\u578b\u901f\u67e5\u8868","title":"\u9644\u5f55 B: \u5143\u7d20\u7c7b\u578b\u901f\u67e5\u8868","text":"category \u503c \u7c7b\u540d \u5178\u578b\u573a\u666f \u7279\u6709\u5b57\u6bb5 <code>UncategorizedText</code> TextElement \u65e0\u6cd5\u5206\u7c7b\u7684\u6587\u672c \u2014 <code>Title</code> Title \u5404\u7ea7\u6807\u9898 <code>category_depth</code> (via metadata) <code>NarrativeText</code> NarrativeText \u6b63\u6587\u6bb5\u843d \u2014 <code>ListItem</code> ListItem \u5217\u8868\u9879 <code>category_depth</code> (\u5d4c\u5957\u6df1\u5ea6) <code>Table</code> Table \u5b8c\u6574\u8868\u683c <code>text_as_html</code>, <code>header_info</code> <code>TableChunk</code> TableChunk \u8868\u683c\u884c\u7247\u6bb5 <code>header_info</code> <code>Image</code> Image \u56fe\u7247 <code>image_path</code>, <code>image_base64</code> <code>CodeSnippet</code> CodeSnippet \u4ee3\u7801\u5757 \u2014 <code>Formula</code> Formula \u6570\u5b66\u516c\u5f0f \u2014 <code>CheckBox</code> CheckBoxElement \u590d\u9009\u6846 <code>checked: bool</code> <code>Header</code> Header \u9875\u7709 \u2014 <code>Footer</code> Footer \u9875\u811a \u2014 <code>PageBreak</code> PageBreak \u5206\u9875\u7b26 \u2014 <code>PageNumber</code> PageNumber \u9875\u7801 \u2014 <code>FigureCaption</code> FigureCaption \u56fe\u7247\u8bf4\u660e \u2014 <code>Address</code> Address \u5730\u5740\u4fe1\u606f \u2014 <code>EmailAddress</code> EmailAddress \u90ae\u4ef6\u5730\u5740 <code>sent_from</code>, <code>sent_to</code> <code>CompositeElement</code> CompositeElement \u590d\u5408\u5206\u7247 \u2014 <code>FormKeysValues</code> FormKeysValues \u8868\u5355\u952e\u503c\u5bf9 \u2014"},{"location":"specification/error-handling/","title":"A2C-SMCP \u9519\u8bef\u5904\u7406\u89c4\u8303","text":"<p>\u72b6\u6001: \u8349\u6848</p> <p>\u672c\u7ae0\u8282\u76ee\u524d\u4e3a\u8349\u6848\u72b6\u6001\uff0c\u5177\u4f53\u9519\u8bef\u7801\u4e0e\u7ed3\u6784\u4ecd\u5728\u6f14\u8fdb\u4e2d\u3002</p>"},{"location":"specification/error-handling/#\u6982\u8ff0","title":"\u6982\u8ff0","text":"<p>A2C-SMCP \u534f\u8bae\u5b9a\u4e49\u4e86\u7edf\u4e00\u7684\u9519\u8bef\u5904\u7406\u673a\u5236\uff0c\u786e\u4fdd Agent\u3001Server\u3001Computer \u4e4b\u95f4\u80fd\u591f\u6b63\u786e\u4f20\u9012\u548c\u5904\u7406\u9519\u8bef\u4fe1\u606f\u3002</p>"},{"location":"specification/error-handling/#\u9519\u8bef\u7801\u5b9a\u4e49","title":"\u9519\u8bef\u7801\u5b9a\u4e49","text":""},{"location":"specification/error-handling/#\u901a\u7528\u9519\u8bef\u7801","title":"\u901a\u7528\u9519\u8bef\u7801","text":"\u4ee3\u7801 \u540d\u79f0 \u542b\u4e49 \u5178\u578b\u89e6\u53d1\u573a\u666f 400 Bad Request \u65e0\u6548\u8bf7\u6c42\u683c\u5f0f \u6570\u636e\u7ed3\u6784\u6821\u9a8c\u5931\u8d25\u3001\u5b57\u6bb5\u7f3a\u5931\u6216\u7c7b\u578b\u9519\u8bef 401 Unauthorized \u672a\u6388\u6743 \u8ba4\u8bc1\u5931\u8d25\u3001Token \u65e0\u6548 403 Forbidden \u6743\u9650\u8fdd\u89c4 \u8de8\u623f\u95f4\u8bbf\u95ee\u3001Agent \u72ec\u5360\u51b2\u7a81\u3001\u672a\u6388\u6743\u64cd\u4f5c 404 Not Found \u8d44\u6e90\u4e0d\u5b58\u5728 \u5de5\u5177\u6216 Computer \u4e0d\u5b58\u5728\u3001MCP \u914d\u7f6e\u7f3a\u5931 408 Timeout \u8bf7\u6c42\u8d85\u65f6 \u5de5\u5177\u8c03\u7528\u8d85\u8fc7\u7ea6\u5b9a\u8d85\u65f6\u65f6\u95f4\u672a\u8fd4\u56de 500 Internal Error \u5185\u90e8\u9519\u8bef Server \u6216 Computer \u7aef\u903b\u8f91\u5f02\u5e38"},{"location":"specification/error-handling/#\u5de5\u5177\u8c03\u7528\u9519\u8bef\u7801","title":"\u5de5\u5177\u8c03\u7528\u9519\u8bef\u7801","text":"\u4ee3\u7801 \u540d\u79f0 \u542b\u4e49 4001 Tool Not Found \u5de5\u5177\u4e0d\u5b58\u5728 4002 Tool Disabled \u5de5\u5177\u88ab\u7981\u7528 4003 Tool Execution Failed \u5de5\u5177\u6267\u884c\u5931\u8d25 4004 Tool Timeout \u5de5\u5177\u6267\u884c\u8d85\u65f6 4005 Tool Requires Confirmation \u5de5\u5177\u9700\u8981\u4e8c\u6b21\u786e\u8ba4"},{"location":"specification/error-handling/#\u623f\u95f4\u7ba1\u7406\u9519\u8bef\u7801","title":"\u623f\u95f4\u7ba1\u7406\u9519\u8bef\u7801","text":"\u4ee3\u7801 \u540d\u79f0 \u542b\u4e49 4101 Room Full \u623f\u95f4\u5df2\u6709 Agent 4102 Room Not Found \u623f\u95f4\u4e0d\u5b58\u5728 4103 Not In Room \u672a\u52a0\u5165\u623f\u95f4 4104 Cross Room Access \u8de8\u623f\u95f4\u8bbf\u95ee\u88ab\u62d2\u7edd"},{"location":"specification/error-handling/#finder-\u6587\u6863\u7cfb\u7edf\u9519\u8bef\u7801","title":"Finder \u6587\u6863\u7cfb\u7edf\u9519\u8bef\u7801","text":"\u4ee3\u7801 \u540d\u79f0 \u542b\u4e49 4201 Document Not Found \u6587\u6863\u5f15\u7528\uff08<code>doc_ref</code>\uff09\u4e0d\u5b58\u5728 4202 Page Out of Range \u9875\u7801\u8d85\u51fa\u6587\u6863\u7684 <code>page_count</code> \u8303\u56f4 4203 Element Not Found \u5143\u7d20 ID \u4e0d\u5b58\u5728 4204 Invalid DPE URI <code>dpe://</code> URI \u683c\u5f0f\u9519\u8bef\u6216\u6821\u9a8c\u5931\u8d25"},{"location":"specification/error-handling/#\u9519\u8bef\u54cd\u5e94\u683c\u5f0f","title":"\u9519\u8bef\u54cd\u5e94\u683c\u5f0f","text":""},{"location":"specification/error-handling/#\u6807\u51c6\u9519\u8bef\u54cd\u5e94","title":"\u6807\u51c6\u9519\u8bef\u54cd\u5e94","text":"<pre><code>{\n  \"error\": {\n    \"code\": 404,\n    \"message\": \"\u8bf7\u6c42\u7684\u5de5\u5177\u4e0d\u5b58\u5728\",\n    \"details\": {\n      \"tool_name\": \"invalid-tool-name\",\n      \"computer\": \"my-computer\"\n    }\n  }\n}\n</code></pre>"},{"location":"specification/error-handling/#\u5b57\u6bb5\u8bf4\u660e","title":"\u5b57\u6bb5\u8bf4\u660e","text":"\u5b57\u6bb5 \u7c7b\u578b \u5fc5\u9700 \u8bf4\u660e <code>error.code</code> int \u662f \u9519\u8bef\u7801 <code>error.message</code> str \u662f \u4eba\u7c7b\u53ef\u8bfb\u7684\u9519\u8bef\u63cf\u8ff0 <code>error.details</code> object \u5426 \u7ed3\u6784\u5316\u8c03\u8bd5\u4fe1\u606f"},{"location":"specification/error-handling/#\u5b89\u5168\u6ce8\u610f\u4e8b\u9879","title":"\u5b89\u5168\u6ce8\u610f\u4e8b\u9879","text":"<p><code>details</code> \u5b57\u6bb5\u7981\u6b62\u5305\u542b\u4ee5\u4e0b\u654f\u611f\u4fe1\u606f\uff1a</p> <ul> <li>API \u5bc6\u94a5\u6216 Token</li> <li>\u5185\u90e8 IP \u5730\u5740\u6216\u7aef\u53e3</li> <li>\u6570\u636e\u5e93\u8fde\u63a5\u4fe1\u606f</li> <li>\u7528\u6237\u5bc6\u7801\u6216\u51ed\u8bc1</li> <li>\u5806\u6808\u8ddf\u8e2a\uff08\u751f\u4ea7\u73af\u5883\uff09</li> </ul>"},{"location":"specification/error-handling/#\u4e8b\u4ef6\u7ea7\u9519\u8bef\u5904\u7406","title":"\u4e8b\u4ef6\u7ea7\u9519\u8bef\u5904\u7406","text":""},{"location":"specification/error-handling/#serverjoin_office-\u54cd\u5e94","title":"server:join_office \u54cd\u5e94","text":"<pre><code># \u6210\u529f\n(True, None)\n\n# \u5931\u8d25\n(False, \"Room already has an agent\")\n</code></pre>"},{"location":"specification/error-handling/#clienttool_call-\u54cd\u5e94","title":"client:tool_call \u54cd\u5e94","text":"<p>\u5de5\u5177\u8c03\u7528\u4f7f\u7528 MCP \u7684 <code>CallToolResult</code> \u7ed3\u6784\u8fd4\u56de\u7ed3\u679c\uff1a</p> <pre><code>class CallToolResult:\n    content: list[TextContent | ImageContent | EmbeddedResource]\n    isError: bool  # \u662f\u5426\u4e3a\u9519\u8bef\u7ed3\u679c\n    meta: dict     # \u5143\u6570\u636e\n</code></pre> <p>\u5f53 <code>isError=True</code> \u65f6\uff0c<code>content</code> \u4e2d\u5305\u542b\u9519\u8bef\u4fe1\u606f\u3002</p>"},{"location":"specification/error-handling/#\u8d85\u65f6\u5904\u7406","title":"\u8d85\u65f6\u5904\u7406","text":""},{"location":"specification/error-handling/#agent-\u7aef\u8d85\u65f6","title":"Agent \u7aef\u8d85\u65f6","text":"<p>Agent \u5728\u53d1\u8d77\u5de5\u5177\u8c03\u7528\u65f6\u6307\u5b9a <code>timeout</code>\uff1a</p> <pre><code>result = await agent.emit_tool_call(\n    computer=\"my-computer\",\n    tool_name=\"slow_tool\",\n    params={},\n    timeout=30  # 30 \u79d2\u8d85\u65f6\n)\n</code></pre> <p>\u8d85\u65f6\u540e\uff0cAgent \u5e94\uff1a</p> <ol> <li>\u53d1\u9001 <code>server:tool_call_cancel</code> \u53d6\u6d88\u8bf7\u6c42</li> <li>\u8fd4\u56de\u8d85\u65f6\u9519\u8bef\u7ed9\u8c03\u7528\u65b9</li> </ol> <pre><code># \u8d85\u65f6\u8fd4\u56de\u793a\u4f8b\nCallToolResult(\n    content=[TextContent(text=\"Tool call timeout\")],\n    isError=True,\n    meta={\"timeout\": True}\n)\n</code></pre>"},{"location":"specification/error-handling/#server-\u7aef\u8d85\u65f6","title":"Server \u7aef\u8d85\u65f6","text":"<p>Server \u5728\u8f6c\u53d1\u8bf7\u6c42\u65f6\u5e94\u8bbe\u7f6e\u5408\u7406\u7684\u8d85\u65f6\uff1a</p> <ul> <li>\u4f7f\u7528 Agent \u8bf7\u6c42\u4e2d\u7684 <code>timeout</code> \u503c</li> <li>\u6dfb\u52a0\u5c11\u91cf\u7f13\u51b2\u65f6\u95f4\uff08\u5982 5 \u79d2\uff09</li> </ul>"},{"location":"specification/error-handling/#computer-\u7aef\u8d85\u65f6","title":"Computer \u7aef\u8d85\u65f6","text":"<p>Computer \u5e94\u5728\u5de5\u5177\u6267\u884c\u8d85\u65f6\u65f6\uff1a</p> <ol> <li>\u5c1d\u8bd5\u4e2d\u65ad\u5de5\u5177\u6267\u884c</li> <li>\u8fd4\u56de\u8d85\u65f6\u9519\u8bef</li> </ol>"},{"location":"specification/error-handling/#\u91cd\u8bd5\u7b56\u7565","title":"\u91cd\u8bd5\u7b56\u7565","text":""},{"location":"specification/error-handling/#\u5efa\u8bae\u7684\u91cd\u8bd5\u7b56\u7565","title":"\u5efa\u8bae\u7684\u91cd\u8bd5\u7b56\u7565","text":"\u9519\u8bef\u7c7b\u578b \u662f\u5426\u91cd\u8bd5 \u7b56\u7565 400 Bad Request \u5426 \u4fee\u590d\u8bf7\u6c42\u540e\u91cd\u8bd5 401 Unauthorized \u5426 \u91cd\u65b0\u8ba4\u8bc1\u540e\u91cd\u8bd5 403 Forbidden \u5426 \u4e0d\u91cd\u8bd5 404 Not Found \u5426 \u4e0d\u91cd\u8bd5 408 Timeout \u53ef\u9009 \u6307\u6570\u9000\u907f\u91cd\u8bd5 500 Internal Error \u53ef\u9009 \u6307\u6570\u9000\u907f\u91cd\u8bd5"},{"location":"specification/error-handling/#\u6307\u6570\u9000\u907f\u793a\u4f8b","title":"\u6307\u6570\u9000\u907f\u793a\u4f8b","text":"<pre><code>async def retry_with_backoff(func, max_retries=3):\n    for i in range(max_retries):\n        try:\n            return await func()\n        except TimeoutError:\n            if i == max_retries - 1:\n                raise\n            wait_time = (2 ** i) + random.uniform(0, 1)\n            await asyncio.sleep(wait_time)\n</code></pre>"},{"location":"specification/error-handling/#\u9519\u8bef\u4f20\u64ad","title":"\u9519\u8bef\u4f20\u64ad","text":""},{"location":"specification/error-handling/#\u5de5\u5177\u8c03\u7528\u9519\u8bef\u4f20\u64ad\u94fe","title":"\u5de5\u5177\u8c03\u7528\u9519\u8bef\u4f20\u64ad\u94fe","text":"<pre><code>MCP Server \u2192 Computer \u2192 Server \u2192 Agent\n     \u2502           \u2502          \u2502        \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u9519\u8bef\u4fe1\u606f\u4fdd\u7559\n</code></pre> <p>\u6bcf\u4e00\u5c42\u5e94\uff1a</p> <ol> <li>\u8bb0\u5f55\u9519\u8bef\u65e5\u5fd7</li> <li>\u5c06\u9519\u8bef\u4fe1\u606f\u5411\u4e0a\u4f20\u64ad</li> <li>\u4e0d\u4e22\u5931\u539f\u59cb\u9519\u8bef\u7ec6\u8282</li> </ol>"},{"location":"specification/error-handling/#\u65e5\u5fd7\u8bb0\u5f55\u5efa\u8bae","title":"\u65e5\u5fd7\u8bb0\u5f55\u5efa\u8bae","text":"<pre><code># \u63a8\u8350\u7684\u65e5\u5fd7\u683c\u5f0f\nlogger.error(\n    \"Tool call failed\",\n    extra={\n        \"req_id\": req_id,\n        \"tool_name\": tool_name,\n        \"computer\": computer,\n        \"error_code\": error.code,\n        \"error_message\": error.message\n    }\n)\n</code></pre>"},{"location":"specification/error-handling/#todo","title":"TODO","text":"<p>\u4ee5\u4e0b\u529f\u80fd\u5c1a\u672a\u5b9e\u73b0\uff0c\u8ba1\u5212\u5728\u540e\u7eed\u7248\u672c\u4e2d\u5b8c\u5584\uff1a</p> <ul> <li> \u7edf\u4e00\u7684\u9519\u8bef\u7801\u5b9a\u4e49\u6587\u4ef6</li> <li> \u9519\u8bef\u7801\u56fd\u9645\u5316\u652f\u6301</li> <li> \u9519\u8bef\u8ffd\u8e2a ID\uff08trace_id\uff09</li> <li> \u9519\u8bef\u7edf\u8ba1\u548c\u76d1\u63a7\u63a5\u53e3</li> </ul>"},{"location":"specification/error-handling/#\u53c2\u8003","title":"\u53c2\u8003","text":"<ul> <li>MCP CallToolResult: https://github.com/modelcontextprotocol/specification</li> <li>Socket.IO \u9519\u8bef\u5904\u7406: https://socket.io/docs/v4/handling-errors/</li> </ul>"},{"location":"specification/events/","title":"A2C-SMCP \u4e8b\u4ef6\u5b9a\u4e49","text":"<p>\u672c\u6587\u6863\u5b9a\u4e49\u4e86 A2C-SMCP \u534f\u8bae\u7684\u6240\u6709\u4e8b\u4ef6\uff0c\u57fa\u4e8e <code>a2c_smcp/smcp.py</code> \u4e2d\u7684\u5b9e\u9645\u5b9e\u73b0\u3002</p>"},{"location":"specification/events/#\u547d\u540d\u7a7a\u95f4","title":"\u547d\u540d\u7a7a\u95f4","text":"<p>\u6240\u6709\u4e8b\u4ef6\u5728\u4ee5\u4e0b\u547d\u540d\u7a7a\u95f4\u4e2d\u4f20\u8f93\uff1a</p> <pre><code>SMCP_NAMESPACE = \"/smcp\"\n</code></pre>"},{"location":"specification/events/#\u4e8b\u4ef6\u5206\u7c7b\u89c4\u5219","title":"\u4e8b\u4ef6\u5206\u7c7b\u89c4\u5219","text":"\u524d\u7f00 \u65b9\u5411 \u8bf4\u660e \u5b9e\u73b0\u8981\u6c42 <code>client:</code> Agent \u2192 Server \u2192 Computer \u5de5\u5177\u64cd\u4f5c\u7c7b\uff0c\u7531 Server \u8def\u7531\u5230\u6307\u5b9a Computer Computer \u5fc5\u987b\u5b9e\u73b0 <code>server:</code> \u5ba2\u6237\u7aef \u2192 Server \u623f\u95f4\u7ba1\u7406\u3001\u72b6\u6001\u66f4\u65b0\u7c7b Server \u5fc5\u987b\u5b9e\u73b0 <code>notify:</code> Server \u2192 \u5e7f\u64ad \u901a\u77e5\u7c7b\uff0c\u7531 Server \u5e7f\u64ad\u5230\u623f\u95f4 Agent/Computer \u9009\u62e9\u6027\u63a5\u6536"},{"location":"specification/events/#\u5b8c\u6574\u4e8b\u4ef6\u5217\u8868","title":"\u5b8c\u6574\u4e8b\u4ef6\u5217\u8868","text":""},{"location":"specification/events/#client-\u4e8b\u4ef6agent--computer","title":"Client \u4e8b\u4ef6\uff08Agent \u2192 Computer\uff09","text":"<p>\u8fd9\u4e9b\u4e8b\u4ef6\u7531 Agent \u53d1\u8d77\uff0c\u901a\u8fc7 Server \u8def\u7531\u5230\u6307\u5b9a\u7684 Computer \u6267\u884c\u3002</p> \u4e8b\u4ef6\u5e38\u91cf \u4e8b\u4ef6\u540d\u79f0 \u63cf\u8ff0 \u8bf7\u6c42\u6570\u636e\u7ed3\u6784 \u54cd\u5e94\u6570\u636e\u7ed3\u6784 <code>TOOL_CALL_EVENT</code> <code>client:tool_call</code> \u5de5\u5177\u8c03\u7528\u8bf7\u6c42 <code>ToolCallReq</code> <code>CallToolResult</code> <code>GET_CONFIG_EVENT</code> <code>client:get_config</code> \u83b7\u53d6 Computer \u914d\u7f6e <code>GetComputerConfigReq</code> <code>GetComputerConfigRet</code> <code>GET_TOOLS_EVENT</code> <code>client:get_tools</code> \u83b7\u53d6\u5de5\u5177\u5217\u8868 <code>GetToolsReq</code> <code>GetToolsRet</code> <code>GET_DESKTOP_EVENT</code> <code>client:get_desktop</code> \u83b7\u53d6\u684c\u9762\u4fe1\u606f <code>GetDeskTopReq</code> <code>GetDeskTopRet</code> <code>GET_FINDER_EVENT</code> <code>client:get_finder</code> \u83b7\u53d6\u6587\u6863\u76ee\u5f55 <code>GetFinderReq</code> <code>GetFinderRet</code>"},{"location":"specification/events/#server-\u4e8b\u4ef6\u5ba2\u6237\u7aef--server","title":"Server \u4e8b\u4ef6\uff08\u5ba2\u6237\u7aef \u2192 Server\uff09","text":"<p>\u8fd9\u4e9b\u4e8b\u4ef6\u7531 Agent \u6216 Computer \u53d1\u8d77\uff0c\u7531 Server \u5904\u7406\u3002</p> \u4e8b\u4ef6\u5e38\u91cf \u4e8b\u4ef6\u540d\u79f0 \u53d1\u8d77\u65b9 \u63cf\u8ff0 \u6570\u636e\u7ed3\u6784 <code>JOIN_OFFICE_EVENT</code> <code>server:join_office</code> Agent/Computer \u52a0\u5165\u623f\u95f4 <code>EnterOfficeReq</code> <code>LEAVE_OFFICE_EVENT</code> <code>server:leave_office</code> Agent/Computer \u79bb\u5f00\u623f\u95f4 <code>LeaveOfficeReq</code> <code>UPDATE_CONFIG_EVENT</code> <code>server:update_config</code> Computer \u914d\u7f6e\u66f4\u65b0\u901a\u77e5\u8bf7\u6c42 <code>UpdateComputerConfigReq</code> <code>UPDATE_TOOL_LIST_EVENT</code> <code>server:update_tool_list</code> Computer \u5de5\u5177\u5217\u8868\u66f4\u65b0\u901a\u77e5\u8bf7\u6c42 <code>UpdateToolListNotification</code> <code>UPDATE_DESKTOP_EVENT</code> <code>server:update_desktop</code> Computer \u684c\u9762\u66f4\u65b0\u901a\u77e5\u8bf7\u6c42 <code>UpdateComputerConfigReq</code> <code>UPDATE_FINDER_EVENT</code> <code>server:update_finder</code> Computer \u6587\u6863\u76ee\u5f55\u66f4\u65b0\u901a\u77e5\u8bf7\u6c42 <code>UpdateComputerConfigReq</code> <code>CANCEL_TOOL_CALL_EVENT</code> <code>server:tool_call_cancel</code> Agent \u53d6\u6d88\u5de5\u5177\u8c03\u7528 <code>AgentCallData</code> <code>LIST_ROOM_EVENT</code> <code>server:list_room</code> Agent \u5217\u51fa\u623f\u95f4\u5185\u6240\u6709\u4f1a\u8bdd <code>ListRoomReq</code>"},{"location":"specification/events/#notify-\u4e8b\u4ef6server--\u5e7f\u64ad","title":"Notify \u4e8b\u4ef6\uff08Server \u2192 \u5e7f\u64ad\uff09","text":"<p>\u8fd9\u4e9b\u4e8b\u4ef6\u7531 Server \u5e7f\u64ad\u5230\u623f\u95f4\u5185\u7684\u6240\u6709\u6210\u5458\u3002</p> \u4e8b\u4ef6\u5e38\u91cf \u4e8b\u4ef6\u540d\u79f0 \u63cf\u8ff0 \u6570\u636e\u7ed3\u6784 <code>ENTER_OFFICE_NOTIFICATION</code> <code>notify:enter_office</code> \u6210\u5458\u52a0\u5165\u623f\u95f4\u901a\u77e5 <code>EnterOfficeNotification</code> <code>LEAVE_OFFICE_NOTIFICATION</code> <code>notify:leave_office</code> \u6210\u5458\u79bb\u5f00\u623f\u95f4\u901a\u77e5 <code>LeaveOfficeNotification</code> <code>UPDATE_CONFIG_NOTIFICATION</code> <code>notify:update_config</code> \u914d\u7f6e\u66f4\u65b0\u901a\u77e5 <code>UpdateMCPConfigNotification</code> <code>UPDATE_TOOL_LIST_NOTIFICATION</code> <code>notify:update_tool_list</code> \u5de5\u5177\u5217\u8868\u66f4\u65b0\u901a\u77e5 <code>UpdateToolListNotification</code> <code>UPDATE_DESKTOP_NOTIFICATION</code> <code>notify:update_desktop</code> \u684c\u9762\u66f4\u65b0\u901a\u77e5 <code>UpdateComputerConfigReq</code> <code>UPDATE_FINDER_NOTIFICATION</code> <code>notify:update_finder</code> \u6587\u6863\u76ee\u5f55\u66f4\u65b0\u901a\u77e5 <code>UpdateComputerConfigReq</code> <code>CANCEL_TOOL_CALL_NOTIFICATION</code> <code>notify:tool_call_cancel</code> \u5de5\u5177\u8c03\u7528\u53d6\u6d88\u901a\u77e5 <code>AgentCallData</code>"},{"location":"specification/events/#\u4e8b\u4ef6\u8be6\u7ec6\u8bf4\u660e","title":"\u4e8b\u4ef6\u8be6\u7ec6\u8bf4\u660e","text":""},{"location":"specification/events/#\u5de5\u5177\u8c03\u7528\u4e8b\u4ef6","title":"\u5de5\u5177\u8c03\u7528\u4e8b\u4ef6","text":""},{"location":"specification/events/#clienttool_call","title":"<code>client:tool_call</code>","text":"<p>Agent \u5411\u6307\u5b9a Computer \u53d1\u8d77\u5de5\u5177\u8c03\u7528\u3002</p> <p>\u8bf7\u6c42\u6d41\u7a0b: <pre><code>Agent \u2500\u2500[client:tool_call]\u2500\u2500\u2192 Server \u2500\u2500[\u8f6c\u53d1]\u2500\u2500\u2192 Computer\n                                                    \u2502\nAgent \u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u8fd4\u56de\u7ed3\u679c\n</code></pre></p> <p>\u8bf7\u6c42\u6570\u636e (ToolCallReq): <pre><code>{\n    \"agent\": str,       # Agent \u6807\u8bc6\n    \"req_id\": str,      # \u8bf7\u6c42 ID\uff08\u7528\u4e8e\u53bb\u91cd\u548c\u53d6\u6d88\uff09\n    \"computer\": str,    # \u76ee\u6807 Computer \u540d\u79f0\n    \"tool_name\": str,   # \u5de5\u5177\u540d\u79f0\n    \"params\": dict,     # \u5de5\u5177\u8c03\u7528\u53c2\u6570\n    \"timeout\": int      # \u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09\n}\n</code></pre></p> <p>\u54cd\u5e94: \u8fd4\u56de MCP <code>CallToolResult</code> \u7ed3\u6784\u3002</p>"},{"location":"specification/events/#clientget_tools","title":"<code>client:get_tools</code>","text":"<p>\u83b7\u53d6\u6307\u5b9a Computer \u7684\u53ef\u7528\u5de5\u5177\u5217\u8868\u3002</p> <p>\u8bf7\u6c42\u6570\u636e (GetToolsReq): <pre><code>{\n    \"agent\": str,       # Agent \u6807\u8bc6\n    \"req_id\": str,      # \u8bf7\u6c42 ID\n    \"computer\": str     # \u76ee\u6807 Computer \u540d\u79f0\n}\n</code></pre></p> <p>\u54cd\u5e94\u6570\u636e (GetToolsRet): <pre><code>{\n    \"tools\": list[SMCPTool],  # \u5de5\u5177\u5217\u8868\n    \"req_id\": str             # \u8bf7\u6c42 ID\n}\n</code></pre></p> <p>Agent \u7aef\u89e3\u6790 meta \u7684\u6ce8\u610f\u4e8b\u9879</p> <p><code>SMCPTool.meta</code> \u4e2d\u7684 <code>a2c_tool_meta</code> \u5b57\u6bb5\u503c\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u9700\u8981 <code>json.loads()</code> \u540e \u624d\u80fd\u8bbf\u95ee <code>tags</code>\u3001<code>auto_apply</code> \u7b49\u5b57\u6bb5\u3002\u8be6\u89c1 SMCPTool.meta \u5e8f\u5217\u5316\u89c4\u8303\u3002</p>"},{"location":"specification/events/#clientget_desktop","title":"<code>client:get_desktop</code>","text":"<p>\u83b7\u53d6\u6307\u5b9a Computer \u7684\u684c\u9762\u4fe1\u606f\uff08\u7a97\u53e3\u8d44\u6e90\u805a\u5408\u89c6\u56fe\uff09\u3002</p> <p>\u8bf7\u6c42\u6570\u636e (GetDeskTopReq): <pre><code>{\n    \"agent\": str,           # Agent \u6807\u8bc6\n    \"req_id\": str,          # \u8bf7\u6c42 ID\n    \"computer\": str,        # \u76ee\u6807 Computer \u540d\u79f0\n    \"desktop_size\": int,    # \u53ef\u9009\uff1a\u9650\u5236\u8fd4\u56de\u7684\u684c\u9762\u5185\u5bb9\u6570\u91cf\n    \"window\": str           # \u53ef\u9009\uff1a\u6307\u5b9a\u83b7\u53d6\u7684 WindowURI\n}\n</code></pre></p> <p>\u54cd\u5e94\u6570\u636e (GetDeskTopRet): <pre><code>{\n    \"desktops\": list[str],  # \u684c\u9762\u5185\u5bb9\u5217\u8868\n    \"req_id\": str           # \u8bf7\u6c42 ID\n}\n</code></pre></p>"},{"location":"specification/events/#clientget_finder","title":"<code>client:get_finder</code>","text":"<p>\u83b7\u53d6\u6307\u5b9a Computer \u7684\u6587\u6863\u76ee\u5f55\uff08DPE \u6587\u6863\u805a\u5408\u89c6\u56fe\uff09\u3002</p> <p>\u8bf7\u6c42\u6570\u636e (GetFinderReq): <pre><code>{\n    \"agent\": str,           # Agent \u6807\u8bc6\n    \"req_id\": str,          # \u8bf7\u6c42 ID\n    \"computer\": str,        # \u76ee\u6807 Computer \u540d\u79f0\n    \"keywords\": list[str],  # \u53ef\u9009\uff1a\u5173\u952e\u8bcd\u8fc7\u6ee4\n    \"file_type\": str,       # \u53ef\u9009\uff1a\u6587\u4ef6\u7c7b\u578b\u8fc7\u6ee4\n    \"offset\": int,          # \u53ef\u9009\uff1a\u5206\u9875\u504f\u79fb\uff08\u9ed8\u8ba4 0\uff09\n    \"limit\": int            # \u53ef\u9009\uff1a\u5206\u9875\u9650\u5236\uff08\u9ed8\u8ba4 20\uff09\n}\n</code></pre></p> <p>\u54cd\u5e94\u6570\u636e (GetFinderRet): <pre><code>{\n    \"documents\": list[DPEDocumentSummary],  # \u6587\u6863\u6458\u8981\u5217\u8868\n    \"total_count\": int,                     # \u603b\u6587\u6863\u6570\n    \"req_id\": str                           # \u8bf7\u6c42 ID\n}\n</code></pre></p> <p>\u8be6\u89c1 Finder \u6587\u6863\u7cfb\u7edf\u3002</p>"},{"location":"specification/events/#clientget_config","title":"<code>client:get_config</code>","text":"<p>\u83b7\u53d6\u6307\u5b9a Computer \u7684\u5b8c\u6574\u914d\u7f6e\u4fe1\u606f\u3002</p> <p>\u8bf7\u6c42\u6570\u636e (GetComputerConfigReq): <pre><code>{\n    \"agent\": str,       # Agent \u6807\u8bc6\n    \"req_id\": str,      # \u8bf7\u6c42 ID\n    \"computer\": str     # \u76ee\u6807 Computer \u540d\u79f0\n}\n</code></pre></p> <p>\u54cd\u5e94\u6570\u636e (GetComputerConfigRet): <pre><code>{\n    \"inputs\": list[MCPServerInput] | None,  # \u8f93\u5165\u5b9a\u4e49\u5217\u8868\n    \"servers\": dict[str, MCPServerConfig]   # MCP Server \u914d\u7f6e\u6620\u5c04\n}\n</code></pre></p>"},{"location":"specification/events/#\u623f\u95f4\u7ba1\u7406\u4e8b\u4ef6","title":"\u623f\u95f4\u7ba1\u7406\u4e8b\u4ef6","text":""},{"location":"specification/events/#serverjoin_office","title":"<code>server:join_office</code>","text":"<p>Agent \u6216 Computer \u8bf7\u6c42\u52a0\u5165\u623f\u95f4\u3002</p> <p>\u8bf7\u6c42\u6570\u636e (EnterOfficeReq): <pre><code>{\n    \"role\": Literal[\"computer\", \"agent\"],  # \u89d2\u8272\u7c7b\u578b\n    \"name\": str,                           # \u540d\u79f0\n    \"office_id\": str                       # \u623f\u95f4 ID\n}\n</code></pre></p> <p>\u54cd\u5e94: <code>(bool, str | None)</code> - \u6210\u529f\u6807\u5fd7\u548c\u9519\u8bef\u4fe1\u606f\u3002</p> <p>Server \u5904\u7406\u89c4\u5219: - Agent: \u68c0\u67e5\u623f\u95f4\u662f\u5426\u5df2\u6709\u5176\u4ed6 Agent\uff0c\u82e5\u6709\u5219\u62d2\u7edd - Computer: \u82e5\u5df2\u5728\u5176\u4ed6\u623f\u95f4\uff0c\u81ea\u52a8\u79bb\u5f00\u65e7\u623f\u95f4</p>"},{"location":"specification/events/#serverleave_office","title":"<code>server:leave_office</code>","text":"<p>Agent \u6216 Computer \u8bf7\u6c42\u79bb\u5f00\u623f\u95f4\u3002</p> <p>\u8bf7\u6c42\u6570\u636e (LeaveOfficeReq): <pre><code>{\n    \"office_id\": str    # \u623f\u95f4 ID\n}\n</code></pre></p>"},{"location":"specification/events/#serverlist_room","title":"<code>server:list_room</code>","text":"<p>Agent \u67e5\u8be2\u6307\u5b9a\u623f\u95f4\u5185\u7684\u6240\u6709\u4f1a\u8bdd\u4fe1\u606f\u3002</p> <p>\u8bf7\u6c42\u6570\u636e (ListRoomReq): <pre><code>{\n    \"agent\": str,       # Agent \u6807\u8bc6\n    \"req_id\": str,      # \u8bf7\u6c42 ID\n    \"office_id\": str    # \u623f\u95f4 ID\n}\n</code></pre></p> <p>\u54cd\u5e94\u6570\u636e (ListRoomRet): <pre><code>{\n    \"sessions\": list[SessionInfo],  # \u4f1a\u8bdd\u5217\u8868\n    \"req_id\": str                   # \u8bf7\u6c42 ID\n}\n</code></pre></p> <p>\u5176\u4e2d <code>SessionInfo</code>: <pre><code>{\n    \"sid\": str,                             # \u4f1a\u8bdd ID\n    \"name\": str,                            # \u4f1a\u8bdd\u540d\u79f0\n    \"role\": Literal[\"computer\", \"agent\"],   # \u89d2\u8272\n    \"office_id\": str                        # \u6240\u5c5e\u623f\u95f4 ID\n}\n</code></pre></p>"},{"location":"specification/events/#\u914d\u7f6e\u4e0e\u72b6\u6001\u66f4\u65b0\u4e8b\u4ef6","title":"\u914d\u7f6e\u4e0e\u72b6\u6001\u66f4\u65b0\u4e8b\u4ef6","text":""},{"location":"specification/events/#serverupdate_config","title":"<code>server:update_config</code>","text":"<p>Computer \u901a\u77e5 Server \u5176\u914d\u7f6e\u5df2\u66f4\u65b0\uff0cServer \u968f\u540e\u5e7f\u64ad <code>notify:update_config</code>\u3002</p> <p>\u8bf7\u6c42\u6570\u636e (UpdateComputerConfigReq): <pre><code>{\n    \"computer\": str     # Computer \u540d\u79f0\n}\n</code></pre></p>"},{"location":"specification/events/#serverupdate_tool_list","title":"<code>server:update_tool_list</code>","text":"<p>Computer \u901a\u77e5 Server \u5176\u5de5\u5177\u5217\u8868\u5df2\u66f4\u65b0\uff0cServer \u968f\u540e\u5e7f\u64ad <code>notify:update_tool_list</code>\u3002</p> <p>\u8bf7\u6c42\u6570\u636e (UpdateToolListNotification): <pre><code>{\n    \"computer\": str     # Computer \u540d\u79f0\n}\n</code></pre></p>"},{"location":"specification/events/#serverupdate_desktop","title":"<code>server:update_desktop</code>","text":"<p>Computer \u901a\u77e5 Server \u5176\u684c\u9762\u5185\u5bb9\u5df2\u66f4\u65b0\uff0cServer \u968f\u540e\u5e7f\u64ad <code>notify:update_desktop</code>\u3002</p> <p>\u89e6\u53d1\u6761\u4ef6\uff08\u7531 Computer \u7aef\u68c0\u6d4b\uff09:</p> <ul> <li>MCP Server \u53d1\u51fa <code>ResourceListChangedNotification</code> \u4e14 <code>window://</code> URI \u96c6\u5408\u53d1\u751f\u53d8\u5316</li> <li>MCP Server \u53d1\u51fa <code>ResourceUpdatedNotification</code> \u4e14\u76ee\u6807 URI \u4e3a <code>window://</code></li> </ul> <p>\u8bf7\u6c42\u6570\u636e: \u590d\u7528 <code>UpdateComputerConfigReq</code>\uff08\u4e0e <code>server:update_config</code> \u5171\u4eab\u540c\u4e00\u6570\u636e\u7ed3\u6784\uff09: <pre><code>{\n    \"computer\": str     # Computer \u540d\u79f0\n}\n</code></pre></p> <p>Server \u5904\u7406: \u63a5\u6536\u540e\u5411\u8be5 Computer \u6240\u5728\u623f\u95f4\u5e7f\u64ad <code>notify:update_desktop</code>\u3002</p> <p>\u8be6\u89c1 Desktop \u684c\u9762\u7cfb\u7edf \u4e2d\u7684 \u66f4\u65b0\u673a\u5236\u3002</p>"},{"location":"specification/events/#serverupdate_finder","title":"<code>server:update_finder</code>","text":"<p>Computer \u901a\u77e5 Server \u5176\u6587\u6863\u76ee\u5f55\u5df2\u66f4\u65b0\uff0cServer \u968f\u540e\u5e7f\u64ad <code>notify:update_finder</code>\u3002</p> <p>\u89e6\u53d1\u6761\u4ef6\uff08\u7531 Computer \u7aef\u68c0\u6d4b\uff09:</p> <ul> <li>MCP Server \u53d1\u51fa <code>ResourceListChangedNotification</code> \u4e14 <code>dpe://</code> URI \u96c6\u5408\u53d1\u751f\u53d8\u5316</li> <li>MCP Server \u53d1\u51fa <code>ResourceUpdatedNotification</code> \u4e14\u76ee\u6807 URI \u4e3a <code>dpe://</code></li> </ul> <p>\u8bf7\u6c42\u6570\u636e: \u590d\u7528 <code>UpdateComputerConfigReq</code>\uff08\u4e0e <code>server:update_config</code> \u5171\u4eab\u540c\u4e00\u6570\u636e\u7ed3\u6784\uff09: <pre><code>{\n    \"computer\": str     # Computer \u540d\u79f0\n}\n</code></pre></p> <p>Server \u5904\u7406: \u63a5\u6536\u540e\u5411\u8be5 Computer \u6240\u5728\u623f\u95f4\u5e7f\u64ad <code>notify:update_finder</code>\u3002</p> <p>\u8be6\u89c1 Finder \u6587\u6863\u7cfb\u7edf \u4e2d\u7684 \u66f4\u65b0\u673a\u5236\u3002</p>"},{"location":"specification/events/#\u901a\u77e5\u4e8b\u4ef6","title":"\u901a\u77e5\u4e8b\u4ef6","text":""},{"location":"specification/events/#notifyenter_office","title":"<code>notify:enter_office</code>","text":"<p>Server \u5e7f\u64ad\uff1a\u6709\u6210\u5458\u52a0\u5165\u623f\u95f4\u3002</p> <p>\u6570\u636e\u7ed3\u6784 (EnterOfficeNotification): <pre><code>{\n    \"office_id\": str,\n    \"computer\": str | None,  # \u52a0\u5165\u7684 Computer \u540d\u79f0\uff08\u82e5\u4e3a Computer\uff09\n    \"agent\": str | None      # \u52a0\u5165\u7684 Agent \u540d\u79f0\uff08\u82e5\u4e3a Agent\uff09\n}\n</code></pre></p> <p>Agent \u54cd\u5e94\u5efa\u8bae: \u6536\u5230\u6b64\u901a\u77e5\u540e\uff0c\u5e94\u81ea\u52a8\u8c03\u7528 <code>client:get_tools</code> \u83b7\u53d6\u65b0 Computer \u7684\u5de5\u5177\u5217\u8868\u3002</p>"},{"location":"specification/events/#notifyleave_office","title":"<code>notify:leave_office</code>","text":"<p>Server \u5e7f\u64ad\uff1a\u6709\u6210\u5458\u79bb\u5f00\u623f\u95f4\u3002</p> <p>\u6570\u636e\u7ed3\u6784 (LeaveOfficeNotification): <pre><code>{\n    \"office_id\": str,\n    \"computer\": str | None,  # \u79bb\u5f00\u7684 Computer \u540d\u79f0\n    \"agent\": str | None      # \u79bb\u5f00\u7684 Agent \u540d\u79f0\n}\n</code></pre></p>"},{"location":"specification/events/#notifyupdate_config","title":"<code>notify:update_config</code>","text":"<p>Server \u5e7f\u64ad\uff1a\u67d0 Computer \u7684\u914d\u7f6e\u5df2\u66f4\u65b0\u3002</p> <p>\u6570\u636e\u7ed3\u6784 (UpdateMCPConfigNotification): <pre><code>{\n    \"computer\": str     # \u66f4\u65b0\u914d\u7f6e\u7684 Computer \u540d\u79f0\n}\n</code></pre></p> <p>Agent \u54cd\u5e94\u5efa\u8bae: \u6536\u5230\u6b64\u901a\u77e5\u540e\uff0c\u53ef\u8c03\u7528 <code>client:get_config</code> \u83b7\u53d6\u6700\u65b0\u914d\u7f6e\u3002</p>"},{"location":"specification/events/#notifyupdate_tool_list","title":"<code>notify:update_tool_list</code>","text":"<p>Server \u5e7f\u64ad\uff1a\u67d0 Computer \u7684\u5de5\u5177\u5217\u8868\u5df2\u66f4\u65b0\u3002</p> <p>\u6570\u636e\u7ed3\u6784 (UpdateToolListNotification): <pre><code>{\n    \"computer\": str     # \u66f4\u65b0\u5de5\u5177\u5217\u8868\u7684 Computer \u540d\u79f0\n}\n</code></pre></p> <p>Agent \u54cd\u5e94\u5efa\u8bae: \u6536\u5230\u6b64\u901a\u77e5\u540e\uff0c\u5e94\u8c03\u7528 <code>client:get_tools</code> \u5237\u65b0\u672c\u5730\u5de5\u5177\u5217\u8868\u3002</p>"},{"location":"specification/events/#notifyupdate_desktop","title":"<code>notify:update_desktop</code>","text":"<p>Server \u5e7f\u64ad\uff1a\u67d0 Computer \u7684\u684c\u9762\u5185\u5bb9\u5df2\u66f4\u65b0\u3002</p> <p>\u6570\u636e\u7ed3\u6784: \u590d\u7528 <code>UpdateComputerConfigReq</code>\uff08\u4e0e <code>notify:update_config</code> \u7ed3\u6784\u4e00\u81f4\uff09: <pre><code>{\n    \"computer\": str     # \u684c\u9762\u53d1\u751f\u53d8\u5316\u7684 Computer \u540d\u79f0\n}\n</code></pre></p> <p>Agent \u54cd\u5e94\u5efa\u8bae: \u6536\u5230\u6b64\u901a\u77e5\u540e\uff0c\u63a8\u8350\u81ea\u52a8\u8c03\u7528 <code>client:get_desktop</code> \u83b7\u53d6\u6700\u65b0\u684c\u9762\u3002</p> <p>\u8be6\u89c1 Desktop \u684c\u9762\u7cfb\u7edf \u4e2d\u7684 \u5b8c\u6574\u751f\u547d\u5468\u671f\u65f6\u5e8f\u56fe\u3002</p>"},{"location":"specification/events/#notifyupdate_finder","title":"<code>notify:update_finder</code>","text":"<p>Server \u5e7f\u64ad\uff1a\u67d0 Computer \u7684\u6587\u6863\u76ee\u5f55\u5df2\u66f4\u65b0\u3002</p> <p>\u6570\u636e\u7ed3\u6784: \u590d\u7528 <code>UpdateComputerConfigReq</code>\uff08\u4e0e <code>notify:update_config</code> \u7ed3\u6784\u4e00\u81f4\uff09: <pre><code>{\n    \"computer\": str     # \u6587\u6863\u76ee\u5f55\u53d1\u751f\u53d8\u5316\u7684 Computer \u540d\u79f0\n}\n</code></pre></p> <p>Agent \u54cd\u5e94\u5efa\u8bae: \u6536\u5230\u6b64\u901a\u77e5\u540e\uff0c\u63a8\u8350\u81ea\u52a8\u8c03\u7528 <code>client:get_finder</code> \u83b7\u53d6\u6700\u65b0\u6587\u6863\u76ee\u5f55\u3002</p> <p>\u8be6\u89c1 Finder \u6587\u6863\u7cfb\u7edf \u4e2d\u7684 \u5b8c\u6574\u901a\u77e5\u94fe\u65f6\u5e8f\u56fe\u3002</p>"},{"location":"specification/events/#notifytool_call_cancel","title":"<code>notify:tool_call_cancel</code>","text":"<p>Server \u5e7f\u64ad\uff1a\u67d0\u5de5\u5177\u8c03\u7528\u5df2\u88ab\u53d6\u6d88\u3002</p> <p>\u6570\u636e\u7ed3\u6784 (AgentCallData): <pre><code>{\n    \"agent\": str,   # \u53d1\u8d77\u53d6\u6d88\u7684 Agent\n    \"req_id\": str   # \u88ab\u53d6\u6d88\u7684\u8bf7\u6c42 ID\n}\n</code></pre></p>"},{"location":"specification/events/#\u4e8b\u4ef6\u6d41\u7a0b\u56fe","title":"\u4e8b\u4ef6\u6d41\u7a0b\u56fe","text":""},{"location":"specification/events/#\u5de5\u5177\u8c03\u7528\u6d41\u7a0b","title":"\u5de5\u5177\u8c03\u7528\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant A as Agent\n    participant S as Server\n    participant C as Computer\n\n    A-&gt;&gt;S: client:tool_call (ToolCallReq)\n    S-&gt;&gt;C: client:tool_call (\u8f6c\u53d1)\n    C-&gt;&gt;S: \u5de5\u5177\u6267\u884c\u7ed3\u679c\n    S-&gt;&gt;A: \u8fd4\u56de\u7ed3\u679c\n</code></pre>"},{"location":"specification/events/#\u52a8\u6001\u5de5\u5177\u53d1\u73b0\u6d41\u7a0b","title":"\u52a8\u6001\u5de5\u5177\u53d1\u73b0\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant A as Agent\n    participant S as Server\n    participant C as Computer\n\n    Note over C: Computer \u52a0\u5165\u623f\u95f4\n    C-&gt;&gt;S: server:join_office\n    S-&gt;&gt;A: notify:enter_office\n    A-&gt;&gt;S: client:get_tools\n    S-&gt;&gt;C: client:get_tools (\u8f6c\u53d1)\n    C-&gt;&gt;S: \u5de5\u5177\u5217\u8868\n    S-&gt;&gt;A: GetToolsRet\n    Note over A: \u6ce8\u518c\u65b0\u5de5\u5177\n</code></pre>"},{"location":"specification/events/#\u914d\u7f6e\u66f4\u65b0\u6d41\u7a0b","title":"\u914d\u7f6e\u66f4\u65b0\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant A as Agent\n    participant S as Server\n    participant C as Computer\n\n    Note over C: \u914d\u7f6e\u53d8\u66f4\n    C-&gt;&gt;S: server:update_config\n    S-&gt;&gt;A: notify:update_config\n    A-&gt;&gt;S: client:get_tools (\u53ef\u9009)\n    S-&gt;&gt;C: \u8f6c\u53d1\n    C-&gt;&gt;S: \u5de5\u5177\u5217\u8868\n    S-&gt;&gt;A: GetToolsRet\n</code></pre>"},{"location":"specification/events/#\u684c\u9762\u66f4\u65b0\u6d41\u7a0b","title":"\u684c\u9762\u66f4\u65b0\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant M as MCP Server\n    participant C as Computer\n    participant S as Server\n    participant A as Agent\n\n    Note over M: \u7a97\u53e3\u8d44\u6e90\u53d8\u5316\n    M-&gt;&gt;C: ResourceListChangedNotification\n    C-&gt;&gt;C: \u6bd4\u8f83 window:// URI \u96c6\u5408\n    C-&gt;&gt;S: server:update_desktop\n    S-&gt;&gt;A: notify:update_desktop\n    A-&gt;&gt;S: client:get_desktop\n    S-&gt;&gt;C: client:get_desktop (\u8f6c\u53d1)\n    C-&gt;&gt;C: organize_desktop()\n    C-&gt;&gt;S: GetDeskTopRet\n    S-&gt;&gt;A: GetDeskTopRet\n</code></pre> <p>\u8be6\u89c1 Desktop \u684c\u9762\u7cfb\u7edf\u3002</p>"},{"location":"specification/events/#\u6587\u6863\u76ee\u5f55\u66f4\u65b0\u6d41\u7a0b","title":"\u6587\u6863\u76ee\u5f55\u66f4\u65b0\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant M as MCP Server\n    participant C as Computer\n    participant S as Server\n    participant A as Agent\n\n    Note over M: \u6587\u6863\u8d44\u6e90\u53d8\u5316\n    M-&gt;&gt;C: ResourceListChangedNotification\n    C-&gt;&gt;C: \u6bd4\u8f83 dpe:// URI \u96c6\u5408\n    C-&gt;&gt;S: server:update_finder\n    S-&gt;&gt;A: notify:update_finder\n    A-&gt;&gt;S: client:get_finder\n    S-&gt;&gt;C: client:get_finder (\u8f6c\u53d1)\n    C-&gt;&gt;C: organize_finder()\n    C-&gt;&gt;S: GetFinderRet\n    S-&gt;&gt;A: GetFinderRet\n</code></pre> <p>\u8be6\u89c1 Finder \u6587\u6863\u7cfb\u7edf\u3002</p>"},{"location":"specification/events/#\u5b9e\u73b0\u8981\u6c42","title":"\u5b9e\u73b0\u8981\u6c42","text":""},{"location":"specification/events/#server-\u5fc5\u987b\u5b9e\u73b0","title":"Server \u5fc5\u987b\u5b9e\u73b0","text":"<ul> <li>\u6240\u6709 <code>server:*</code> \u4e8b\u4ef6\u7684\u5904\u7406</li> <li>\u6240\u6709 <code>client:*</code> \u4e8b\u4ef6\u7684\u8def\u7531\u8f6c\u53d1</li> <li>\u6240\u6709 <code>notify:*</code> \u4e8b\u4ef6\u7684\u5e7f\u64ad</li> </ul>"},{"location":"specification/events/#computer-\u5fc5\u987b\u5b9e\u73b0","title":"Computer \u5fc5\u987b\u5b9e\u73b0","text":"<ul> <li>\u6240\u6709 <code>client:*</code> \u4e8b\u4ef6\u7684\u5904\u7406\uff08\u4f5c\u4e3a\u63a5\u6536\u65b9\uff09</li> <li>\u623f\u95f4\u7ba1\u7406\u4e8b\u4ef6 (<code>server:join_office</code>, <code>server:leave_office</code>)</li> </ul>"},{"location":"specification/events/#agent-\u5e94\u8be5\u5b9e\u73b0","title":"Agent \u5e94\u8be5\u5b9e\u73b0","text":"<ul> <li><code>notify:enter_office</code> - \u81ea\u52a8\u83b7\u53d6\u65b0 Computer \u7684\u5de5\u5177</li> <li><code>notify:leave_office</code> - \u6e05\u7406\u79bb\u5f00 Computer \u7684\u5de5\u5177</li> <li><code>notify:update_config</code> / <code>notify:update_tool_list</code> - \u5237\u65b0\u5de5\u5177\u5217\u8868</li> <li><code>notify:update_finder</code> - \u5237\u65b0\u6587\u6863\u76ee\u5f55</li> </ul>"},{"location":"specification/events/#\u53c2\u8003","title":"\u53c2\u8003","text":"<ul> <li>\u4e8b\u4ef6\u5e38\u91cf\u5b9a\u4e49: <code>a2c_smcp/smcp.py</code></li> <li>Server \u5b9e\u73b0: <code>a2c_smcp/server/namespace.py</code></li> <li>Agent \u5ba2\u6237\u7aef: <code>a2c_smcp/agent/client.py</code></li> <li>Computer \u5ba2\u6237\u7aef: <code>a2c_smcp/computer/socketio/client.py</code></li> </ul>"},{"location":"specification/finder/","title":"Finder \u6587\u6863\u7cfb\u7edf","text":""},{"location":"specification/finder/#\u6982\u8ff0","title":"\u6982\u8ff0","text":"<p>Finder \u662f A2C-SMCP \u534f\u8bae\u4e2d\u7ba1\u7406\u7ed3\u6784\u5316\u6301\u4e45\u6587\u6863\u7684\u5b50\u7cfb\u7edf\u3002\u5b83\u5c06\u591a\u4e2a MCP Server \u66b4\u9732\u7684 <code>dpe://</code> \u8d44\u6e90\u805a\u5408\u4e3a\u7edf\u4e00\u7684\u6587\u6863\u76ee\u5f55\u89c6\u56fe\uff0c\u652f\u6301 Agent \u5bf9\u6587\u6863\u8fdb\u884c\u6e10\u8fdb\u5f0f\u5bfc\u822a\uff08\u9010\u5c42\u94bb\u5165\uff1a\u76ee\u5f55 \u2192 \u6587\u6863 \u2192 \u9875\u9762 \u2192 \u5143\u7d20\uff09\uff0c\u9002\u7528\u4e8e\u591a\u9875\u6587\u6863\u3001\u8868\u683c\u3001\u6f14\u793a\u6587\u7a3f\u7b49\u5927\u578b\u7ed3\u6784\u5316\u5185\u5bb9\u3002</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                          Computer                                \u2502\n\u2502                                                                  \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u2502\n\u2502   \u2502MCP Srv A \u2502   \u2502MCP Srv B \u2502   \u2502MCP Srv C \u2502                   \u2502\n\u2502   \u2502dpe://a   \u2502   \u2502dpe://b   \u2502   \u2502(\u65e0\u6587\u6863)   \u2502                   \u2502\n\u2502   \u2502  /report \u2502   \u2502  /slides \u2502   \u2502          \u2502                   \u2502\n\u2502   \u2502  /data   \u2502   \u2502          \u2502   \u2502          \u2502                   \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                   \u2502\n\u2502        \u2502              \u2502                                          \u2502\n\u2502        \u25bc              \u25bc                                          \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                   \u2502\n\u2502   \u2502   Finder Organizer      \u2502 \u2190 \u8fc7\u6ee4\u3001\u6392\u5e8f\u3001\u5206\u9875                 \u2502\n\u2502   \u2502   (organize_finder)     \u2502                                   \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                   \u2502\n\u2502               \u2502                                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502\n                \u25bc\n           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n           \u2502  Agent   \u2502  \u2190 \u901a\u8fc7 client:get_finder + MCP resources/read \u8bbf\u95ee\n           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"specification/finder/#desktop-vs-finder","title":"Desktop vs Finder","text":"\u7ef4\u5ea6 Desktop (<code>window://</code>) Finder (<code>dpe://</code>) \u6570\u636e\u91cf \u5c0f\uff08\u6e32\u67d3\u6587\u672c\uff09 \u5927\uff08\u6570\u767e\u9875\u6587\u6863\uff09 \u7c92\u5ea6 \u6241\u5e73\uff08URI + body\uff09 \u5c42\u7ea7\uff08D-P-E \u6811\uff09 \u8bbf\u95ee\u6a21\u5f0f \u5168\u91cf\u62c9\u53d6 \u6e10\u8fdb\u5f0f\u62ab\u9732\uff08\u9010\u5c42\u94bb\u5165\uff09 \u751f\u547d\u5468\u671f \u77ed\u6682\u3001\u9891\u7e41\u53d8\u5316 \u6301\u4e45\u3001\u5076\u5c14\u66f4\u65b0 Agent \u4ea4\u4e92 \u88ab\u52a8\u9605\u8bfb \u4e3b\u52a8\u5bfc\u822a\uff08\u6309 URI \u9010\u5c42\u8bfb\u53d6\uff09 <p>Finder \u7684\u6838\u5fc3\u7406\u5ff5\u662f\uff1aMCP Server \u53ea\u9700\u6309 MCP \u6807\u51c6\u66b4\u9732 <code>dpe://</code> \u8d44\u6e90\uff0c\u65e0\u9700\u4efb\u4f55 SMCP \u7279\u5b9a\u6539\u52a8\uff0cComputer \u81ea\u52a8\u5b8c\u6210\u805a\u5408\u3002Agent \u901a\u8fc7\u534f\u8bae\u4e8b\u4ef6\u83b7\u53d6\u6587\u6863\u76ee\u5f55\uff0c\u901a\u8fc7\u6807\u51c6 MCP <code>resources/read</code> \u6309\u9700\u8bfb\u53d6\u5404\u7ea7\u5185\u5bb9\uff0c\u5177\u4f53\u7684\u5bfc\u822a\u903b\u8f91\uff08\u5206\u9875\u3001\u641c\u7d22\u3001\u683c\u5f0f\u8f6c\u6362\u7b49\uff09\u7531 Agent \u5185\u90e8\u5b9e\u73b0\u3002</p>"},{"location":"specification/finder/#dpe-\u6570\u636e\u6a21\u578b","title":"DPE \u6570\u636e\u6a21\u578b","text":"<p>DPE\uff08Document-Page-Element\uff09\u662f Finder \u7cfb\u7edf\u7684\u6570\u636e\u6a21\u578b\u57fa\u7840\uff0c\u5b9a\u4e49\u4e86\u6587\u6863\u5185\u5bb9\u7684\u4e09\u5c42\u7ed3\u6784\u3002</p>"},{"location":"specification/finder/#\u4e09\u5c42\u7ed3\u6784","title":"\u4e09\u5c42\u7ed3\u6784","text":"<pre><code>Document\uff08\u6587\u6863\uff09\n\u251c\u2500\u2500 Page 0\uff08\u9875\u9762\uff09\n\u2502   \u251c\u2500\u2500 Element A\uff08\u5143\u7d20\uff09\n\u2502   \u251c\u2500\u2500 Element B\n\u2502   \u2514\u2500\u2500 Element C\n\u251c\u2500\u2500 Page 1\n\u2502   \u251c\u2500\u2500 Element D\n\u2502   \u2514\u2500\u2500 Element E\n\u2514\u2500\u2500 Page N\n    \u2514\u2500\u2500 ...\n</code></pre> \u5c42\u7ea7 \u8bf4\u660e \u6807\u8bc6\u65b9\u5f0f Document \u4e00\u4e2a\u5b8c\u6574\u6587\u6863\u5b9e\u4f8b\uff08\u5982\u4e00\u4efd Excel \u5de5\u4f5c\u7c3f\u3001\u4e00\u4e2a PDF \u6587\u4ef6\uff09 <code>doc_ref</code>\uff08MCP Server \u5206\u914d\u7684\u4e0d\u900f\u660e\u77ed\u952e\uff09 Page \u6587\u6863\u5185\u7684\u4e00\u4e2a\u903b\u8f91\u9875\u9762\uff08\u5982 Excel \u5de5\u4f5c\u8868\u3001PDF \u9875\u9762\u3001PPT \u5e7b\u706f\u7247\uff09 \u4ece 0 \u5f00\u59cb\u7684\u9875\u7801\u7d22\u5f15 Element \u9875\u9762\u5185\u7684\u4e00\u4e2a\u5185\u5bb9\u5355\u5143\uff08\u5982\u8868\u683c\u3001\u6bb5\u843d\u3001\u56fe\u8868\u3001\u56fe\u7247\uff09 MCP Server \u5206\u914d\u7684\u5143\u7d20 ID"},{"location":"specification/finder/#\u5143\u7d20\u7c7b\u578b","title":"\u5143\u7d20\u7c7b\u578b","text":"<p>DPE \u6a21\u578b\u5b9a\u4e49\u4e86 19 \u79cd\u6807\u51c6\u5143\u7d20\u7c7b\u578b\uff0c\u8986\u76d6\u5e38\u89c1\u6587\u6863\u5185\u5bb9\uff1a</p> \u5206\u7c7b \u5143\u7d20\u7c7b\u578b \u8bf4\u660e \u6587\u672c\u7c7b <code>text</code> \u7eaf\u6587\u672c/\u5bcc\u6587\u672c\u6bb5\u843d <code>heading</code> \u6807\u9898\uff08\u542b\u5c42\u7ea7\uff09 <code>list</code> \u5217\u8868\uff08\u6709\u5e8f/\u65e0\u5e8f\uff09 <code>code</code> \u4ee3\u7801\u5757 \u8868\u683c\u7c7b <code>table</code> \u8868\u683c\u6570\u636e <code>pivot_table</code> \u6570\u636e\u900f\u89c6\u8868 \u53ef\u89c6\u5316 <code>chart</code> \u56fe\u8868\uff08\u67f1\u72b6\u56fe\u3001\u6298\u7ebf\u56fe\u7b49\uff09 <code>diagram</code> \u6d41\u7a0b\u56fe/\u67b6\u6784\u56fe <code>image</code> \u5d4c\u5165\u56fe\u7247 \u6570\u636e\u7c7b <code>formula</code> \u516c\u5f0f/\u8ba1\u7b97\u8868\u8fbe\u5f0f <code>link</code> \u8d85\u94fe\u63a5/\u5f15\u7528 <code>annotation</code> \u6279\u6ce8/\u8bc4\u8bba \u5e03\u5c40\u7c7b <code>header</code> \u9875\u7709 <code>footer</code> \u9875\u811a <code>separator</code> \u5206\u9694\u7b26 \u5a92\u4f53\u7c7b <code>audio</code> \u97f3\u9891\u5d4c\u5165 <code>video</code> \u89c6\u9891\u5d4c\u5165 \u4ea4\u4e92\u7c7b <code>form</code> \u8868\u5355 <code>widget</code> \u81ea\u5b9a\u4e49\u63a7\u4ef6"},{"location":"specification/finder/#\u5143\u6570\u636e\u4f53\u7cfb","title":"\u5143\u6570\u636e\u4f53\u7cfb","text":"<p>\u6bcf\u4e2a DPE \u5c42\u7ea7\u90fd\u643a\u5e26\u5143\u6570\u636e\uff0c\u7528\u4e8e\u63cf\u8ff0\u5185\u5bb9\u7684\u5c5e\u6027\u548c\u4e0a\u4e0b\u6587\u4fe1\u606f\uff1a</p> <p>\u6587\u6863\u7ea7\u5143\u6570\u636e:</p> \u5b57\u6bb5 \u7c7b\u578b \u8bf4\u660e <code>title</code> <code>str</code> \u6587\u6863\u6807\u9898 <code>file_type</code> <code>str</code> \u6587\u4ef6\u7c7b\u578b\uff08<code>xlsx</code>\u3001<code>pdf</code>\u3001<code>pptx</code> \u7b49\uff09 <code>page_count</code> <code>int</code> \u603b\u9875\u6570 <code>keywords</code> <code>list[str]</code> \u5173\u952e\u8bcd\u5217\u8868 <code>summary</code> <code>str</code> \u6587\u6863\u6458\u8981 <code>last_modified</code> <code>str</code> \u6700\u540e\u4fee\u6539\u65f6\u95f4\uff08ISO 8601\uff09 <code>file_uri</code> <code>str</code> \u539f\u59cb\u6587\u4ef6 URI <p>\u9875\u9762\u7ea7\u5143\u6570\u636e:</p> \u5b57\u6bb5 \u7c7b\u578b \u8bf4\u660e <code>page_index</code> <code>int</code> \u9875\u7801\uff08\u4ece 0 \u5f00\u59cb\uff09 <code>title</code> <code>str</code> \u9875\u9762\u6807\u9898\uff08\u5982\u5de5\u4f5c\u8868\u540d\uff09 <code>element_count</code> <code>int</code> \u5143\u7d20\u6570\u91cf <p>\u5143\u7d20\u7ea7\u5143\u6570\u636e:</p> \u5b57\u6bb5 \u7c7b\u578b \u8bf4\u660e <code>element_id</code> <code>str</code> \u5143\u7d20\u552f\u4e00\u6807\u8bc6 <code>category</code> <code>str</code> \u5143\u7d20\u7c7b\u578b\uff08\u89c1\u4e0a\u65b9 19 \u79cd\u7c7b\u578b\uff09 <code>summary</code> <code>str</code> \u5143\u7d20\u5185\u5bb9\u6458\u8981"},{"location":"specification/finder/#dpe-uri-\u534f\u8bae","title":"dpe:// URI \u534f\u8bae","text":""},{"location":"specification/finder/#uri-\u683c\u5f0f","title":"URI \u683c\u5f0f","text":"<pre><code>dpe://{host}/{doc-ref}[/sub-path][?query-params]\n</code></pre>"},{"location":"specification/finder/#\u7ec4\u6210\u90e8\u5206","title":"\u7ec4\u6210\u90e8\u5206","text":"\u7ec4\u4ef6 \u5fc5\u586b \u8bf4\u660e \u7ea6\u675f <code>scheme</code> \u662f \u56fa\u5b9a <code>dpe</code> \u5fc5\u987b\u4e3a <code>dpe</code>\uff0c\u5426\u5219\u89e3\u6790\u5931\u8d25 <code>host</code> \u662f MCP Server \u552f\u4e00\u6807\u8bc6 \u4e0d\u80fd\u4e3a\u7a7a\uff1b\u63a8\u8350\u53cd\u5411\u57df\u540d\u98ce\u683c\uff0c\u5982 <code>com.example.mcp</code> <code>doc-ref</code> \u5426 \u6587\u6863\u5f15\u7528\u952e\uff08MCP Server \u5206\u914d\u7684\u4e0d\u900f\u660e\u77ed\u952e\uff09 URL-safe \u6216 URL-encoded <code>sub-path</code> \u5426 \u6587\u6863\u5185\u5bfc\u822a\u8def\u5f84 <code>pages/{N}</code> \u6216 <code>elements/{ID}</code>"},{"location":"specification/finder/#\u56db\u7ea7\u6e10\u8fdb\u5f0f\u5bfb\u5740","title":"\u56db\u7ea7\u6e10\u8fdb\u5f0f\u5bfb\u5740","text":"<p>DPE URI \u652f\u6301\u56db\u4e2a\u7ea7\u522b\u7684\u6e10\u8fdb\u5f0f\u5bfb\u5740\uff0cAgent \u53ef\u4ee5\u4ece\u76ee\u5f55\u5f00\u59cb\u9010\u5c42\u6df1\u5165\uff1a</p> <pre><code>Level 0: dpe://host                        \u2192 \u6587\u6863\u76ee\u5f55\nLevel 1: dpe://host/doc-ref                \u2192 \u6587\u6863\u5143\u6570\u636e + \u9875\u9762\u7d22\u5f15\nLevel 2: dpe://host/doc-ref/pages/{N}      \u2192 \u9875\u9762\u5185\u5bb9\uff08\u5143\u7d20\u5217\u8868\uff09\nLevel 3: dpe://host/doc-ref/elements/{ID}  \u2192 \u5143\u7d20\u8be6\u60c5\n</code></pre> \u7ea7\u522b URI \u793a\u4f8b \u8fd4\u56de\u5185\u5bb9 \u5178\u578b\u7528\u9014 Level 0 <code>dpe://com.example.docs</code> \u8be5 Server \u4e0b\u6240\u6709\u6587\u6863\u7684\u6458\u8981\u5217\u8868 \u6d4f\u89c8\u53ef\u7528\u6587\u6863 Level 1 <code>dpe://com.example.docs/rpt-2026</code> \u6587\u6863\u5143\u6570\u636e + \u9875\u9762\u7d22\u5f15 \u4e86\u89e3\u6587\u6863\u7ed3\u6784 Level 2 <code>dpe://com.example.docs/rpt-2026/pages/0</code> \u7b2c 0 \u9875\u7684\u5143\u7d20\u5217\u8868 \u9605\u8bfb\u9875\u9762\u5185\u5bb9 Level 3 <code>dpe://com.example.docs/rpt-2026/elements/tbl-001</code> \u5143\u7d20\u7684\u5b8c\u6574\u8be6\u60c5 \u67e5\u770b\u5177\u4f53\u5143\u7d20"},{"location":"specification/finder/#\u67e5\u8be2\u53c2\u6570","title":"\u67e5\u8be2\u53c2\u6570","text":"\u53c2\u6570 \u9002\u7528\u7ea7\u522b \u7c7b\u578b \u8bf4\u660e \u9ed8\u8ba4 <code>format</code> \u6240\u6709 <code>json</code> / <code>markdown</code> / <code>text</code> \u54cd\u5e94\u683c\u5f0f <code>json</code> <code>depth</code> Level 1 <code>metadata</code> / <code>pages</code> \u5305\u542b\u6df1\u5ea6 <code>metadata</code> <code>offset</code> Level 1 int &gt;= 0 \u9875\u9762\u5206\u9875\u504f\u79fb <code>0</code> <code>limit</code> Level 1 int [1, 100] \u9875\u9762\u5206\u9875\u9650\u5236 <code>20</code> <code>categories</code> Level 2 \u9017\u53f7\u5206\u9694 \u5143\u7d20\u7c7b\u578b\u8fc7\u6ee4 \u5168\u90e8"},{"location":"specification/finder/#\u6821\u9a8c\u89c4\u5219","title":"\u6821\u9a8c\u89c4\u5219","text":"<ol> <li><code>scheme</code> \u5fc5\u987b\u4e3a <code>dpe</code></li> <li><code>host</code> \u4e0d\u80fd\u4e3a\u7a7a</li> <li><code>sub-path</code> \u82e5\u5b58\u5728\uff0c\u5fc5\u987b\u5339\u914d <code>pages/{\u975e\u8d1f\u6574\u6570}</code> \u6216 <code>elements/{\u975e\u7a7a\u5b57\u7b26\u4e32}</code></li> <li><code>format</code> \u82e5\u5b58\u5728\uff0c\u5fc5\u987b\u4e3a <code>json</code>\u3001<code>markdown</code>\u3001<code>text</code> \u4e4b\u4e00</li> <li><code>depth</code> \u82e5\u5b58\u5728\uff0c\u5fc5\u987b\u4e3a <code>metadata</code> \u6216 <code>pages</code></li> <li><code>offset</code> \u82e5\u5b58\u5728\uff0c\u5fc5\u987b\u4e3a\u975e\u8d1f\u6574\u6570</li> <li><code>limit</code> \u82e5\u5b58\u5728\uff0c\u5fc5\u987b\u4e3a <code>[1, 100]</code> \u8303\u56f4\u5185\u7684\u6574\u6570</li> <li><code>categories</code> \u82e5\u5b58\u5728\uff0c\u5fc5\u987b\u662f\u5408\u6cd5\u7684\u5143\u7d20\u7c7b\u578b\uff08\u89c1 \u5143\u7d20\u7c7b\u578b\uff09\u7684\u9017\u53f7\u5206\u9694\u5217\u8868</li> </ol>"},{"location":"specification/finder/#uri-\u793a\u4f8b","title":"URI \u793a\u4f8b","text":"<p>Level 0 \u2014 \u6587\u6863\u76ee\u5f55:</p> <pre><code>dpe://com.example.docs\n</code></pre> <p>Level 1 \u2014 \u6587\u6863\u5143\u6570\u636e\uff08\u542b\u9875\u9762\u7d22\u5f15\uff09:</p> <pre><code>dpe://com.example.docs/rpt-2026?depth=pages&amp;offset=0&amp;limit=10\n</code></pre> <p>Level 2 \u2014 \u9875\u9762\u5185\u5bb9\uff08\u4ec5\u8868\u683c\u5143\u7d20\uff09:</p> <pre><code>dpe://com.example.docs/rpt-2026/pages/0?categories=table,pivot_table&amp;format=markdown\n</code></pre> <p>Level 3 \u2014 \u5143\u7d20\u8be6\u60c5:</p> <pre><code>dpe://com.example.docs/rpt-2026/elements/tbl-001?format=json\n</code></pre>"},{"location":"specification/finder/#finder-\u5185\u5bb9\u683c\u5f0f","title":"Finder \u5185\u5bb9\u683c\u5f0f","text":""},{"location":"specification/finder/#level-0--\u6587\u6863\u76ee\u5f55","title":"Level 0 \u2014 \u6587\u6863\u76ee\u5f55","text":"<pre><code>{\n  \"documents\": [\n    {\n      \"doc_ref\": \"rpt-2026\",\n      \"uri\": \"dpe://com.example.docs/rpt-2026\",\n      \"file_uri\": \"file:///data/reports/2026-annual.xlsx\",\n      \"file_type\": \"xlsx\",\n      \"title\": \"2026 \u5e74\u5ea6\u62a5\u544a\",\n      \"page_count\": 12,\n      \"keywords\": [\"\u8d22\u52a1\", \"\u5e74\u62a5\"],\n      \"summary\": \"2026 \u5e74\u5ea6\u8d22\u52a1\u4e0e\u8fd0\u8425\u62a5\u544a\",\n      \"last_modified\": \"2026-01-15T08:30:00Z\"\n    },\n    {\n      \"doc_ref\": \"contract-a1\",\n      \"uri\": \"dpe://com.example.docs/contract-a1\",\n      \"file_uri\": \"file:///data/contracts/a1.pdf\",\n      \"file_type\": \"pdf\",\n      \"title\": \"A1 \u5408\u540c\",\n      \"page_count\": 5,\n      \"keywords\": [\"\u5408\u540c\"],\n      \"summary\": \"A1 \u9879\u76ee\u670d\u52a1\u5408\u540c\",\n      \"last_modified\": \"2026-02-01T14:00:00Z\"\n    }\n  ],\n  \"total_count\": 2\n}\n</code></pre>"},{"location":"specification/finder/#level-1--\u6587\u6863\u5143\u6570\u636e--\u9875\u9762\u7d22\u5f15","title":"Level 1 \u2014 \u6587\u6863\u5143\u6570\u636e + \u9875\u9762\u7d22\u5f15","text":"<p><code>depth=metadata</code>\uff08\u9ed8\u8ba4\uff09:</p> <pre><code>{\n  \"doc_ref\": \"rpt-2026\",\n  \"uri\": \"dpe://com.example.docs/rpt-2026\",\n  \"file_uri\": \"file:///data/reports/2026-annual.xlsx\",\n  \"file_type\": \"xlsx\",\n  \"title\": \"2026 \u5e74\u5ea6\u62a5\u544a\",\n  \"page_count\": 12,\n  \"keywords\": [\"\u8d22\u52a1\", \"\u5e74\u62a5\"],\n  \"summary\": \"2026 \u5e74\u5ea6\u8d22\u52a1\u4e0e\u8fd0\u8425\u62a5\u544a\",\n  \"last_modified\": \"2026-01-15T08:30:00Z\"\n}\n</code></pre> <p><code>depth=pages</code>:</p> <pre><code>{\n  \"doc_ref\": \"rpt-2026\",\n  \"uri\": \"dpe://com.example.docs/rpt-2026\",\n  \"file_uri\": \"file:///data/reports/2026-annual.xlsx\",\n  \"file_type\": \"xlsx\",\n  \"title\": \"2026 \u5e74\u5ea6\u62a5\u544a\",\n  \"page_count\": 12,\n  \"keywords\": [\"\u8d22\u52a1\", \"\u5e74\u62a5\"],\n  \"summary\": \"2026 \u5e74\u5ea6\u8d22\u52a1\u4e0e\u8fd0\u8425\u62a5\u544a\",\n  \"last_modified\": \"2026-01-15T08:30:00Z\",\n  \"pages\": [\n    {\n      \"page_index\": 0,\n      \"title\": \"\u6982\u89c8\",\n      \"element_count\": 8,\n      \"uri\": \"dpe://com.example.docs/rpt-2026/pages/0\",\n      \"doc_ref\": \"rpt-2026\"\n    },\n    {\n      \"page_index\": 1,\n      \"title\": \"\u6536\u5165\u5206\u6790\",\n      \"element_count\": 15,\n      \"uri\": \"dpe://com.example.docs/rpt-2026/pages/1\",\n      \"doc_ref\": \"rpt-2026\"\n    }\n  ],\n  \"page_offset\": 0,\n  \"page_limit\": 20,\n  \"page_total\": 12\n}\n</code></pre>"},{"location":"specification/finder/#level-2--\u9875\u9762\u5185\u5bb9","title":"Level 2 \u2014 \u9875\u9762\u5185\u5bb9","text":"<pre><code>{\n  \"page_index\": 0,\n  \"title\": \"\u6982\u89c8\",\n  \"doc_ref\": \"rpt-2026\",\n  \"uri\": \"dpe://com.example.docs/rpt-2026/pages/0\",\n  \"elements\": [\n    {\n      \"element_id\": \"h-001\",\n      \"category\": \"heading\",\n      \"summary\": \"2026 \u5e74\u5ea6\u603b\u7ed3\",\n      \"content\": {\n        \"level\": 1,\n        \"text\": \"2026 \u5e74\u5ea6\u603b\u7ed3\"\n      }\n    },\n    {\n      \"element_id\": \"txt-001\",\n      \"category\": \"text\",\n      \"summary\": \"\u62a5\u544a\u5f15\u8a00\u6bb5\u843d\",\n      \"content\": {\n        \"text\": \"\u672c\u62a5\u544a\u603b\u7ed3\u4e86 2026 \u5e74\u5ea6\u516c\u53f8\u5728\u5404\u4e1a\u52a1\u9886\u57df\u7684\u8fd0\u8425\u60c5\u51b5...\"\n      }\n    },\n    {\n      \"element_id\": \"tbl-001\",\n      \"category\": \"table\",\n      \"summary\": \"\u5b63\u5ea6\u6536\u5165\u5bf9\u6bd4\u8868\uff084\u884c3\u5217\uff09\",\n      \"content\": {\n        \"headers\": [\"\u5b63\u5ea6\", \"\u6536\u5165\uff08\u4e07\u5143\uff09\", \"\u540c\u6bd4\u589e\u957f\"],\n        \"rows\": [\n          [\"Q1\", \"1,250\", \"+12%\"],\n          [\"Q2\", \"1,380\", \"+15%\"],\n          [\"Q3\", \"1,420\", \"+8%\"],\n          [\"Q4\", \"1,560\", \"+18%\"]\n        ]\n      }\n    },\n    {\n      \"element_id\": \"chart-001\",\n      \"category\": \"chart\",\n      \"summary\": \"\u5b63\u5ea6\u6536\u5165\u8d8b\u52bf\u56fe\",\n      \"content\": {\n        \"chart_type\": \"line\",\n        \"title\": \"\u5b63\u5ea6\u6536\u5165\u8d8b\u52bf\",\n        \"data_summary\": \"Q1-Q4 \u6536\u5165\u5448\u4e0a\u5347\u8d8b\u52bf\uff0cQ4 \u8fbe\u5230\u6700\u9ad8\u70b9 1,560 \u4e07\u5143\"\n      }\n    }\n  ],\n  \"element_count\": 4\n}\n</code></pre>"},{"location":"specification/finder/#level-3--\u5143\u7d20\u8be6\u60c5","title":"Level 3 \u2014 \u5143\u7d20\u8be6\u60c5","text":"<pre><code>{\n  \"element_id\": \"tbl-001\",\n  \"category\": \"table\",\n  \"doc_ref\": \"rpt-2026\",\n  \"page_index\": 0,\n  \"uri\": \"dpe://com.example.docs/rpt-2026/elements/tbl-001\",\n  \"summary\": \"\u5b63\u5ea6\u6536\u5165\u5bf9\u6bd4\u8868\uff084\u884c3\u5217\uff09\",\n  \"content\": {\n    \"headers\": [\"\u5b63\u5ea6\", \"\u6536\u5165\uff08\u4e07\u5143\uff09\", \"\u540c\u6bd4\u589e\u957f\"],\n    \"rows\": [\n      [\"Q1\", \"1,250\", \"+12%\"],\n      [\"Q2\", \"1,380\", \"+15%\"],\n      [\"Q3\", \"1,420\", \"+8%\"],\n      [\"Q4\", \"1,560\", \"+18%\"]\n    ],\n    \"total_rows\": 4,\n    \"total_columns\": 3\n  },\n  \"metadata\": {\n    \"source_range\": \"A1:C5\",\n    \"has_formulas\": true\n  }\n}\n</code></pre>"},{"location":"specification/finder/#markdown-\u6e32\u67d3\u89c4\u5219","title":"Markdown \u6e32\u67d3\u89c4\u5219","text":"<p>\u5f53 <code>format=markdown</code> \u65f6\uff0c\u5404\u5143\u7d20\u6309\u4ee5\u4e0b\u89c4\u5219\u6e32\u67d3\u4e3a Markdown \u6587\u672c\uff1a</p> \u5143\u7d20\u7c7b\u578b Markdown \u6e32\u67d3 <code>heading</code> <code># / ## / ###</code> \u7b49\uff0c\u6839\u636e <code>level</code> \u786e\u5b9a <code>text</code> \u76f4\u63a5\u8f93\u51fa\u6587\u672c\uff0c\u4fdd\u7559\u6bb5\u843d\u6362\u884c <code>table</code> \u6807\u51c6 Markdown \u8868\u683c\uff08<code>\\| ... \\|</code> \u683c\u5f0f\uff09 <code>list</code> \u6709\u5e8f\u5217\u8868 <code>1.</code> \u6216\u65e0\u5e8f\u5217\u8868 <code>-</code> <code>code</code> \u56f4\u680f\u4ee3\u7801\u5757 <code>```</code> <code>chart</code> <code>[\u56fe\u8868: {title}] {data_summary}</code> <code>image</code> <code>![{alt}]({url})</code> \u6216 <code>[\u56fe\u7247: {description}]</code> <code>link</code> <code>[{text}]({url})</code> <code>formula</code> <code>$ {expression} $</code> \u5176\u4ed6\u7c7b\u578b <code>[{category}: {summary}]</code>"},{"location":"specification/finder/#finder-organizer-\u7b56\u7565","title":"Finder Organizer \u7b56\u7565","text":""},{"location":"specification/finder/#\u6982\u8ff0_1","title":"\u6982\u8ff0","text":"<p>Computer \u901a\u8fc7 <code>organize_finder(documents, keywords, file_type, history)</code> \u51fd\u6570\u5bf9\u6765\u81ea\u591a\u4e2a MCP Server \u7684\u6587\u6863\u8fdb\u884c\u7ec4\u7ec7\uff0c\u8f93\u51fa\u7ecf\u8fc7\u8fc7\u6ee4\u3001\u6392\u5e8f\u548c\u5206\u9875\u7684\u6587\u6863\u76ee\u5f55\u3002</p>"},{"location":"specification/finder/#\u6b65\u9aa4-1\u8fc7\u6ee4","title":"\u6b65\u9aa4 1\uff1a\u8fc7\u6ee4","text":"<ul> <li>\u5173\u952e\u8bcd\u8fc7\u6ee4\uff08<code>keywords</code>\uff09: \u5339\u914d\u6587\u6863\u7684 <code>title</code>\u3001<code>keywords</code>\u3001<code>summary</code> \u5b57\u6bb5\uff08\u4efb\u4e00\u547d\u4e2d\u5373\u4fdd\u7559\uff09</li> <li>\u6587\u4ef6\u7c7b\u578b\u8fc7\u6ee4\uff08<code>file_type</code>\uff09: \u7cbe\u786e\u5339\u914d\u6587\u6863\u7684 <code>file_type</code> \u5b57\u6bb5</li> <li>\u65e0\u6548\u6587\u6863\u8fc7\u6ee4: \u8df3\u8fc7 URI \u65e0\u6548\uff08\u975e <code>dpe://</code> \u6216\u89e3\u6790\u5931\u8d25\uff09\u7684\u6587\u6863</li> </ul>"},{"location":"specification/finder/#\u6b65\u9aa4-2mcp-server-\u4f18\u5148\u7ea7\u6392\u5e8f","title":"\u6b65\u9aa4 2\uff1aMCP Server \u4f18\u5148\u7ea7\u6392\u5e8f","text":"<p>\u4e0e Desktop \u4e00\u81f4\uff0c\u6839\u636e\u5de5\u5177\u8c03\u7528\u5386\u53f2\u786e\u5b9a Server \u7684\u5c55\u793a\u987a\u5e8f\uff1a</p> <ol> <li>\u53cd\u5411\u904d\u5386\u5de5\u5177\u8c03\u7528\u5386\u53f2\u8bb0\u5f55\uff0c\u53bb\u91cd\u540e\u5f97\u5230\u6700\u8fd1\u4f7f\u7528\u7684 Server \u5217\u8868\uff08\u6700\u8fd1\u4f7f\u7528\u7684\u6392\u5728\u524d\u9762\uff09</li> <li>\u672a\u51fa\u73b0\u5728\u5386\u53f2\u4e2d\u7684 Server \u6309\u540d\u79f0\u5b57\u6bcd\u5e8f\u8ffd\u52a0\u5230\u672b\u5c3e</li> </ol>"},{"location":"specification/finder/#\u6b65\u9aa4-3server-\u5185\u6392\u5e8f","title":"\u6b65\u9aa4 3\uff1aServer \u5185\u6392\u5e8f","text":"<p>\u540c\u4e00 Server \u5185\u7684\u6587\u6863\u6309 <code>last_modified</code> \u964d\u5e8f\u6392\u5217\uff08\u6700\u8fd1\u4fee\u6539\u7684\u5728\u524d\uff09\u3002\u672a\u6307\u5b9a <code>last_modified</code> \u7684\u6587\u6863\u6392\u5728\u672b\u5c3e\u3002</p>"},{"location":"specification/finder/#\u6b65\u9aa4-4\u5206\u9875","title":"\u6b65\u9aa4 4\uff1a\u5206\u9875","text":"<ul> <li><code>offset</code> \u6307\u5b9a\u8d77\u59cb\u4f4d\u7f6e\uff08\u9ed8\u8ba4 <code>0</code>\uff09</li> <li><code>limit</code> \u6307\u5b9a\u8fd4\u56de\u6570\u91cf\uff08\u9ed8\u8ba4 <code>20</code>\uff0c\u6700\u5927 <code>100</code>\uff09</li> <li>\u8fd4\u56de\u7ed3\u679c\u4e2d\u5305\u542b <code>total_count</code> \u4f9b Agent \u5224\u65ad\u662f\u5426\u9700\u8981\u7ee7\u7eed\u7ffb\u9875</li> </ul>"},{"location":"specification/finder/#\u7b97\u6cd5\u6d41\u7a0b\u56fe","title":"\u7b97\u6cd5\u6d41\u7a0b\u56fe","text":"<pre><code>flowchart TD\n    A[\u8f93\u5165: documents, keywords, file_type, history] --&gt; B[\u8fc7\u6ee4\u65e0\u6548\u6587\u6863]\n    B --&gt; C{keywords \u975e\u7a7a?}\n    C -- \u662f --&gt; D[\u5173\u952e\u8bcd\u5339\u914d\u8fc7\u6ee4]\n    C -- \u5426 --&gt; E{file_type \u975e\u7a7a?}\n    D --&gt; E\n    E -- \u662f --&gt; F[\u6587\u4ef6\u7c7b\u578b\u8fc7\u6ee4]\n    E -- \u5426 --&gt; G[\u6309 Server \u4f18\u5148\u7ea7\u6392\u5e8f]\n    F --&gt; G\n    G --&gt; H[Server \u5185\u6309 last_modified \u964d\u5e8f]\n    H --&gt; I[\u5e94\u7528 offset/limit \u5206\u9875]\n    I --&gt; J[\u8fd4\u56de\u6587\u6863\u5217\u8868 + total_count]\n</code></pre>"},{"location":"specification/finder/#\u66f4\u65b0\u673a\u5236","title":"\u66f4\u65b0\u673a\u5236","text":""},{"location":"specification/finder/#\u53d8\u5316\u68c0\u6d4bcomputer-\u7aef","title":"\u53d8\u5316\u68c0\u6d4b\uff08Computer \u7aef\uff09","text":"<p>Computer \u901a\u8fc7\u76d1\u542c MCP Server \u7684\u8d44\u6e90\u53d8\u66f4\u901a\u77e5\u6765\u68c0\u6d4b\u6587\u6863\u53d8\u5316\uff1a</p>"},{"location":"specification/finder/#1-\u8d44\u6e90\u5217\u8868\u53d8\u5316resourcelistchangednotification","title":"1. \u8d44\u6e90\u5217\u8868\u53d8\u5316\uff08ResourceListChangedNotification\uff09","text":"<pre><code>MCP Server \u53d1\u51fa ResourceListChangedNotification\n    \u2192 Computer \u6536\u96c6\u5f53\u524d\u6240\u6709 dpe:// URI\n    \u2192 \u4e0e\u7f13\u5b58\u7684 URI \u96c6\u5408\u6bd4\u8f83\n    \u2192 \u96c6\u5408\u4e0d\u540c \u2192 \u89e6\u53d1 Finder \u5237\u65b0\n    \u2192 \u96c6\u5408\u76f8\u540c \u2192 \u8df3\u8fc7\uff08\u4ec5\u8bb0\u5f55\u65e5\u5fd7\uff09\n</code></pre>"},{"location":"specification/finder/#2-\u8d44\u6e90\u5185\u5bb9\u66f4\u65b0resourceupdatednotification","title":"2. \u8d44\u6e90\u5185\u5bb9\u66f4\u65b0\uff08ResourceUpdatedNotification\uff09","text":"<pre><code>MCP Server \u53d1\u51fa ResourceUpdatedNotification (\u643a\u5e26\u5177\u4f53 URI)\n    \u2192 Computer \u68c0\u67e5\u8be5 URI \u662f\u5426\u4e3a dpe://\n    \u2192 \u662f \u2192 \u76f4\u63a5\u89e6\u53d1 Finder \u5237\u65b0\uff08\u65e0\u9700\u96c6\u5408\u6bd4\u8f83\uff0c\u964d\u4f4e\u5ef6\u8fdf\uff09\n    \u2192 \u5426 \u2192 \u5ffd\u7565\n</code></pre>"},{"location":"specification/finder/#3-agent-\u4e3b\u52a8\u62c9\u53d6","title":"3. Agent \u4e3b\u52a8\u62c9\u53d6","text":"<p>Agent \u53ef\u5728\u4efb\u4f55\u65f6\u5019\u901a\u8fc7 <code>client:get_finder</code> \u4e8b\u4ef6\u4e3b\u52a8\u83b7\u53d6\u6700\u65b0\u6587\u6863\u76ee\u5f55\uff0c\u65e0\u9700\u7b49\u5f85\u901a\u77e5\u3002</p>"},{"location":"specification/finder/#\u4e8b\u4ef6\u6d41","title":"\u4e8b\u4ef6\u6d41","text":"<p>\u5f53 Computer \u68c0\u6d4b\u5230\u6587\u6863\u53d8\u5316\u65f6\uff0c\u901a\u8fc7\u4ee5\u4e0b\u4e8b\u4ef6\u94fe\u901a\u77e5 Agent\uff1a</p> <pre><code>Computer \u2500\u2500[server:update_finder]\u2500\u2500\u2192 Server \u2500\u2500[notify:update_finder]\u2500\u2500\u2192 Agent\n</code></pre> <p>\u4e24\u4e2a\u4e8b\u4ef6\u5747\u590d\u7528 <code>UpdateComputerConfigReq</code> \u6570\u636e\u7ed3\u6784\uff1a</p> <pre><code>{\n    \"computer\": str   # Computer \u540d\u79f0\n}\n</code></pre> <p>Agent \u6536\u5230 <code>notify:update_finder</code> \u540e\uff0c\u5efa\u8bae\u81ea\u52a8\u8c03\u7528 <code>client:get_finder</code> \u83b7\u53d6\u6700\u65b0\u6587\u6863\u76ee\u5f55\u3002</p>"},{"location":"specification/finder/#\u5b8c\u6574\u901a\u77e5\u94fe\u65f6\u5e8f\u56fe","title":"\u5b8c\u6574\u901a\u77e5\u94fe\u65f6\u5e8f\u56fe","text":""},{"location":"specification/finder/#\u521d\u59cb\u62c9\u53d6\u6d41\u7a0b","title":"\u521d\u59cb\u62c9\u53d6\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant A as Agent\n    participant S as Server\n    participant C as Computer\n\n    A-&gt;&gt;S: client:get_finder (GetFinderReq)\n    S-&gt;&gt;C: client:get_finder (\u8f6c\u53d1)\n    C-&gt;&gt;C: organize_finder()\n    C-&gt;&gt;S: GetFinderRet\n    S-&gt;&gt;A: GetFinderRet\n</code></pre>"},{"location":"specification/finder/#\u6587\u6863\u5217\u8868\u53d8\u5316\u89e6\u53d1\u6d41\u7a0b","title":"\u6587\u6863\u5217\u8868\u53d8\u5316\u89e6\u53d1\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant M as MCP Server\n    participant C as Computer\n    participant S as Server\n    participant A as Agent\n\n    Note over M: \u6587\u6863\u589e\u5220\uff08\u5982\u65b0\u589e dpe:// \u8d44\u6e90\uff09\n    M-&gt;&gt;C: ResourceListChangedNotification\n    C-&gt;&gt;C: \u6536\u96c6 dpe:// URI \u96c6\u5408\n    C-&gt;&gt;C: \u4e0e\u7f13\u5b58\u6bd4\u8f83 \u2192 \u96c6\u5408\u4e0d\u540c\n    C-&gt;&gt;S: server:update_finder {\"computer\": \"...\"}\n    S-&gt;&gt;A: notify:update_finder {\"computer\": \"...\"}\n    A-&gt;&gt;S: client:get_finder (GetFinderReq)\n    S-&gt;&gt;C: client:get_finder (\u8f6c\u53d1)\n    C-&gt;&gt;C: organize_finder()\n    C-&gt;&gt;S: GetFinderRet\n    S-&gt;&gt;A: GetFinderRet\n</code></pre>"},{"location":"specification/finder/#\u6587\u6863\u5185\u5bb9\u53d8\u5316\u89e6\u53d1\u6d41\u7a0b","title":"\u6587\u6863\u5185\u5bb9\u53d8\u5316\u89e6\u53d1\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant M as MCP Server\n    participant C as Computer\n    participant S as Server\n    participant A as Agent\n\n    Note over M: \u6587\u6863\u5185\u5bb9\u66f4\u65b0\n    M-&gt;&gt;C: ResourceUpdatedNotification (uri=dpe://...)\n    C-&gt;&gt;C: \u786e\u8ba4\u4e3a dpe:// URI\n    C-&gt;&gt;S: server:update_finder {\"computer\": \"...\"}\n    S-&gt;&gt;A: notify:update_finder {\"computer\": \"...\"}\n    A-&gt;&gt;S: client:get_finder (GetFinderReq)\n    S-&gt;&gt;C: client:get_finder (\u8f6c\u53d1)\n    C-&gt;&gt;C: organize_finder()\n    C-&gt;&gt;S: GetFinderRet\n    S-&gt;&gt;A: GetFinderRet\n</code></pre>"},{"location":"specification/finder/#agent-\u7aef\u5bfc\u822a","title":"Agent \u7aef\u5bfc\u822a","text":""},{"location":"specification/finder/#\u534f\u8bae\u804c\u8d23\u8fb9\u754c","title":"\u534f\u8bae\u804c\u8d23\u8fb9\u754c","text":"<p>Finder \u534f\u8bae\u4ec5\u5b9a\u4e49\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ol> <li>DPE \u6570\u636e\u683c\u5f0f\uff1aDocument-Page-Element \u4e09\u5c42\u7ed3\u6784\u53ca\u5176\u5143\u6570\u636e\u4f53\u7cfb</li> <li><code>dpe://</code> URI \u5bfb\u5740\uff1a\u56db\u7ea7\u6e10\u8fdb\u5f0f URI \u89c4\u8303</li> <li>\u4f20\u8f93\u4e8b\u4ef6\uff1a<code>client:get_finder</code> / <code>server:update_finder</code> / <code>notify:update_finder</code></li> <li>MCP \u8d44\u6e90\u8bfb\u53d6\uff1a\u901a\u8fc7\u6807\u51c6 MCP <code>resources/read</code> \u6309 URI \u7ea7\u522b\u83b7\u53d6\u5185\u5bb9</li> </ol> <p>Agent \u5185\u90e8\u7684\u5bfc\u822a\u5b9e\u73b0\uff08\u5982\u5206\u9875\u904d\u5386\u3001\u5173\u952e\u8bcd\u641c\u7d22\u3001\u683c\u5f0f\u8f6c\u6362\u3001\u7f13\u5b58\u7b56\u7565\u7b49\uff09\u4e0d\u5728\u534f\u8bae\u8303\u56f4\u5185\uff0c\u7531\u5404 Agent \u81ea\u884c\u51b3\u5b9a\u3002</p>"},{"location":"specification/finder/#\u8bbe\u8ba1\u7406\u7531","title":"\u8bbe\u8ba1\u7406\u7531","text":"<ul> <li>\u907f\u514d\u5de5\u5177\u51b2\u7a81: \u5f53 Agent \u540c\u65f6\u8fde\u63a5\u591a\u4e2a Computer \u65f6\uff0c\u6bcf\u4e2a Computer \u6ce8\u518c\u540c\u540d\u5185\u7f6e\u5de5\u5177\u4f1a\u4ea7\u751f\u51b2\u7a81</li> <li>DPE \u6570\u636e\u5b8c\u6574\u53ef\u83b7\u53d6: <code>client:get_finder</code> \u5df2\u8fd4\u56de\u5b8c\u6574\u6587\u6863\u76ee\u5f55\uff0c<code>resources/read</code> \u53ef\u6309 URI \u9010\u7ea7\u8bfb\u53d6\u4efb\u4f55\u5185\u5bb9\uff0cAgent \u65e0\u9700\u989d\u5916\u5de5\u5177\u5373\u53ef\u5b8c\u6210\u5bfc\u822a</li> <li>Agent \u5dee\u5f02\u5316: \u4e0d\u540c Agent \u5bf9\u5bfc\u822a\u4f53\u9a8c\u7684\u9700\u6c42\u4e0d\u540c\uff08\u5982\u6709\u7684\u9700\u8981\u641c\u7d22\uff0c\u6709\u7684\u53ea\u9700\u987a\u5e8f\u7ffb\u9875\uff09\uff0c\u534f\u8bae\u4e0d\u5e94\u5f3a\u5236\u7edf\u4e00</li> </ul>"},{"location":"specification/finder/#\u6e10\u8fdb\u5f0f\u5bfc\u822a\u6d41\u7a0b","title":"\u6e10\u8fdb\u5f0f\u5bfc\u822a\u6d41\u7a0b","text":"<p>Agent \u901a\u8fc7\u4ee5\u4e0b\u56db\u6b65\u5b8c\u6210\u4ece\u6587\u6863\u76ee\u5f55\u5230\u5177\u4f53\u5143\u7d20\u7684\u9010\u5c42\u94bb\u5165\uff0c\u6bcf\u4e00\u6b65\u7684\u8fd4\u56de\u503c\u90fd\u5305\u542b\u8fdb\u5165\u4e0b\u4e00\u6b65\u6240\u9700\u7684\u4fe1\u606f\uff0c\u65e0\u9700\u731c\u6d4b\u6216\u8bd5\u9519\uff1a</p> <pre><code>Step 1                    Step 2                  Step 3                  Step 4\nclient:get_finder    \u2192    resources/read L1   \u2192   resources/read L2   \u2192   resources/read L3\n\u83b7\u53d6\u6587\u6863\u5217\u8868              \u83b7\u53d6\u6587\u6863\u5143\u6570\u636e+\u9875\u9762\u7d22\u5f15    \u8bfb\u53d6\u9875\u9762\u5185\u5bb9              \u8bfb\u53d6\u5143\u7d20\u8be6\u60c5\n                          \u25b2                       \u25b2                       \u25b2\n\u8fd4\u56de\u6bcf\u4e2a\u6587\u6863\u7684             \u8fd4\u56de page_count          \u8fd4\u56de\u6bcf\u4e2a\u5143\u7d20\u7684            \u8fd4\u56de\u5143\u7d20\ndoc_ref, uri,             + pages[] \u6570\u7ec4           element_id              \u5b8c\u6574\u5185\u5bb9\npage_count \u7b49              (\u542b\u6807\u9898\u3001\u5143\u7d20\u6570)\n</code></pre>"},{"location":"specification/finder/#step-1-\u83b7\u53d6\u6587\u6863\u5217\u8868","title":"Step 1: \u83b7\u53d6\u6587\u6863\u5217\u8868","text":"<p>\u901a\u8fc7 <code>client:get_finder</code> \u83b7\u53d6\u7ecf Organizer \u6392\u5e8f\u540e\u7684\u6587\u6863\u76ee\u5f55\u3002\u6bcf\u4e2a\u6587\u6863\u6458\u8981\u4e2d\u5305\u542b <code>page_count</code>\uff0cAgent \u65e0\u9700\u989d\u5916\u8bf7\u6c42\u5373\u53ef\u77e5\u9053\u6587\u6863\u6709\u591a\u5c11\u9875\u3002</p> <pre><code>finder_ret = await agent.get_finder(computer=\"my-computer\")\nfor doc in finder_ret[\"documents\"]:\n    print(f\"{doc['title']}: {doc['page_count']} \u9875\")\n    # \u2192 \"2026 \u5e74\u5ea6\u62a5\u544a: 12 \u9875\"\n    # \u2192 \"A1 \u5408\u540c: 5 \u9875\"\n</code></pre> <p>\u53ef\u9009\u8fc7\u6ee4\u53c2\u6570\uff1a<code>keywords</code>\u3001<code>file_type</code>\u3001<code>offset</code>\u3001<code>limit</code>\u3002</p>"},{"location":"specification/finder/#step-2-\u6253\u5f00\u6587\u6863\u8bfb\u53d6-level-1","title":"Step 2: \u6253\u5f00\u6587\u6863\uff08\u8bfb\u53d6 Level 1\uff09","text":"<p>\u7528\u6587\u6863 URI \u8c03\u7528 <code>resources/read</code>\uff0c\u83b7\u53d6\u5143\u6570\u636e\u3002\u6dfb\u52a0 <code>?depth=pages</code> \u53ef\u540c\u65f6\u83b7\u53d6\u9875\u9762\u7d22\u5f15\uff08\u542b\u6807\u9898\u548c\u5143\u7d20\u6570\uff09\uff0c\u7528\u4e8e\u5c55\u793a\u76ee\u5f55\u6216\u8ba9\u7528\u6237\u9009\u62e9\u9875\u9762\u3002</p> <pre><code># \u4ec5\u5143\u6570\u636e\uff08\u9ed8\u8ba4 depth=metadata\uff09\ndoc = await agent.read_resource(\n    computer=\"my-computer\",\n    uri=\"dpe://com.example.docs/rpt-2026\"\n)\npage_count = doc[\"page_count\"]  # 12 \u2192 \u6709\u6548\u9875\u7801\u8303\u56f4: 0 ~ 11\n\n# \u5143\u6570\u636e + \u9875\u9762\u7d22\u5f15\ndoc = await agent.read_resource(\n    computer=\"my-computer\",\n    uri=\"dpe://com.example.docs/rpt-2026?depth=pages&amp;offset=0&amp;limit=10\"\n)\nfor page in doc[\"pages\"]:\n    print(f\"  \u7b2c {page['page_index']} \u9875: {page['title']} ({page['element_count']} \u5143\u7d20)\")\n    # \u2192 \"  \u7b2c 0 \u9875: \u6982\u89c8 (8 \u5143\u7d20)\"\n    # \u2192 \"  \u7b2c 1 \u9875: \u6536\u5165\u5206\u6790 (15 \u5143\u7d20)\"\n</code></pre> <p>\u5982\u4f55\u77e5\u9053\u6587\u6863\u6709\u591a\u5c11\u9875\uff1f</p> <p>Step 1 \u8fd4\u56de\u7684 <code>DPEDocumentSummary.page_count</code> \u548c Step 2 \u8fd4\u56de\u7684\u6587\u6863\u5143\u6570\u636e <code>page_count</code> \u90fd\u5305\u542b\u603b\u9875\u6570\u3002\u4e0d\u9700\u8981\u4ece 0 \u5f00\u59cb\u9010\u9875\u5c1d\u8bd5\u2014\u2014\u62ff\u5230 <code>page_count</code> \u540e\uff0c\u6709\u6548\u9875\u7801\u8303\u56f4\u5c31\u662f <code>0</code> ~ <code>page_count - 1</code>\u3002</p>"},{"location":"specification/finder/#step-3-\u9605\u8bfb\u9875\u9762\u8bfb\u53d6-level-2","title":"Step 3: \u9605\u8bfb\u9875\u9762\uff08\u8bfb\u53d6 Level 2\uff09","text":"<p>\u7528 <code>pages/{N}</code> URI \u8bfb\u53d6\u5177\u4f53\u9875\u9762\u3002\u8fd4\u56de\u503c\u5305\u542b\u8be5\u9875\u6240\u6709\u5143\u7d20\u7684 <code>element_id</code>\u3001<code>category</code>\u3001<code>summary</code> \u548c <code>content</code>\u3002</p> <pre><code># \u8bfb\u53d6\u7b2c 0 \u9875\uff08Markdown \u683c\u5f0f\uff09\npage = await agent.read_resource(\n    computer=\"my-computer\",\n    uri=\"dpe://com.example.docs/rpt-2026/pages/0?format=markdown\"\n)\n\n# \u4ec5\u83b7\u53d6\u8868\u683c\u7c7b\u5143\u7d20\npage = await agent.read_resource(\n    computer=\"my-computer\",\n    uri=\"dpe://com.example.docs/rpt-2026/pages/0?categories=table,pivot_table\"\n)\nfor elem in page[\"elements\"]:\n    print(f\"  [{elem['category']}] {elem['element_id']}: {elem['summary']}\")\n    # \u2192 \"  [table] tbl-001: \u5b63\u5ea6\u6536\u5165\u5bf9\u6bd4\u8868\uff084\u884c3\u5217\uff09\"\n</code></pre>"},{"location":"specification/finder/#step-4-\u67e5\u770b\u5143\u7d20\u8be6\u60c5\u8bfb\u53d6-level-3","title":"Step 4: \u67e5\u770b\u5143\u7d20\u8be6\u60c5\uff08\u8bfb\u53d6 Level 3\uff09","text":"<p>\u7528 <code>elements/{ID}</code> URI \u8bfb\u53d6\u5355\u4e2a\u5143\u7d20\u7684\u5b8c\u6574\u5185\u5bb9\u548c\u9644\u52a0\u5143\u6570\u636e\u3002</p> <pre><code>element = await agent.read_resource(\n    computer=\"my-computer\",\n    uri=\"dpe://com.example.docs/rpt-2026/elements/tbl-001\"\n)\n# element[\"content\"] \u2192 \u5b8c\u6574\u8868\u683c\u6570\u636e\uff08headers + rows\uff09\n# element[\"metadata\"] \u2192 {\"source_range\": \"A1:C5\", \"has_formulas\": true}\n</code></pre>"},{"location":"specification/finder/#\u5b8c\u6574\u793a\u4f8b\u904d\u5386\u6587\u6863\u6240\u6709\u9875\u9762","title":"\u5b8c\u6574\u793a\u4f8b\uff1a\u904d\u5386\u6587\u6863\u6240\u6709\u9875\u9762","text":"<pre><code># 1. \u83b7\u53d6\u6587\u6863\u76ee\u5f55\nfinder_ret = await agent.get_finder(computer=\"my-computer\")\ndoc = finder_ret[\"documents\"][0]  # \u9009\u62e9\u7b2c\u4e00\u4e2a\u6587\u6863\n\n# 2. \u5df2\u77e5 page_count\uff0c\u904d\u5386\u6240\u6709\u9875\u9762\nfor i in range(doc[\"page_count\"]):\n    page = await agent.read_resource(\n        computer=\"my-computer\",\n        uri=f\"{doc['uri']}/pages/{i}?format=markdown\"\n    )\n    print(f\"--- \u7b2c {i} \u9875: {page.get('title', '')} ---\")\n    print(page.get(\"content_markdown\", \"\"))\n</code></pre>"},{"location":"specification/finder/#agent-\u5185\u90e8\u5de5\u5177\u6ce8\u518c\u53ef\u9009","title":"Agent \u5185\u90e8\u5de5\u5177\u6ce8\u518c\uff08\u53ef\u9009\uff09","text":"<p>Agent \u53ef\u5728\u5185\u90e8\u5c06\u5bfc\u822a\u64cd\u4f5c\u5c01\u88c5\u4e3a\u5de5\u5177\uff0c\u4f9b LLM \u8c03\u7528\u3002\u8fd9\u4e0d\u662f\u534f\u8bae\u89c4\u8303\uff0c\u4ec5\u4f9b\u53c2\u8003\uff1a</p> <pre><code>@agent.internal_tool(\"browse_document\")\nasync def browse_document(uri: str, page: int = 0):\n    \"\"\"\u6d4f\u89c8\u6587\u6863\u6307\u5b9a\u9875\u9762\"\"\"\n    page_uri = f\"{uri}/pages/{page}?format=markdown\"\n    return await agent.read_resource(computer=\"my-computer\", uri=page_uri)\n</code></pre>"},{"location":"specification/finder/#mcp-server-\u5b9e\u73b0\u6307\u5357","title":"MCP Server \u5b9e\u73b0\u6307\u5357","text":""},{"location":"specification/finder/#\u524d\u63d0\u6761\u4ef6","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>MCP Server \u82e5\u8981\u53c2\u4e0e Finder\uff0c\u5fc5\u987b\u58f0\u660e <code>resources.subscribe</code> \u80fd\u529b\u3002\u5426\u5219 Computer \u4e0d\u4f1a\u679a\u4e3e\u8be5 Server \u7684\u6587\u6863\u8d44\u6e90\uff0c\u4e5f\u4e0d\u4f1a\u6536\u5230\u8be5 Server \u7684\u8d44\u6e90\u53d8\u66f4\u901a\u77e5\u3002</p>"},{"location":"specification/finder/#\u8d44\u6e90\u58f0\u660e","title":"\u8d44\u6e90\u58f0\u660e","text":"<p>\u5728 <code>resources/list</code> \u54cd\u5e94\u4e2d\u8fd4\u56de <code>dpe://</code> URI \u7684 Resource\u3002\u6bcf\u4e2a\u6587\u6863\u5bf9\u5e94\u4e00\u4e2a Level 1 URI\uff1a</p> <pre><code>@server.list_resources()\nasync def list_resources():\n    return [\n        Resource(\n            uri=\"dpe://com.example.docs/rpt-2026\",\n            name=\"2026 \u5e74\u5ea6\u62a5\u544a\",\n            description=\"2026 \u5e74\u5ea6\u8d22\u52a1\u4e0e\u8fd0\u8425\u62a5\u544a\",\n            mimeType=\"application/json\",\n        ),\n        Resource(\n            uri=\"dpe://com.example.docs/contract-a1\",\n            name=\"A1 \u5408\u540c\",\n            description=\"A1 \u9879\u76ee\u670d\u52a1\u5408\u540c\",\n            mimeType=\"application/json\",\n        ),\n    ]\n</code></pre>"},{"location":"specification/finder/#\u8d44\u6e90\u6a21\u677f","title":"\u8d44\u6e90\u6a21\u677f","text":"<p>\u58f0\u660e <code>pages/{N}</code> \u548c <code>elements/{ID}</code> \u6a21\u677f\uff0c\u4f7f Agent \u548c Computer \u80fd\u591f\u53d1\u73b0\u6587\u6863\u5185\u7684\u5b50\u8d44\u6e90\u8def\u5f84\uff1a</p> <pre><code>@server.list_resource_templates()\nasync def list_resource_templates():\n    return [\n        ResourceTemplate(\n            uriTemplate=\"dpe://com.example.docs/{doc_ref}/pages/{page_index}\",\n            name=\"\u6587\u6863\u9875\u9762\",\n            description=\"\u6309\u9875\u7801\u8bbf\u95ee\u6587\u6863\u9875\u9762\u5185\u5bb9\",\n        ),\n        ResourceTemplate(\n            uriTemplate=\"dpe://com.example.docs/{doc_ref}/elements/{element_id}\",\n            name=\"\u6587\u6863\u5143\u7d20\",\n            description=\"\u6309\u5143\u7d20 ID \u8bbf\u95ee\u6587\u6863\u5143\u7d20\u8be6\u60c5\",\n        ),\n    ]\n</code></pre>"},{"location":"specification/finder/#\u5185\u5bb9\u63d0\u4f9b","title":"\u5185\u5bb9\u63d0\u4f9b","text":"<p>\u5b9e\u73b0 <code>resources/read</code>\uff0c\u6839\u636e URI \u7ea7\u522b\u8fd4\u56de\u5bf9\u5e94 JSON \u5185\u5bb9\uff1a</p> <pre><code>@server.read_resource()\nasync def read_resource(uri: str):\n    parsed = parse_dpe_uri(uri)\n\n    if parsed.doc_ref is None:\n        # Level 0: \u6587\u6863\u76ee\u5f55\n        return ReadResourceResult(contents=[\n            TextResourceContents(\n                uri=uri,\n                mimeType=\"application/json\",\n                text=json.dumps(get_document_catalog()),\n            )\n        ])\n\n    if parsed.sub_path is None:\n        # Level 1: \u6587\u6863\u5143\u6570\u636e\n        return ReadResourceResult(contents=[\n            TextResourceContents(\n                uri=uri,\n                mimeType=\"application/json\",\n                text=json.dumps(get_document_metadata(parsed.doc_ref)),\n            )\n        ])\n\n    if parsed.sub_path.startswith(\"pages/\"):\n        # Level 2: \u9875\u9762\u5185\u5bb9\n        page_index = int(parsed.sub_path.split(\"/\")[1])\n        return ReadResourceResult(contents=[\n            TextResourceContents(\n                uri=uri,\n                mimeType=\"application/json\",\n                text=json.dumps(get_page_content(parsed.doc_ref, page_index)),\n            )\n        ])\n\n    if parsed.sub_path.startswith(\"elements/\"):\n        # Level 3: \u5143\u7d20\u8be6\u60c5\n        element_id = parsed.sub_path.split(\"/\")[1]\n        return ReadResourceResult(contents=[\n            TextResourceContents(\n                uri=uri,\n                mimeType=\"application/json\",\n                text=json.dumps(get_element_detail(parsed.doc_ref, element_id)),\n            )\n        ])\n</code></pre>"},{"location":"specification/finder/#\u53d8\u66f4\u901a\u77e5","title":"\u53d8\u66f4\u901a\u77e5","text":"<ul> <li>\u6587\u6863\u589e\u5220\u65f6: \u53d1\u51fa <code>ResourceListChangedNotification</code></li> <li>\u6587\u6863\u5185\u5bb9\u53d8\u5316\u65f6: \u53d1\u51fa <code>ResourceUpdatedNotification</code>\uff08\u643a\u5e26\u5177\u4f53 <code>dpe://</code> URI\uff09</li> </ul> <pre><code># \u6587\u6863\u5217\u8868\u53d8\u5316\nawait server.request_context.session.send_resource_list_changed()\n\n# \u6587\u6863\u5185\u5bb9\u66f4\u65b0\nawait server.request_context.session.send_resource_updated(\n    uri=\"dpe://com.example.docs/rpt-2026\"\n)\n</code></pre>"},{"location":"specification/finder/#\u81ea\u52a8\u8865\u5168\u53ef\u9009","title":"\u81ea\u52a8\u8865\u5168\uff08\u53ef\u9009\uff09","text":"<p>MCP \u89c4\u8303\u5b9a\u4e49\u4e86 <code>completion/complete</code> \u65b9\u6cd5\uff0c\u5141\u8bb8 Client \u4e3a\u8d44\u6e90\u6a21\u677f\u53c2\u6570\u8bf7\u6c42\u81ea\u52a8\u8865\u5168\u5efa\u8bae\u3002MCP Server SHOULD\uff08\u63a8\u8350\u4f46\u975e\u5fc5\u987b\uff09\u4e3a <code>dpe://</code> \u8d44\u6e90\u6a21\u677f\u5b9e\u73b0\u6b64\u80fd\u529b\uff0c\u4ee5\u5e2e\u52a9 Agent \u6216\u7528\u6237\u5728\u6784\u9020 URI \u65f6\u83b7\u5f97\u53c2\u6570\u63d0\u793a\u3002</p>"},{"location":"specification/finder/#\u8865\u5168\u6d41\u7a0b","title":"\u8865\u5168\u6d41\u7a0b","text":"<p><code>dpe://</code> \u8d44\u6e90\u6a21\u677f\u5305\u542b\u4e09\u4e2a\u53ef\u8865\u5168\u53c2\u6570\uff0c\u5f62\u6210\u6e10\u8fdb\u5f0f\u8865\u5168\u94fe\uff1a</p> <pre><code>doc_ref \u2192 page_index \u2192 element_id\n</code></pre> <p>\u6bcf\u4e00\u7ea7\u8865\u5168\u4f9d\u8d56\u4e8e\u524d\u4e00\u7ea7\u5df2\u9009\u5b9a\u7684\u503c\uff1a</p> \u53c2\u6570 \u8865\u5168\u5185\u5bb9 \u4f9d\u8d56 <code>doc_ref</code> \u8fd4\u56de\u8be5 Server \u4e0b\u6240\u6709\u53ef\u7528\u6587\u6863\u7684 <code>doc_ref</code> \u5217\u8868 \u65e0 <code>page_index</code> \u8fd4\u56de\u5df2\u9009\u6587\u6863\u7684\u6709\u6548\u9875\u7801\u5217\u8868 <code>doc_ref</code> <code>element_id</code> \u8fd4\u56de\u5df2\u9009\u6587\u6863\u6307\u5b9a\u9875\u9762\u7684\u5143\u7d20 ID \u5217\u8868 <code>doc_ref</code> + <code>page_index</code>"},{"location":"specification/finder/#\u8bf7\u6c42\u54cd\u5e94\u793a\u4f8b","title":"\u8bf7\u6c42/\u54cd\u5e94\u793a\u4f8b","text":"<p>\u8865\u5168 <code>doc_ref</code>\uff08\u5217\u51fa\u53ef\u7528\u6587\u6863\uff09:</p> <pre><code>// Request\n{\n  \"method\": \"completion/complete\",\n  \"params\": {\n    \"ref\": {\n      \"type\": \"ref/resource\",\n      \"uri\": \"dpe://com.example.docs/{doc_ref}/pages/{page_index}\"\n    },\n    \"argument\": {\n      \"name\": \"doc_ref\",\n      \"value\": \"rpt\"\n    }\n  }\n}\n\n// Response\n{\n  \"completion\": {\n    \"values\": [\"rpt-2026\", \"rpt-2025\"],\n    \"total\": 2,\n    \"hasMore\": false\n  }\n}\n</code></pre> <p>\u8865\u5168 <code>page_index</code>\uff08\u5217\u51fa\u6587\u6863\u9875\u7801\uff09:</p> <pre><code>// Request\n{\n  \"method\": \"completion/complete\",\n  \"params\": {\n    \"ref\": {\n      \"type\": \"ref/resource\",\n      \"uri\": \"dpe://com.example.docs/{doc_ref}/pages/{page_index}\"\n    },\n    \"argument\": {\n      \"name\": \"page_index\",\n      \"value\": \"\"\n    }\n  }\n}\n\n// Response \u2014 \u5047\u8bbe doc_ref=rpt-2026 \u5df2\u5728\u4e0a\u4e0b\u6587\u4e2d\u786e\u5b9a\n{\n  \"completion\": {\n    \"values\": [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\"],\n    \"total\": 12,\n    \"hasMore\": false\n  }\n}\n</code></pre> <p>\u8865\u5168 <code>element_id</code>\uff08\u5217\u51fa\u9875\u9762\u5143\u7d20\uff09:</p> <pre><code>// Request\n{\n  \"method\": \"completion/complete\",\n  \"params\": {\n    \"ref\": {\n      \"type\": \"ref/resource\",\n      \"uri\": \"dpe://com.example.docs/{doc_ref}/elements/{element_id}\"\n    },\n    \"argument\": {\n      \"name\": \"element_id\",\n      \"value\": \"tbl\"\n    }\n  }\n}\n\n// Response\n{\n  \"completion\": {\n    \"values\": [\"tbl-001\", \"tbl-002\"],\n    \"total\": 2,\n    \"hasMore\": false\n  }\n}\n</code></pre>"},{"location":"specification/finder/#\u5b9e\u73b0\u793a\u4f8b","title":"\u5b9e\u73b0\u793a\u4f8b","text":"<pre><code>@server.complete_resource()\nasync def complete_resource(uri: str, argument: dict) -&gt; list[str]:\n    name = argument[\"name\"]\n    prefix = argument.get(\"value\", \"\")\n\n    if name == \"doc_ref\":\n        # \u8fd4\u56de\u5339\u914d\u524d\u7f00\u7684\u6587\u6863\u5f15\u7528\n        all_refs = get_all_doc_refs()\n        return [ref for ref in all_refs if ref.startswith(prefix)]\n\n    if name == \"page_index\":\n        # \u8fd4\u56de\u6709\u6548\u9875\u7801\uff08\u9700\u8981\u4ece\u4e0a\u4e0b\u6587\u83b7\u53d6 doc_ref\uff09\n        page_count = get_document_page_count(context_doc_ref)\n        pages = [str(i) for i in range(page_count)]\n        return [p for p in pages if p.startswith(prefix)]\n\n    if name == \"element_id\":\n        # \u8fd4\u56de\u5339\u914d\u524d\u7f00\u7684\u5143\u7d20 ID\n        elements = get_element_ids(context_doc_ref)\n        return [eid for eid in elements if eid.startswith(prefix)]\n\n    return []\n</code></pre> <p>\u53ef\u9009\u80fd\u529b</p> <p><code>completion/complete</code> \u662f MCP \u89c4\u8303\u4e2d\u7684\u53ef\u9009\u80fd\u529b\u3002\u672a\u5b9e\u73b0\u6b64\u65b9\u6cd5\u7684 MCP Server \u4ecd\u7136\u53ef\u4ee5\u6b63\u5e38\u53c2\u4e0e Finder \u7cfb\u7edf\uff0cAgent \u53ea\u9700\u901a\u8fc7 <code>client:get_finder</code> \u548c <code>resources/read</code> \u5b8c\u6210\u5bfc\u822a\u3002</p>"},{"location":"specification/finder/#\u6700\u4f73\u5b9e\u8df5","title":"\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>host \u4f7f\u7528\u53cd\u5411\u57df\u540d\u98ce\u683c\uff08\u5982 <code>com.example.docs</code>\uff09\u4ee5\u907f\u514d\u4e0e\u5176\u4ed6 MCP Server \u51b2\u7a81</li> <li>doc-ref \u4fdd\u6301\u7b80\u77ed\u4e14 URL-safe\uff0c\u907f\u514d\u4f7f\u7528\u957f\u8def\u5f84\u6216\u7279\u6b8a\u5b57\u7b26</li> <li>\u9875\u9762\u5185\u5bb9\u6309\u9700\u52a0\u8f7d\uff0cLevel 1 \u9ed8\u8ba4\u4ec5\u8fd4\u56de\u5143\u6570\u636e\uff0c\u907f\u514d\u4f20\u8f93\u5927\u91cf\u9875\u9762\u6570\u636e</li> <li>\u5143\u7d20 summary \u4fdd\u6301\u7cbe\u7b80\uff0c\u4fbf\u4e8e Agent \u5feb\u901f\u5224\u65ad\u662f\u5426\u9700\u8981\u6df1\u5165\u67e5\u770b</li> <li>\u53ca\u65f6\u53d1\u9001\u53d8\u66f4\u901a\u77e5\uff0c\u786e\u4fdd Agent \u83b7\u53d6\u5230\u6700\u65b0\u6587\u6863\u72b6\u6001</li> <li>\u5408\u7406\u8bbe\u7f6e page_count\uff0c\u5728\u5143\u6570\u636e\u4e2d\u51c6\u786e\u62a5\u544a\u9875\u6570\uff0c\u5e2e\u52a9 Agent \u89c4\u5212\u7ffb\u9875\u7b56\u7565</li> <li>\u652f\u6301 categories \u8fc7\u6ee4\uff0c\u5728 Level 2 \u54cd\u5e94\u4e2d\u6309 <code>categories</code> \u53c2\u6570\u8fc7\u6ee4\u5143\u7d20\uff0c\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u6570\u636e\u4f20\u8f93</li> <li>\u8003\u8651\u5b9e\u73b0 <code>completion/complete</code>\uff0c\u4e3a URI \u6a21\u677f\u53c2\u6570\u63d0\u4f9b\u81ea\u52a8\u8865\u5168\uff0c\u63d0\u5347 Agent \u7684\u5bfc\u822a\u6548\u7387</li> </ol>"},{"location":"specification/room-model/","title":"A2C-SMCP \u623f\u95f4\u9694\u79bb\u6a21\u578b","text":"<p>\u672c\u6587\u6863\u8be6\u7ec6\u63cf\u8ff0 A2C-SMCP \u534f\u8bae\u7684\u623f\u95f4\uff08Office/Room\uff09\u9694\u79bb\u673a\u5236\u3002</p>"},{"location":"specification/room-model/#\u6982\u8ff0","title":"\u6982\u8ff0","text":"<p>\u623f\u95f4\u662f A2C-SMCP \u534f\u8bae\u4e2d\u7684\u903b\u8f91\u9694\u79bb\u5355\u5143\uff0c\u7528\u4e8e\u7ea6\u675f Agent \u4e0e Computer \u7684\u534f\u4f5c\u8303\u56f4\u3002\u623f\u95f4\u673a\u5236\u786e\u4fdd\uff1a</p> <ul> <li>\u5b89\u5168\u9694\u79bb: \u4e0d\u540c\u623f\u95f4\u7684\u6210\u5458\u65e0\u6cd5\u76f8\u4e92\u8bbf\u95ee</li> <li>\u8d44\u6e90\u8fb9\u754c: \u5de5\u5177\u8c03\u7528\u53ea\u80fd\u5728\u540c\u4e00\u623f\u95f4\u5185\u8fdb\u884c</li> <li>\u6d88\u606f\u9694\u79bb: \u901a\u77e5\u53ea\u5e7f\u64ad\u7ed9\u540c\u4e00\u623f\u95f4\u7684\u6210\u5458</li> </ul>"},{"location":"specification/room-model/#\u623f\u95f4\u6807\u8bc6","title":"\u623f\u95f4\u6807\u8bc6","text":"<p>\u6bcf\u4e2a\u623f\u95f4\u901a\u8fc7 <code>office_id</code> \u552f\u4e00\u6807\u8bc6\uff1a</p> <pre><code>office_id: str  # \u623f\u95f4\u552f\u4e00\u6807\u8bc6\u7b26\n</code></pre> <p>\u547d\u540d\u5efa\u8bae: - \u4f7f\u7528 UUID \u6216\u4e1a\u52a1\u76f8\u5173\u7684\u552f\u4e00\u6807\u8bc6 - \u907f\u514d\u4f7f\u7528\u53ef\u9884\u6d4b\u7684\u5e8f\u5217\u53f7 - \u8003\u8651\u5305\u542b\u73af\u5883\u6807\u8bc6\uff08\u5982 <code>prod-</code>, <code>test-</code>\uff09</p>"},{"location":"specification/room-model/#\u623f\u95f4\u6210\u5458","title":"\u623f\u95f4\u6210\u5458","text":""},{"location":"specification/room-model/#\u6210\u5458\u7c7b\u578b","title":"\u6210\u5458\u7c7b\u578b","text":"\u6210\u5458\u7c7b\u578b \u6570\u91cf\u9650\u5236 \u8bf4\u660e Agent \u6bcf\u4e2a\u623f\u95f4\u6700\u591a 1 \u4e2a \u5de5\u5177\u8c03\u7528\u53d1\u8d77\u65b9 Computer \u65e0\u9650\u5236 \u5de5\u5177\u63d0\u4f9b\u65b9"},{"location":"specification/room-model/#\u6210\u5458\u72b6\u6001","title":"\u6210\u5458\u72b6\u6001","text":"<p>\u6bcf\u4e2a\u6210\u5458\u5728\u623f\u95f4\u4e2d\u7ef4\u62a4\u4ee5\u4e0b\u72b6\u6001\uff1a</p> <pre><code>class Session:\n    sid: str                    # Socket.IO \u4f1a\u8bdd ID\n    name: str                   # \u6210\u5458\u540d\u79f0\n    role: Literal[\"agent\", \"computer\"]  # \u89d2\u8272\n    office_id: str | None       # \u5f53\u524d\u6240\u5728\u623f\u95f4\n</code></pre>"},{"location":"specification/room-model/#\u52a0\u5165\u623f\u95f4","title":"\u52a0\u5165\u623f\u95f4","text":""},{"location":"specification/room-model/#\u52a0\u5165\u6d41\u7a0b","title":"\u52a0\u5165\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant C as Client (Agent/Computer)\n    participant S as Server\n    participant R as Room\n\n    C-&gt;&gt;S: server:join_office (EnterOfficeReq)\n    S-&gt;&gt;S: \u9a8c\u8bc1\u8bf7\u6c42\n    alt \u9a8c\u8bc1\u901a\u8fc7\n        S-&gt;&gt;R: \u52a0\u5165\u623f\u95f4\n        S-&gt;&gt;C: \u8fd4\u56de\u6210\u529f\n        S-&gt;&gt;R: notify:enter_office (\u5e7f\u64ad)\n    else \u9a8c\u8bc1\u5931\u8d25\n        S-&gt;&gt;C: \u8fd4\u56de\u9519\u8bef\n    end\n</code></pre>"},{"location":"specification/room-model/#\u8bf7\u6c42\u6570\u636e","title":"\u8bf7\u6c42\u6570\u636e","text":"<pre><code>class EnterOfficeReq(TypedDict):\n    role: Literal[\"computer\", \"agent\"]  # \u89d2\u8272\n    name: str                           # \u540d\u79f0\n    office_id: str                      # \u76ee\u6807\u623f\u95f4 ID\n</code></pre>"},{"location":"specification/room-model/#\u9a8c\u8bc1\u89c4\u5219","title":"\u9a8c\u8bc1\u89c4\u5219","text":""},{"location":"specification/room-model/#agent-\u52a0\u5165\u89c4\u5219","title":"Agent \u52a0\u5165\u89c4\u5219","text":"<ol> <li>\u68c0\u67e5\u623f\u95f4\u662f\u5426\u5df2\u6709 Agent</li> <li>\u82e5\u5df2\u6709 Agent\uff0c\u62d2\u7edd\u52a0\u5165\uff08\u8fd4\u56de\u9519\u8bef\uff09</li> <li>\u82e5\u623f\u95f4\u4e3a\u7a7a\u6216\u53ea\u6709 Computer\uff0c\u5141\u8bb8\u52a0\u5165</li> </ol> <pre><code># Server \u7aef\u9a8c\u8bc1\u903b\u8f91\uff08\u4f2a\u4ee3\u7801\uff09\nif role == \"agent\":\n    existing_agent = get_agent_in_room(office_id)\n    if existing_agent and existing_agent.sid != sid:\n        return False, \"Room already has an agent\"\n    return True, None\n</code></pre>"},{"location":"specification/room-model/#computer-\u52a0\u5165\u89c4\u5219","title":"Computer \u52a0\u5165\u89c4\u5219","text":"<ol> <li>\u68c0\u67e5 Computer \u662f\u5426\u5df2\u5728\u5176\u4ed6\u623f\u95f4</li> <li>\u82e5\u5728\u5176\u4ed6\u623f\u95f4\uff0c\u5148\u81ea\u52a8\u79bb\u5f00\u65e7\u623f\u95f4</li> <li>\u52a0\u5165\u65b0\u623f\u95f4</li> </ol> <pre><code># Server \u7aef\u5904\u7406\u903b\u8f91\uff08\u4f2a\u4ee3\u7801\uff09\nif role == \"computer\":\n    current_room = get_current_room(sid)\n    if current_room and current_room != office_id:\n        await leave_room(sid, current_room)\n    await join_room(sid, office_id)\n</code></pre>"},{"location":"specification/room-model/#\u79bb\u5f00\u623f\u95f4","title":"\u79bb\u5f00\u623f\u95f4","text":""},{"location":"specification/room-model/#\u79bb\u5f00\u6d41\u7a0b","title":"\u79bb\u5f00\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant C as Client\n    participant S as Server\n    participant R as Room\n\n    C-&gt;&gt;S: server:leave_office (LeaveOfficeReq)\n    S-&gt;&gt;R: notify:leave_office (\u5e7f\u64ad\uff0c\u79bb\u5f00\u524d)\n    S-&gt;&gt;R: \u79fb\u9664\u6210\u5458\n    S-&gt;&gt;C: \u8fd4\u56de\u6210\u529f\n</code></pre>"},{"location":"specification/room-model/#\u8bf7\u6c42\u6570\u636e_1","title":"\u8bf7\u6c42\u6570\u636e","text":"<pre><code>class LeaveOfficeReq(TypedDict):\n    office_id: str  # \u8981\u79bb\u5f00\u7684\u623f\u95f4 ID\n</code></pre>"},{"location":"specification/room-model/#\u81ea\u52a8\u79bb\u5f00\u573a\u666f","title":"\u81ea\u52a8\u79bb\u5f00\u573a\u666f","text":"<p>\u4ee5\u4e0b\u573a\u666f\u4f1a\u89e6\u53d1\u81ea\u52a8\u79bb\u5f00\uff1a</p> <ol> <li>\u8fde\u63a5\u65ad\u5f00: Socket.IO \u8fde\u63a5\u65ad\u5f00\u65f6</li> <li>\u623f\u95f4\u5207\u6362: Computer \u52a0\u5165\u65b0\u623f\u95f4\u65f6\uff08\u81ea\u52a8\u79bb\u5f00\u65e7\u623f\u95f4\uff09</li> <li>\u670d\u52a1\u5668\u5173\u95ed: Server \u5173\u95ed\u65f6</li> </ol>"},{"location":"specification/room-model/#\u9694\u79bb\u4fdd\u969c","title":"\u9694\u79bb\u4fdd\u969c","text":""},{"location":"specification/room-model/#\u9694\u79bb\u7ea6\u675f\u8868","title":"\u9694\u79bb\u7ea6\u675f\u8868","text":"\u7ea6\u675f\u7c7b\u578b \u89e6\u53d1\u6761\u4ef6 Server \u884c\u4e3a Agent \u72ec\u5360 \u623f\u95f4\u5df2\u6709 Agent\uff0c\u65b0 Agent \u5c1d\u8bd5\u52a0\u5165 \u62d2\u7edd\u8bf7\u6c42 Computer \u7ed1\u5b9a Computer \u5c1d\u8bd5\u52a0\u5165\u65b0\u623f\u95f4 \u81ea\u52a8\u79bb\u5f00\u65e7\u623f\u95f4 \u8de8\u623f\u95f4\u8bbf\u95ee \u4e8b\u4ef6\u76ee\u6807\u4e0d\u5728\u540c\u4e00\u623f\u95f4 \u62d2\u7edd\u8def\u7531 \u6743\u9650\u6821\u9a8c \u672a\u52a0\u5165\u623f\u95f4\u5c31\u53d1\u9001\u4e8b\u4ef6 \u62d2\u7edd\u5904\u7406"},{"location":"specification/room-model/#\u8de8\u623f\u95f4\u8bbf\u95ee\u9632\u62a4","title":"\u8de8\u623f\u95f4\u8bbf\u95ee\u9632\u62a4","text":"<p>Server \u5728\u5904\u7406 <code>client:*</code> \u4e8b\u4ef6\u65f6\u5fc5\u987b\u9a8c\u8bc1\uff1a</p> <pre><code># \u4f2a\u4ee3\u7801\nasync def on_client_tool_call(sid, data):\n    agent_session = get_session(sid)\n    computer_name = data[\"computer\"]\n    computer_sid = get_sid_by_name(computer_name)\n    computer_session = get_session(computer_sid)\n\n    # \u9a8c\u8bc1\u5728\u540c\u4e00\u623f\u95f4\n    if agent_session.office_id != computer_session.office_id:\n        raise PermissionError(\"Cross-room access denied\")\n\n    # \u7ee7\u7eed\u5904\u7406...\n</code></pre>"},{"location":"specification/room-model/#\u6210\u5458\u53d8\u66f4\u901a\u77e5","title":"\u6210\u5458\u53d8\u66f4\u901a\u77e5","text":""},{"location":"specification/room-model/#\u52a0\u5165\u901a\u77e5","title":"\u52a0\u5165\u901a\u77e5","text":"<p>\u5f53\u6210\u5458\u52a0\u5165\u623f\u95f4\u540e\uff0cServer \u5e7f\u64ad <code>notify:enter_office</code>\uff1a</p> <pre><code>class EnterOfficeNotification(TypedDict, total=False):\n    office_id: str\n    computer: str | None  # \u52a0\u5165\u7684 Computer \u540d\u79f0\n    agent: str | None     # \u52a0\u5165\u7684 Agent \u540d\u79f0\n</code></pre> <p>\u63a5\u6536\u65b9\u5904\u7406\u5efa\u8bae:</p> <ul> <li>Agent \u6536\u5230 Computer \u52a0\u5165\u901a\u77e5\u540e\uff0c\u5e94\u8c03\u7528 <code>client:get_tools</code> \u83b7\u53d6\u5de5\u5177\u5217\u8868</li> <li>Computer \u6536\u5230 Agent \u52a0\u5165\u901a\u77e5\u540e\uff0c\u53ef\u8fdb\u884c\u521d\u59cb\u5316\u51c6\u5907</li> </ul>"},{"location":"specification/room-model/#\u79bb\u5f00\u901a\u77e5","title":"\u79bb\u5f00\u901a\u77e5","text":"<p>\u5f53\u6210\u5458\u5373\u5c06\u79bb\u5f00\u623f\u95f4\u65f6\uff0cServer \u5e7f\u64ad <code>notify:leave_office</code>\uff1a</p> <pre><code>class LeaveOfficeNotification(TypedDict, total=False):\n    office_id: str\n    computer: str | None  # \u79bb\u5f00\u7684 Computer \u540d\u79f0\n    agent: str | None     # \u79bb\u5f00\u7684 Agent \u540d\u79f0\n</code></pre> <p>\u63a5\u6536\u65b9\u5904\u7406\u5efa\u8bae:</p> <ul> <li>Agent \u6536\u5230 Computer \u79bb\u5f00\u901a\u77e5\u540e\uff0c\u5e94\u6e05\u7406\u8be5 Computer \u7684\u5de5\u5177</li> <li>Computer \u6536\u5230 Agent \u79bb\u5f00\u901a\u77e5\u540e\uff0c\u53ef\u8fdb\u884c\u8d44\u6e90\u6e05\u7406</li> </ul>"},{"location":"specification/room-model/#\u623f\u95f4\u67e5\u8be2","title":"\u623f\u95f4\u67e5\u8be2","text":"<p>Agent \u53ef\u901a\u8fc7 <code>server:list_room</code> \u4e8b\u4ef6\u67e5\u8be2\u623f\u95f4\u5185\u7684\u6240\u6709\u4f1a\u8bdd\uff1a</p>"},{"location":"specification/room-model/#\u8bf7\u6c42","title":"\u8bf7\u6c42","text":"<pre><code>class ListRoomReq(AgentCallData):\n    agent: str      # Agent \u540d\u79f0\n    req_id: str     # \u8bf7\u6c42 ID\n    office_id: str  # \u623f\u95f4 ID\n</code></pre>"},{"location":"specification/room-model/#\u54cd\u5e94","title":"\u54cd\u5e94","text":"<pre><code>class SessionInfo(TypedDict, total=False):\n    sid: str\n    name: str\n    role: Literal[\"computer\", \"agent\"]\n    office_id: str\n\nclass ListRoomRet(TypedDict):\n    sessions: list[SessionInfo]\n    req_id: str\n</code></pre>"},{"location":"specification/room-model/#\u6700\u4f73\u5b9e\u8df5","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"specification/room-model/#\u623f\u95f4-id-\u8bbe\u8ba1","title":"\u623f\u95f4 ID \u8bbe\u8ba1","text":"<pre><code># \u63a8\u8350\uff1a\u4f7f\u7528 UUID\noffice_id = str(uuid.uuid4())\n\n# \u63a8\u8350\uff1a\u5305\u542b\u4e1a\u52a1\u6807\u8bc6\noffice_id = f\"tenant-{tenant_id}-{uuid.uuid4()}\"\n\n# \u4e0d\u63a8\u8350\uff1a\u4f7f\u7528\u53ef\u9884\u6d4b\u7684\u5e8f\u5217\noffice_id = \"room-1\"  # \u5b89\u5168\u98ce\u9669\n</code></pre>"},{"location":"specification/room-model/#agent-\u8fde\u63a5\u7ba1\u7406","title":"Agent \u8fde\u63a5\u7ba1\u7406","text":"<pre><code># \u63a8\u8350\uff1a\u8fde\u63a5\u524d\u68c0\u67e5\u623f\u95f4\u72b6\u6001\nsessions = await agent.get_computers_in_office(office_id)\nif any(s.role == \"agent\" for s in sessions):\n    raise Exception(\"Room already has an agent\")\n\nawait agent.join_office(office_id)\n</code></pre>"},{"location":"specification/room-model/#\u8d44\u6e90\u6e05\u7406","title":"\u8d44\u6e90\u6e05\u7406","text":"<pre><code># \u63a8\u8350\uff1a\u79bb\u5f00\u623f\u95f4\u65f6\u6e05\u7406\u8d44\u6e90\nasync def cleanup():\n    await agent.leave_office(office_id)\n    # \u6e05\u7406\u672c\u5730\u5de5\u5177\u7f13\u5b58\n    tools_cache.clear()\n</code></pre>"},{"location":"specification/room-model/#\u53c2\u8003","title":"\u53c2\u8003","text":"<ul> <li>\u623f\u95f4\u7ba1\u7406\u5b9e\u73b0: <code>a2c_smcp/server/namespace.py</code></li> <li>\u5de5\u5177\u51fd\u6570: <code>a2c_smcp/server/utils.py</code></li> <li>Agent \u623f\u95f4\u64cd\u4f5c: <code>a2c_smcp/agent/client.py</code></li> </ul>"},{"location":"specification/security/","title":"A2C-SMCP \u5b89\u5168\u6027\u8003\u8651","text":"<p>\u672c\u6587\u6863\u63cf\u8ff0\u5b9e\u73b0 A2C-SMCP \u534f\u8bae\u65f6\u7684\u5b89\u5168\u6027\u8981\u6c42\u4e0e\u5efa\u8bae\u3002</p>"},{"location":"specification/security/#\u4f20\u8f93\u5b89\u5168","title":"\u4f20\u8f93\u5b89\u5168","text":""},{"location":"specification/security/#tls-\u8981\u6c42","title":"TLS \u8981\u6c42","text":"\u90e8\u7f72\u73af\u5883 TLS \u8981\u6c42 \u516c\u7f51\u90e8\u7f72 \u5fc5\u987b \u4f7f\u7528 TLS \u5185\u7f51\u90e8\u7f72 \u63a8\u8350 \u4f7f\u7528 TLS \u672c\u5730\u5f00\u53d1 \u53ef\u9009"},{"location":"specification/security/#tls-\u914d\u7f6e\u5efa\u8bae","title":"TLS \u914d\u7f6e\u5efa\u8bae","text":"<pre><code># \u63a8\u8350\u7684 TLS \u7248\u672c\nTLS_VERSION = \"TLSv1.2+\"\n\n# \u63a8\u8350\u7684\u5bc6\u7801\u5957\u4ef6\nCIPHER_SUITES = [\n    \"TLS_AES_256_GCM_SHA384\",\n    \"TLS_CHACHA20_POLY1305_SHA256\",\n    \"TLS_AES_128_GCM_SHA256\"\n]\n</code></pre>"},{"location":"specification/security/#mtls\u53cc\u5411-tls","title":"mTLS\uff08\u53cc\u5411 TLS\uff09","text":"<p>\u5bf9\u4e8e\u9700\u8981\u7aef\u5230\u7aef\u4fdd\u5bc6\u7684\u573a\u666f\uff0c\u63a8\u8350\u91c7\u7528 mTLS\uff1a</p> <ul> <li>Client \u548c Server \u90fd\u9700\u8981\u8bc1\u4e66</li> <li>\u63d0\u4f9b\u53cc\u5411\u8eab\u4efd\u9a8c\u8bc1</li> <li>\u9002\u7528\u4e8e\u9ad8\u5b89\u5168\u8981\u6c42\u7684\u4f01\u4e1a\u73af\u5883</li> </ul>"},{"location":"specification/security/#\u8ba4\u8bc1\u4e0e\u6388\u6743","title":"\u8ba4\u8bc1\u4e0e\u6388\u6743","text":""},{"location":"specification/security/#\u8ba4\u8bc1\u673a\u5236","title":"\u8ba4\u8bc1\u673a\u5236","text":"<p>A2C-SMCP \u901a\u8fc7 <code>AuthenticationProvider</code> \u62bd\u8c61\u8ba4\u8bc1\uff1a</p> <pre><code>class AuthenticationProvider(ABC):\n    @abstractmethod\n    async def authenticate(\n        self,\n        server: AsyncServer,\n        environ: dict,\n        auth: dict | None,\n        headers: dict\n    ) -&gt; bool:\n        \"\"\"\u9a8c\u8bc1\u8fde\u63a5\u8bf7\u6c42\"\"\"\n        pass\n</code></pre>"},{"location":"specification/security/#\u8ba4\u8bc1\u7b56\u7565","title":"\u8ba4\u8bc1\u7b56\u7565","text":"\u7b56\u7565 \u9002\u7528\u573a\u666f \u5b89\u5168\u7ea7\u522b API Key \u7b80\u5355\u573a\u666f\u3001\u5185\u90e8\u670d\u52a1 \u4e2d JWT Token \u7528\u6237\u8ba4\u8bc1\u3001\u6709\u65f6\u6548\u8981\u6c42 \u9ad8 mTLS \u670d\u52a1\u95f4\u901a\u4fe1\u3001\u9ad8\u5b89\u5168\u8981\u6c42 \u6700\u9ad8"},{"location":"specification/security/#\u9ed8\u8ba4\u8ba4\u8bc1\u5b9e\u73b0","title":"\u9ed8\u8ba4\u8ba4\u8bc1\u5b9e\u73b0","text":"<p>SDK \u63d0\u4f9b\u9ed8\u8ba4\u8ba4\u8bc1\u5b9e\u73b0 <code>DefaultAuthenticationProvider</code>\uff1a</p> <pre><code>auth = DefaultAuthenticationProvider(\n    admin_secret=\"your_admin_secret\",\n    api_key_name=\"x-api-key\"\n)\n</code></pre> <p>\u6ce8\u610f: \u9ed8\u8ba4\u5b9e\u73b0\u4ec5\u9002\u7528\u4e8e\u5f00\u53d1\u548c\u6d4b\u8bd5\uff0c\u751f\u4ea7\u73af\u5883\u5e94\u5b9e\u73b0\u81ea\u5b9a\u4e49\u8ba4\u8bc1\u3002</p>"},{"location":"specification/security/#\u51ed\u8bc1\u7ba1\u7406","title":"\u51ed\u8bc1\u7ba1\u7406","text":""},{"location":"specification/security/#\u96f6\u51ed\u8bc1\u4f20\u64ad\u539f\u5219","title":"\u96f6\u51ed\u8bc1\u4f20\u64ad\u539f\u5219","text":"<p>A2C-SMCP \u7684\u6838\u5fc3\u5b89\u5168\u539f\u5219\u662f\u96f6\u51ed\u8bc1\u4f20\u64ad\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Agent                          \u2502\n\u2502                                                   \u2502\n\u2502  \u2717 \u4e0d\u6301\u6709\u654f\u611f\u51ed\u8bc1                                 \u2502\n\u2502  \u2717 \u4e0d\u63a5\u89e6 MCP Server Token                       \u2502\n\u2502  \u2717 \u4e0d\u8bbf\u95ee\u672c\u5730\u8d44\u6e90                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502\n                        \u2502 SMCP \u534f\u8bae\n                        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   Computer                        \u2502\n\u2502                                                   \u2502\n\u2502  \u2713 \u6301\u6709 MCP Server \u51ed\u8bc1                          \u2502\n\u2502  \u2713 \u7ba1\u7406\u672c\u5730\u8d44\u6e90\u8bbf\u95ee                              \u2502\n\u2502  \u2713 \u51ed\u8bc1\u4e0d\u5916\u4f20                                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"specification/security/#\u51ed\u8bc1\u5b58\u50a8\u5efa\u8bae","title":"\u51ed\u8bc1\u5b58\u50a8\u5efa\u8bae","text":"\u51ed\u8bc1\u7c7b\u578b \u5b58\u50a8\u4f4d\u7f6e \u52a0\u5bc6\u8981\u6c42 API Key \u73af\u5883\u53d8\u91cf / \u5bc6\u94a5\u7ba1\u7406\u670d\u52a1 \u63a8\u8350 \u6570\u636e\u5e93\u5bc6\u7801 \u5bc6\u94a5\u7ba1\u7406\u670d\u52a1 \u5fc5\u987b \u8bc1\u4e66\u79c1\u94a5 \u6587\u4ef6\u7cfb\u7edf\uff08\u53d7\u4fdd\u62a4\uff09 \u63a8\u8350"},{"location":"specification/security/#\u73af\u5883\u53d8\u91cf\u5b89\u5168","title":"\u73af\u5883\u53d8\u91cf\u5b89\u5168","text":"<pre><code># \u63a8\u8350\uff1a\u4f7f\u7528\u73af\u5883\u53d8\u91cf\nexport API_KEY=\"your_api_key\"\n\n# \u4e0d\u63a8\u8350\uff1a\u786c\u7f16\u7801\napi_key = \"your_api_key\"  # \u5371\u9669\uff01\n</code></pre>"},{"location":"specification/security/#\u623f\u95f4\u9694\u79bb","title":"\u623f\u95f4\u9694\u79bb","text":""},{"location":"specification/security/#\u9694\u79bb\u8981\u6c42","title":"\u9694\u79bb\u8981\u6c42","text":"<p>Server \u5fc5\u987b\u5b9e\u73b0\u4ee5\u4e0b\u9694\u79bb\u4fdd\u969c\uff1a</p> <ol> <li>\u8de8\u623f\u95f4\u8bbf\u95ee\u7981\u6b62: \u4e8b\u4ef6\u4e0d\u80fd\u8def\u7531\u5230\u5176\u4ed6\u623f\u95f4</li> <li>Agent \u72ec\u5360\u6027: \u4e00\u4e2a\u623f\u95f4\u53ea\u80fd\u6709\u4e00\u4e2a Agent</li> <li>\u6d88\u606f\u9694\u79bb: \u901a\u77e5\u53ea\u5e7f\u64ad\u7ed9\u540c\u4e00\u623f\u95f4\u6210\u5458</li> </ol>"},{"location":"specification/security/#\u5b9e\u73b0\u68c0\u67e5\u6e05\u5355","title":"\u5b9e\u73b0\u68c0\u67e5\u6e05\u5355","text":"<pre><code># Server \u5fc5\u987b\u9a8c\u8bc1\ndef validate_room_access(sid, target_office_id):\n    session = get_session(sid)\n    if session.office_id != target_office_id:\n        raise PermissionError(\"Cross-room access denied\")\n</code></pre>"},{"location":"specification/security/#\u8f93\u5165\u9a8c\u8bc1","title":"\u8f93\u5165\u9a8c\u8bc1","text":""},{"location":"specification/security/#\u6570\u636e\u9a8c\u8bc1\u8981\u6c42","title":"\u6570\u636e\u9a8c\u8bc1\u8981\u6c42","text":"<p>\u6240\u6709\u8f93\u5165\u6570\u636e\u5fc5\u987b\u8fdb\u884c\u9a8c\u8bc1\uff1a</p> \u9a8c\u8bc1\u9879 \u8bf4\u660e \u7c7b\u578b\u68c0\u67e5 \u786e\u4fdd\u5b57\u6bb5\u7c7b\u578b\u6b63\u786e \u957f\u5ea6\u9650\u5236 \u9632\u6b62\u7f13\u51b2\u533a\u6ea2\u51fa \u683c\u5f0f\u6821\u9a8c \u9a8c\u8bc1 URL\u3001ID \u7b49\u683c\u5f0f \u8303\u56f4\u68c0\u67e5 \u9a8c\u8bc1\u6570\u503c\u5728\u5408\u7406\u8303\u56f4\u5185"},{"location":"specification/security/#\u5de5\u5177\u53c2\u6570\u9a8c\u8bc1","title":"\u5de5\u5177\u53c2\u6570\u9a8c\u8bc1","text":"<pre><code># \u63a8\u8350\uff1a\u4f7f\u7528 Pydantic \u8fdb\u884c\u9a8c\u8bc1\nfrom pydantic import BaseModel, validator\n\nclass ToolCallParams(BaseModel):\n    tool_name: str\n    params: dict\n    timeout: int\n\n    @validator('timeout')\n    def validate_timeout(cls, v):\n        if v &lt;= 0 or v &gt; 3600:\n            raise ValueError('Timeout must be between 1 and 3600')\n        return v\n</code></pre>"},{"location":"specification/security/#\u8d44\u6e90\u9650\u5236","title":"\u8d44\u6e90\u9650\u5236","text":""},{"location":"specification/security/#dos-\u9632\u62a4","title":"DoS \u9632\u62a4","text":"<p>\u5b9e\u73b0\u5e94\u8be5\u5bf9\u4ee5\u4e0b\u8d44\u6e90\u8bbe\u7f6e\u9650\u5236\uff1a</p> \u8d44\u6e90 \u5efa\u8bae\u9650\u5236 \u5e76\u53d1\u8fde\u63a5\u6570 \u6bcf IP 100 \u4e2a \u8bf7\u6c42\u9891\u7387 \u6bcf\u79d2 100 \u8bf7\u6c42 \u6d88\u606f\u5927\u5c0f 1MB \u5de5\u5177\u8c03\u7528\u8d85\u65f6 300 \u79d2"},{"location":"specification/security/#\u9650\u6d41\u5b9e\u73b0","title":"\u9650\u6d41\u5b9e\u73b0","text":"<pre><code># \u793a\u4f8b\uff1a\u4f7f\u7528\u4ee4\u724c\u6876\u7b97\u6cd5\nfrom ratelimit import limits, sleep_and_retry\n\n@sleep_and_retry\n@limits(calls=100, period=1)\ndef handle_request(request):\n    # \u5904\u7406\u8bf7\u6c42\n    pass\n</code></pre>"},{"location":"specification/security/#\u65e5\u5fd7\u4e0e\u5ba1\u8ba1","title":"\u65e5\u5fd7\u4e0e\u5ba1\u8ba1","text":""},{"location":"specification/security/#\u5b89\u5168\u65e5\u5fd7","title":"\u5b89\u5168\u65e5\u5fd7","text":"<p>\u5e94\u8be5\u8bb0\u5f55\u4ee5\u4e0b\u5b89\u5168\u76f8\u5173\u4e8b\u4ef6\uff1a</p> \u4e8b\u4ef6\u7c7b\u578b \u65e5\u5fd7\u7ea7\u522b \u8ba4\u8bc1\u5931\u8d25 WARNING \u8de8\u623f\u95f4\u8bbf\u95ee\u5c1d\u8bd5 WARNING \u6743\u9650\u62d2\u7edd WARNING \u5f02\u5e38\u9ad8\u9891\u8bf7\u6c42 WARNING \u654f\u611f\u64cd\u4f5c INFO"},{"location":"specification/security/#\u65e5\u5fd7\u683c\u5f0f","title":"\u65e5\u5fd7\u683c\u5f0f","text":"<pre><code># \u63a8\u8350\u7684\u5b89\u5168\u65e5\u5fd7\u683c\u5f0f\nlogger.warning(\n    \"Authentication failed\",\n    extra={\n        \"client_ip\": client_ip,\n        \"user_agent\": user_agent,\n        \"reason\": \"Invalid API key\",\n        \"timestamp\": datetime.utcnow().isoformat()\n    }\n)\n</code></pre>"},{"location":"specification/security/#\u654f\u611f\u4fe1\u606f\u8fc7\u6ee4","title":"\u654f\u611f\u4fe1\u606f\u8fc7\u6ee4","text":"<p>\u65e5\u5fd7\u7981\u6b62\u5305\u542b\uff1a</p> <ul> <li>API \u5bc6\u94a5\u6216 Token</li> <li>\u5bc6\u7801</li> <li>\u4e2a\u4eba\u8eab\u4efd\u4fe1\u606f\uff08PII\uff09</li> <li>\u4fe1\u7528\u5361\u53f7\u7b49\u91d1\u878d\u4fe1\u606f</li> </ul>"},{"location":"specification/security/#\u5b89\u5168\u66f4\u65b0","title":"\u5b89\u5168\u66f4\u65b0","text":""},{"location":"specification/security/#\u4f9d\u8d56\u7ba1\u7406","title":"\u4f9d\u8d56\u7ba1\u7406","text":"<ul> <li>\u5b9a\u671f\u66f4\u65b0\u4f9d\u8d56\u5305</li> <li>\u4f7f\u7528 <code>pip-audit</code> \u6216 <code>safety</code> \u68c0\u67e5\u6f0f\u6d1e</li> <li>\u8ba2\u9605\u5b89\u5168\u516c\u544a</li> </ul>"},{"location":"specification/security/#\u6f0f\u6d1e\u54cd\u5e94","title":"\u6f0f\u6d1e\u54cd\u5e94","text":"<ol> <li>\u8bc4\u4f30\u6f0f\u6d1e\u5f71\u54cd</li> <li>\u5236\u5b9a\u4fee\u590d\u8ba1\u5212</li> <li>\u53d1\u5e03\u5b89\u5168\u8865\u4e01</li> <li>\u901a\u77e5\u7528\u6237\u66f4\u65b0</li> </ol>"},{"location":"specification/security/#\u5b89\u5168\u68c0\u67e5\u6e05\u5355","title":"\u5b89\u5168\u68c0\u67e5\u6e05\u5355","text":""},{"location":"specification/security/#\u90e8\u7f72\u524d\u68c0\u67e5","title":"\u90e8\u7f72\u524d\u68c0\u67e5","text":"<ul> <li> TLS \u5df2\u542f\u7528\uff08\u516c\u7f51\u90e8\u7f72\uff09</li> <li> \u8ba4\u8bc1\u673a\u5236\u5df2\u914d\u7f6e</li> <li> \u654f\u611f\u51ed\u8bc1\u672a\u786c\u7f16\u7801</li> <li> \u8f93\u5165\u9a8c\u8bc1\u5df2\u5b9e\u73b0</li> <li> \u8d44\u6e90\u9650\u5236\u5df2\u914d\u7f6e</li> <li> \u5b89\u5168\u65e5\u5fd7\u5df2\u542f\u7528</li> <li> \u4f9d\u8d56\u65e0\u5df2\u77e5\u6f0f\u6d1e</li> </ul>"},{"location":"specification/security/#\u5b9a\u671f\u68c0\u67e5","title":"\u5b9a\u671f\u68c0\u67e5","text":"<ul> <li> \u8bc1\u4e66\u6709\u6548\u6027</li> <li> API \u5bc6\u94a5\u8f6e\u6362</li> <li> \u65e5\u5fd7\u5ba1\u8ba1</li> <li> \u4f9d\u8d56\u66f4\u65b0</li> <li> \u6e17\u900f\u6d4b\u8bd5</li> </ul>"},{"location":"specification/security/#\u53c2\u8003","title":"\u53c2\u8003","text":"<ul> <li>OWASP Top 10: https://owasp.org/www-project-top-ten/</li> <li>Socket.IO \u5b89\u5168: https://socket.io/docs/v4/security/</li> <li>Python \u5b89\u5168: https://python-security.readthedocs.io/</li> </ul>"}]}